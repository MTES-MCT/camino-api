[
  {
    "__docId__": 1,
    "kind": "external",
    "name": "Infinity",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Infinity",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Infinity",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 2,
    "kind": "external",
    "name": "NaN",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NaN",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~NaN",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 3,
    "kind": "external",
    "name": "undefined",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~undefined",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 4,
    "kind": "external",
    "name": "null",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~null",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 5,
    "kind": "external",
    "name": "Object",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Object",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 6,
    "kind": "external",
    "name": "object",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~object",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 7,
    "kind": "external",
    "name": "Function",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Function",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 8,
    "kind": "external",
    "name": "function",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~function",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 9,
    "kind": "external",
    "name": "Boolean",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Boolean",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 10,
    "kind": "external",
    "name": "boolean",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~boolean",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 11,
    "kind": "external",
    "name": "Symbol",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Symbol",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 12,
    "kind": "external",
    "name": "Error",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Error",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 13,
    "kind": "external",
    "name": "EvalError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/EvalError",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~EvalError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 14,
    "kind": "external",
    "name": "InternalError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/InternalError",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~InternalError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 15,
    "kind": "external",
    "name": "RangeError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RangeError",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~RangeError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 16,
    "kind": "external",
    "name": "ReferenceError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ReferenceError",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~ReferenceError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 17,
    "kind": "external",
    "name": "SyntaxError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SyntaxError",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~SyntaxError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 18,
    "kind": "external",
    "name": "TypeError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~TypeError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 19,
    "kind": "external",
    "name": "URIError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/URIError",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~URIError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 20,
    "kind": "external",
    "name": "Number",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Number",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 21,
    "kind": "external",
    "name": "number",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~number",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 22,
    "kind": "external",
    "name": "Date",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Date",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 23,
    "kind": "external",
    "name": "String",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~String",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 24,
    "kind": "external",
    "name": "string",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~string",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 25,
    "kind": "external",
    "name": "RegExp",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~RegExp",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 26,
    "kind": "external",
    "name": "Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 27,
    "kind": "external",
    "name": "Int8Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int8Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Int8Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 28,
    "kind": "external",
    "name": "Uint8Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Uint8Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 29,
    "kind": "external",
    "name": "Uint8ClampedArray",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8ClampedArray",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Uint8ClampedArray",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 30,
    "kind": "external",
    "name": "Int16Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int16Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Int16Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 31,
    "kind": "external",
    "name": "Uint16Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint16Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Uint16Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 32,
    "kind": "external",
    "name": "Int32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int32Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Int32Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 33,
    "kind": "external",
    "name": "Uint32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint32Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Uint32Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 34,
    "kind": "external",
    "name": "Float32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float32Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Float32Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 35,
    "kind": "external",
    "name": "Float64Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float64Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Float64Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 36,
    "kind": "external",
    "name": "Map",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Map",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 37,
    "kind": "external",
    "name": "Set",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Set",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 38,
    "kind": "external",
    "name": "WeakMap",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~WeakMap",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 39,
    "kind": "external",
    "name": "WeakSet",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakSet",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~WeakSet",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 40,
    "kind": "external",
    "name": "ArrayBuffer",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~ArrayBuffer",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 41,
    "kind": "external",
    "name": "DataView",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~DataView",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 42,
    "kind": "external",
    "name": "JSON",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~JSON",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 43,
    "kind": "external",
    "name": "Promise",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Promise",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 44,
    "kind": "external",
    "name": "Generator",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Generator",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Generator",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 45,
    "kind": "external",
    "name": "GeneratorFunction",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/GeneratorFunction",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~GeneratorFunction",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 46,
    "kind": "external",
    "name": "Reflect",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Reflect",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Reflect",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 47,
    "kind": "external",
    "name": "Proxy",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Proxy",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 48,
    "kind": "file",
    "name": "src/api/resolvers/_format.js",
    "content": "import {\n  geojsonFeatureMultiPolygon,\n  geojsonFeatureCollectionPoints\n} from './_geojson'\n\nconst titreFormat = t => {\n  t.references =\n    t.references &&\n    Object.keys(t.references).map(r => ({\n      type: r,\n      valeur: t.references[r]\n    }))\n\n  if (t.points && t.points.length) {\n    t.geojsonMultiPolygon = geojsonFeatureMultiPolygon(t.points)\n    t.geojsonPoints = geojsonFeatureCollectionPoints(t.points)\n  }\n\n  t.demarches &&\n    t.demarches.forEach(d => {\n      d.etapes &&\n        d.etapes.forEach(e => {\n          if (e.points.length) {\n            e.geojsonMultiPolygon = geojsonFeatureMultiPolygon(e.points)\n            e.geojsonPoints = geojsonFeatureCollectionPoints(e.points)\n          }\n        })\n    })\n\n  if (t.volumeEtape) {\n    t.volume = t.volumeEtape.volume\n    t.volumeUnite = t.volumeEtape.volumeUnite\n  }\n\n  if (t.surfaceEtape) {\n    t.surface = t.surfaceEtape.surface\n  }\n\n  return t\n}\n\nexport { titreFormat }\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/api/resolvers/_format.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 49,
    "kind": "function",
    "name": "titreFormat",
    "memberof": "src/api/resolvers/_format.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/api/resolvers/_format.js~titreFormat",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/api/resolvers/_format.js",
    "importStyle": "{titreFormat}",
    "description": null,
    "lineNumber": 6,
    "undocument": true,
    "params": [
      {
        "name": "t",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 50,
    "kind": "file",
    "name": "src/api/resolvers/_geojson.js",
    "content": "const geojsonMultiPolygonCoordinates = points =>\n  points.reduce((res, p) => {\n    res[p.groupe] = res[p.groupe] || []\n    res[p.groupe][p.contour] = res[p.groupe][p.contour] || []\n    res[p.groupe][p.contour][p.point] = [p.coordonnees.x, p.coordonnees.y]\n    return res\n  }, [])\n\nconst geojsonFeatureMultiPolygon = points => ({\n  type: 'Feature',\n  geometry: {\n    type: 'MultiPolygon',\n    coordinates: geojsonMultiPolygonCoordinates(points)\n  }\n})\n\nconst geojsonFeatureCollectionPoints = points => {\n  return {\n    type: 'FeatureCollection',\n    features: [\n      ...points.map(p => ({\n        type: 'Feature',\n        geometry: {\n          type: 'Point',\n          coordinates: [p.coordonnees.x, p.coordonnees.y]\n        },\n        properties: {\n          groupe: p.groupe,\n          contour: p.contour,\n          point: p.point\n        }\n      }))\n    ]\n  }\n}\n\nexport {\n  geojsonMultiPolygonCoordinates,\n  geojsonFeatureMultiPolygon,\n  geojsonFeatureCollectionPoints\n}\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/api/resolvers/_geojson.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 51,
    "kind": "function",
    "name": "geojsonMultiPolygonCoordinates",
    "memberof": "src/api/resolvers/_geojson.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/api/resolvers/_geojson.js~geojsonMultiPolygonCoordinates",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/api/resolvers/_geojson.js",
    "importStyle": "{geojsonMultiPolygonCoordinates}",
    "description": null,
    "lineNumber": 1,
    "undocument": true,
    "params": [
      {
        "name": "points",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 52,
    "kind": "function",
    "name": "geojsonFeatureMultiPolygon",
    "memberof": "src/api/resolvers/_geojson.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/api/resolvers/_geojson.js~geojsonFeatureMultiPolygon",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/api/resolvers/_geojson.js",
    "importStyle": "{geojsonFeatureMultiPolygon}",
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "params": [
      {
        "name": "points",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 53,
    "kind": "function",
    "name": "geojsonFeatureCollectionPoints",
    "memberof": "src/api/resolvers/_geojson.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/api/resolvers/_geojson.js~geojsonFeatureCollectionPoints",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/api/resolvers/_geojson.js",
    "importStyle": "{geojsonFeatureCollectionPoints}",
    "description": null,
    "lineNumber": 17,
    "undocument": true,
    "params": [
      {
        "name": "points",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "{\"type\": string, \"features\": *}"
      ]
    }
  },
  {
    "__docId__": 54,
    "kind": "file",
    "name": "src/api/resolvers/_permissions-check.js",
    "content": "const permissionsCheck = (user, permissions) =>\n  user && user.permission && permissions.includes(user.permission.id)\n\nexport default permissionsCheck\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/api/resolvers/_permissions-check.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 55,
    "kind": "function",
    "name": "permissionsCheck",
    "memberof": "src/api/resolvers/_permissions-check.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/api/resolvers/_permissions-check.js~permissionsCheck",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/api/resolvers/_permissions-check.js",
    "importStyle": "permissionsCheck",
    "description": null,
    "lineNumber": 1,
    "undocument": true,
    "params": [
      {
        "name": "user",
        "types": [
          "*"
        ]
      },
      {
        "name": "permissions",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 56,
    "kind": "file",
    "name": "src/api/resolvers/_restrictions.js",
    "content": "import { debug } from '../../config/index'\n\nconst restrictedDomaineIds = debug ? [] : ['f', 'r', 's']\nconst restrictedStatutIds = debug ? [] : ['dmc', 'ech', 'ind']\n\nexport { restrictedDomaineIds, restrictedStatutIds }\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/api/resolvers/_restrictions.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 57,
    "kind": "variable",
    "name": "restrictedDomaineIds",
    "memberof": "src/api/resolvers/_restrictions.js",
    "static": true,
    "longname": "src/api/resolvers/_restrictions.js~restrictedDomaineIds",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/api/resolvers/_restrictions.js",
    "importStyle": "{restrictedDomaineIds}",
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 58,
    "kind": "variable",
    "name": "restrictedStatutIds",
    "memberof": "src/api/resolvers/_restrictions.js",
    "static": true,
    "longname": "src/api/resolvers/_restrictions.js~restrictedStatutIds",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/api/resolvers/_restrictions.js",
    "importStyle": "{restrictedStatutIds}",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 59,
    "kind": "file",
    "name": "src/api/resolvers/entreprises.js",
    "content": "import {\n  entrepriseGet,\n  entreprisesGet\n} from '../../database/queries/entreprises'\n\nimport permissionsCheck from './_permissions-check'\n\nconst entreprise = async ({ id }, context, info) => {\n  if (context.user && permissionsCheck(context.user, ['super', 'admin'])) {\n    return entrepriseGet(id)\n  }\n\n  return null\n}\n\nconst entreprises = async ({ noms }, context, info) => {\n  if (context.user && permissionsCheck(context.user, ['super', 'admin'])) {\n    return entreprisesGet({ noms })\n  }\n\n  return null\n}\n\nexport { entreprise, entreprises }\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/api/resolvers/entreprises.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 60,
    "kind": "function",
    "name": "entreprise",
    "memberof": "src/api/resolvers/entreprises.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/api/resolvers/entreprises.js~entreprise",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/api/resolvers/entreprises.js",
    "importStyle": "{entreprise}",
    "description": null,
    "lineNumber": 8,
    "undocument": true,
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"id\": *}"
        ],
        "defaultRaw": {
          "id": null
        },
        "defaultValue": "{\"id\":null}"
      },
      {
        "name": "context",
        "types": [
          "*"
        ]
      },
      {
        "name": "info",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 61,
    "kind": "function",
    "name": "entreprises",
    "memberof": "src/api/resolvers/entreprises.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/api/resolvers/entreprises.js~entreprises",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/api/resolvers/entreprises.js",
    "importStyle": "{entreprises}",
    "description": null,
    "lineNumber": 16,
    "undocument": true,
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"noms\": *}"
        ],
        "defaultRaw": {
          "noms": null
        },
        "defaultValue": "{\"noms\":null}"
      },
      {
        "name": "context",
        "types": [
          "*"
        ]
      },
      {
        "name": "info",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 62,
    "kind": "file",
    "name": "src/api/resolvers/metas.js",
    "content": "import permissionsCheck from './_permissions-check'\n\nimport { restrictedDomaineIds, restrictedStatutIds } from './_restrictions'\n\nimport {\n  typesGet,\n  domainesGet,\n  statutsGet,\n  demarchesTypesGet\n} from '../../database/queries/metas'\n\nconst check = (elements, restrictedList) =>\n  elements.filter(element => !restrictedList.find(id => id === element.id))\n\nconst metas = async (variables, context, info) => {\n  const types = await typesGet()\n  let domaines = await domainesGet()\n  let statuts = await statutsGet()\n  let demarchesTypes\n\n  if (!context.user) {\n    domaines = check(domaines, restrictedDomaineIds)\n    statuts = check(statuts, restrictedStatutIds)\n  }\n\n  if (permissionsCheck(context.user, ['super', 'admin'])) {\n    demarchesTypes = demarchesTypesGet()\n  }\n\n  return {\n    types,\n    domaines,\n    statuts,\n    demarchesTypes\n  }\n}\n\nexport { metas }\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/api/resolvers/metas.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 63,
    "kind": "function",
    "name": "check",
    "memberof": "src/api/resolvers/metas.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/api/resolvers/metas.js~check",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/api/resolvers/metas.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 12,
    "undocument": true,
    "params": [
      {
        "name": "elements",
        "types": [
          "*"
        ]
      },
      {
        "name": "restrictedList",
        "types": [
          "*"
        ]
      }
    ],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 64,
    "kind": "function",
    "name": "metas",
    "memberof": "src/api/resolvers/metas.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/api/resolvers/metas.js~metas",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/api/resolvers/metas.js",
    "importStyle": "{metas}",
    "description": null,
    "lineNumber": 15,
    "undocument": true,
    "params": [
      {
        "name": "variables",
        "types": [
          "*"
        ]
      },
      {
        "name": "context",
        "types": [
          "*"
        ]
      },
      {
        "name": "info",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "{\"types\": *, \"domaines\": *, \"statuts\": *, \"demarchesTypes\": *}"
      ]
    }
  },
  {
    "__docId__": 65,
    "kind": "file",
    "name": "src/api/resolvers/permissions.js",
    "content": "import {\n  permissionGet,\n  permissionsGet\n} from '../../database/queries/permissions'\n\nimport permissionsCheck from './_permissions-check'\n\nconst permission = async ({ id }, context) => permissionGet(id)\n\nconst permissions = async (_, context) => {\n  if (permissionsCheck(context.user, ['super', 'admin'])) {\n    return permissionsGet({\n      ordreMax: context.user ? context.user.permission.ordre : null\n    })\n  }\n\n  return null\n}\n\nexport { permission, permissions }\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/api/resolvers/permissions.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 66,
    "kind": "function",
    "name": "permission",
    "memberof": "src/api/resolvers/permissions.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/api/resolvers/permissions.js~permission",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/api/resolvers/permissions.js",
    "importStyle": "{permission}",
    "description": null,
    "lineNumber": 8,
    "undocument": true,
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"id\": *}"
        ],
        "defaultRaw": {
          "id": null
        },
        "defaultValue": "{\"id\":null}"
      },
      {
        "name": "context",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 67,
    "kind": "function",
    "name": "permissions",
    "memberof": "src/api/resolvers/permissions.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/api/resolvers/permissions.js~permissions",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/api/resolvers/permissions.js",
    "importStyle": "{permissions}",
    "description": null,
    "lineNumber": 10,
    "undocument": true,
    "params": [
      {
        "name": "_",
        "types": [
          "*"
        ]
      },
      {
        "name": "context",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 68,
    "kind": "file",
    "name": "src/api/resolvers/substances.js",
    "content": "import { substanceGet, substancesGet } from '../../database/queries/substances'\n\nconst substance = async ({ id }, context) => substanceGet(id)\n\nconst substances = async (_, context) => substancesGet()\n\nexport { substance, substances }\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/api/resolvers/substances.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 69,
    "kind": "function",
    "name": "substance",
    "memberof": "src/api/resolvers/substances.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/api/resolvers/substances.js~substance",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/api/resolvers/substances.js",
    "importStyle": "{substance}",
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"id\": *}"
        ],
        "defaultRaw": {
          "id": null
        },
        "defaultValue": "{\"id\":null}"
      },
      {
        "name": "context",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 70,
    "kind": "function",
    "name": "substances",
    "memberof": "src/api/resolvers/substances.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/api/resolvers/substances.js~substances",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/api/resolvers/substances.js",
    "importStyle": "{substances}",
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "params": [
      {
        "name": "_",
        "types": [
          "*"
        ]
      },
      {
        "name": "context",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 71,
    "kind": "file",
    "name": "src/api/resolvers/titres-travaux.js",
    "content": "import * as dateFormat from 'dateformat'\n\nimport {\n  titresTravauxRapportGet,\n  titreTravauxRapportUpdate\n} from '../../database/queries/titres-travaux'\n\nimport {\n  utilisateurGet,\n  utilisateursGet\n} from '../../database/queries/utilisateurs'\n\nimport { titreGet } from '../../database/queries/titres'\n\nimport permissionsCheck from './_permissions-check'\n\nimport { titreTravauxRapportRowUpdate } from '../../tools/export/titre-travaux-rapport'\nimport emailsBatch from '../../tools/mailer/batch'\n\nconst titreTravauxRapportModifier = async ({ rapport }, context, info) => {\n  const errors = []\n  const titre = await titreGet(rapport.titreId)\n  const user = await utilisateurGet(context.user.id)\n  const rapportOld = await titresTravauxRapportGet(rapport.id)\n\n  if (\n    !(\n      permissionsCheck(context.user, ['super', 'admin']) ||\n      (permissionsCheck(context.user, ['entreprise']) &&\n        titre.titulaires.find(t => t.id === user.entrepriseId))\n    )\n  ) {\n    errors.push(\"droits insuffisants pour effectuer l'opération\")\n  }\n\n  if (\n    !(\n      titre.domaineId === 'm' &&\n      (titre.typeId === 'cxx' ||\n        titre.typeId === 'pxm' ||\n        titre.typeId === 'axm')\n    )\n  ) {\n    errors.push('ce titre ne peut pas recevoir de rapport')\n  }\n\n  if (rapportOld && rapportOld.confirmation) {\n    errors.push('ce rapport a été validé et ne peux plus être modifié')\n  }\n\n  if (!errors.length) {\n    titreTravauxRapportRowUpdate(rapport)\n\n    if (rapport.confirmation) {\n      const utilisateurs = await utilisateursGet({\n        entrepriseIds: titre.titulaires.map(t => t.id),\n        noms: undefined,\n        administrationIds: undefined,\n        permissionIds: undefined\n      })\n      const emails = utilisateurs.reduce(\n        (res, u) => (u.email ? [...res, u.email] : res),\n        // si la variable d'environnement existe,\n        // on ajoute un email générique pour recevoir une copie\n        process.env.TRAVAUX_RAPPORTS_EMAIL\n          ? [process.env.TRAVAUX_RAPPORTS_EMAIL]\n          : []\n      )\n      const subject = `[Camino] Rapport trimestriel ${titre.nom}, ${\n        rapport.contenu.trimestre\n      } trimestre ${rapport.contenu.annee}`\n      const html = emailFormat(titre, user, rapport)\n\n      await emailsBatch(emails, subject, html)\n    }\n\n    return titreTravauxRapportUpdate({\n      titreTravauxRapport: rapport\n    })\n  } else {\n    throw new Error(errors.join(', '))\n  }\n}\n\nconst emailFormat = (titre, user, rapport) => {\n  const header = `\n<h1>Rapport trimestriel ${titre.nom}, ${rapport.contenu.trimestre} trimestre ${\n    rapport.contenu.annee\n  }</h1>\n\n<hr>\n\n<b>Lien</b> : ${process.env.UI_URL}/titres/${rapport.titreId} <br>\n\n<b>Rempli par</b> : ${user.prenom} ${user.nom} (${user.email}) <br>\n\n<b>Date</b> : ${dateFormat(rapport.date, 'dd-mm-yyyy')} <br>\n\n<hr>\n\n<ul>\n  <li><b>Or net extrait (g)</b> : ${rapport.contenu.or}</li>\n  <li><b>Mercure récupéré (g)</b> : ${rapport.contenu.mercure}</li>\n  <li><b>Carburant détaxé (l)</b> : ${rapport.contenu.carburantDetaxe}</li>\n  <li><b>Carburant conventionnel (l)</b> : ${\n    rapport.contenu.carburantConventionnel\n  }</li>\n  <li><b>Pompes actives</b> : ${rapport.contenu.pompes}</li>\n  <li><b>Pelles actives</b> : ${rapport.contenu.pelles}</li>\n  <li><b>Effectifs</b> : ${rapport.contenu.effectifs}</li>\n  <li>\n    <b>Dépenses relatives à la protection de l’environnement (euros)</b> : ${\n      rapport.contenu.environnement\n    }\n  </li>\n</ul>\n\n<hr>\n\n<h2>Travaux</h2>`\n\n  const body = rapport.contenu.travaux.reduce(\n    (res, mois) => `\n${res}\n    \n<hr>\n\n<h3>${mois.nom} ${rapport.contenu.annee}</h3>\n\n<ul>\n  <li>Non débutés : ${mois.nonDebutes ? 'Oui' : 'Non'}</li>\n  <li>Exploitation en cours : ${mois.exploitationEnCours ? 'Oui' : 'Non'}</li>\n  <li>Arrêt temporaire : ${mois.arretTemporaire ? 'Oui' : 'Non'}</li>\n  <li>Réhabilitation : ${mois.rehabilitation ? 'Oui' : 'Non'}</li>\n  <li>Arrêt définitif (après réhabilitation) : ${\n    mois.arretDefinitif ? 'Oui' : 'Non'\n  }</li>\n</ul>`,\n    ''\n  )\n\n  const footer = rapport.contenu.complement\n    ? `<hr>\n\n<h2>Informations complémentaires</h2>\n\n<p>${rapport.contenu.complement}</p>\n`\n    : ''\n\n  return `\n${header}\n${body}\n${footer}\n`\n}\n\nexport { titreTravauxRapportModifier }\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/api/resolvers/titres-travaux.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 72,
    "kind": "function",
    "name": "emailFormat",
    "memberof": "src/api/resolvers/titres-travaux.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/api/resolvers/titres-travaux.js~emailFormat",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/api/resolvers/titres-travaux.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 85,
    "undocument": true,
    "params": [
      {
        "name": "titre",
        "types": [
          "*"
        ]
      },
      {
        "name": "user",
        "types": [
          "*"
        ]
      },
      {
        "name": "rapport",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "string"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 73,
    "kind": "function",
    "name": "titreTravauxRapportModifier",
    "memberof": "src/api/resolvers/titres-travaux.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/api/resolvers/titres-travaux.js~titreTravauxRapportModifier",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/api/resolvers/titres-travaux.js",
    "importStyle": "{titreTravauxRapportModifier}",
    "description": null,
    "lineNumber": 20,
    "undocument": true,
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"rapport\": *}"
        ],
        "defaultRaw": {
          "rapport": null
        },
        "defaultValue": "{\"rapport\":null}"
      },
      {
        "name": "context",
        "types": [
          "*"
        ]
      },
      {
        "name": "info",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 74,
    "kind": "file",
    "name": "src/api/resolvers/titres.js",
    "content": "import permissionsCheck from './_permissions-check'\nimport { titreFormat } from './_format'\nimport { restrictedDomaineIds, restrictedStatutIds } from './_restrictions'\n\nimport {\n  titreGet,\n  titresGet,\n  titreAdd,\n  titreRemove,\n  titreUpdate\n} from '../../database/queries/titres'\n\nimport { domainesGet, statutsGet } from '../../database/queries/metas'\n\nimport { titreEtapeUpsert } from '../../database/queries/titres-etapes'\n\nimport { utilisateurGet } from '../../database/queries/utilisateurs'\n\nimport { dupRemove, dupFind } from '../../tools/index'\n\nimport titreEtapeUpdateTasks from '../../tasks/etape-update/index'\n\nconst titre = async ({ id }, context, info) => {\n  const titre = await titreGet(id)\n\n  const userEntreprisePermissions = async (userId, titreEntrepriseIds) => {\n    const utilisateur = await utilisateurGet(userId)\n    const entrepriseId = utilisateur.entreprise && utilisateur.entreprise.id\n    return titreEntrepriseIds.some(id => id === entrepriseId)\n  }\n\n  return (!restrictedDomaineIds.includes(titre.domaineId) &&\n    !restrictedStatutIds.includes(titre.statutId)) ||\n    (context.user &&\n      (permissionsCheck(context.user, ['admin', 'super']) ||\n        (await userEntreprisePermissions(context.user.id, [\n          ...titre.titulaires.map(t => t.id),\n          ...titre.amodiataires.map(t => t.id)\n        ]))))\n    ? titre && titreFormat(titre)\n    : null\n}\n\nconst titres = async (\n  { typeIds, domaineIds, statutIds, substances, noms, entreprises, references },\n  context,\n  info\n) => {\n  const domaineIdsRestrict = async domaineIds => {\n    if (!domaineIds) {\n      const domaines = await domainesGet()\n      domaineIds = domaines.map(domaine => domaine.id)\n    }\n\n    return domaineIds.filter(id => !restrictedDomaineIds.includes(id))\n  }\n\n  const statutIdsRestrict = async statutIds => {\n    if (!statutIds) {\n      const statuts = await statutsGet()\n      statutIds = statuts.map(statut => statut.id)\n    }\n\n    return statutIds.filter(id => !restrictedStatutIds.includes(id))\n  }\n\n  const userEntrepriseTitresFind = async (\n    userId,\n    {\n      typeIds,\n      domaineIds,\n      statutIds,\n      substances,\n      noms,\n      entreprises,\n      references\n    }\n  ) => {\n    const utilisateur = await utilisateurGet(userId)\n    const entrepriseId =\n      utilisateur && utilisateur.entreprise && utilisateur.entreprise.id\n\n    if (entrepriseId) {\n      // si le filtre `entreprise est renseigné,\n      // on en peut pas savoir si `entreprises` renvoie la même liste que `[entrepriseId]`\n      // donc on fait une requête pour chaque\n      // et on ne garde que les éléments présent dans les deux\n      const entrepriseTitres =\n        entreprises &&\n        (await titresGet({\n          typeIds,\n          domaineIds,\n          statutIds,\n          substances,\n          noms,\n          entreprises,\n          references\n        }))\n\n      const userEntrepriseTitres = await titresGet({\n        typeIds,\n        domaineIds,\n        statutIds,\n        substances,\n        noms,\n        entreprises: [entrepriseId],\n        references\n      })\n\n      return entreprises\n        ? dupFind('id', entrepriseTitres, userEntrepriseTitres)\n        : userEntrepriseTitres\n    }\n\n    return []\n  }\n\n  const userEntrepriseTitres =\n    context.user && permissionsCheck(context.user, ['entreprise'])\n      ? await userEntrepriseTitresFind(context.user.id, {\n          typeIds,\n          domaineIds,\n          statutIds,\n          substances,\n          noms,\n          entreprises,\n          references\n        })\n      : []\n\n  const titres = await titresGet({\n    typeIds,\n    domaineIds:\n      context.user && permissionsCheck(context.user, ['admin', 'super'])\n        ? domaineIds\n        : await domaineIdsRestrict(domaineIds),\n    statutIds:\n      context.user && permissionsCheck(context.user, ['admin', 'super'])\n        ? statutIds\n        : await statutIdsRestrict(statutIds),\n    substances,\n    noms,\n    entreprises,\n    references\n  })\n\n  const titresList = dupRemove('id', titres, userEntrepriseTitres)\n\n  return titresList.map(titre => titre && titreFormat(titre))\n}\n\nconst titreAjouter = async ({ titre }, context, info) => {\n  const errors = []\n\n  if (!permissionsCheck(context.user, ['super', 'admin'])) {\n    errors.push('opération impossible')\n  }\n\n  if (!errors.length) {\n    return titreAdd(titre)\n  } else {\n    throw new Error(errors.join(', '))\n  }\n}\n\nconst titreSupprimer = async ({ id }, context, info) => {\n  const errors = []\n\n  if (!permissionsCheck(context.user, ['super', 'admin'])) {\n    errors.push('opération impossible')\n  }\n\n  if (!errors.length) {\n    return titreRemove(id)\n  } else {\n    throw new Error(errors.join(', '))\n  }\n}\n\nconst titreModifier = async ({ titre }, context, info) => {\n  const errors = []\n\n  if (!permissionsCheck(context.user, ['super', 'admin'])) {\n    errors.push('opération impossible')\n  }\n\n  if (!errors.length) {\n    return titreUpdate(titre)\n  } else {\n    throw new Error(errors.join(', '))\n  }\n}\n\nconst titreEtapeModifier = async ({ etape }, context, info) => {\n  const errors = []\n\n  if (!permissionsCheck(context.user, ['super', 'admin'])) {\n    errors.push('opération impossible')\n  }\n\n  if (!errors.length) {\n    // si l'id de l'étape ne correspond pas à son type\n    const etapeTypeIdSlug = etape.id.slice(-5, -2)\n    const etapeTypeId = etape.type.id\n    console.log(etapeTypeIdSlug, etapeTypeId)\n    if (etapeTypeIdSlug !== etapeTypeId) {\n      // mettre à jour l'id de l'étape et les ids de ses enfants\n      const etapeIdUpdated = etapeIdUpdate(etape)\n      console.log(etapeIdUpdated)\n      // supprimer l'ancienne étape et ses enfants\n      // ajouter la nouvelle étape et ses enfants\n    }\n\n    const res = await titreEtapeUpsert(etape)\n    await titreEtapeUpdateTasks(etape)\n\n    return res\n  } else {\n    throw new Error(errors.join(', '))\n  }\n}\n\nconst etapeIdUpdate = etape => {\n  const props = [\n    'substances',\n    'points',\n    'titulaires',\n    'amodiataires',\n    'administrations',\n    'documents',\n    'communes',\n    'emprises'\n  ]\n\n  return etape\n}\n\nexport {\n  titre,\n  titres,\n  titreAjouter,\n  titreSupprimer,\n  titreModifier,\n  titreEtapeModifier\n}\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/api/resolvers/titres.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 75,
    "kind": "function",
    "name": "etapeIdUpdate",
    "memberof": "src/api/resolvers/titres.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/api/resolvers/titres.js~etapeIdUpdate",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/api/resolvers/titres.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 223,
    "undocument": true,
    "params": [
      {
        "name": "etape",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 76,
    "kind": "function",
    "name": "titre",
    "memberof": "src/api/resolvers/titres.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/api/resolvers/titres.js~titre",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/api/resolvers/titres.js",
    "importStyle": "{titre}",
    "description": null,
    "lineNumber": 23,
    "undocument": true,
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"id\": *}"
        ],
        "defaultRaw": {
          "id": null
        },
        "defaultValue": "{\"id\":null}"
      },
      {
        "name": "context",
        "types": [
          "*"
        ]
      },
      {
        "name": "info",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 77,
    "kind": "function",
    "name": "titres",
    "memberof": "src/api/resolvers/titres.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/api/resolvers/titres.js~titres",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/api/resolvers/titres.js",
    "importStyle": "{titres}",
    "description": null,
    "lineNumber": 44,
    "undocument": true,
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"typeIds\": *, \"domaineIds\": *, \"statutIds\": *, \"substances\": *, \"noms\": *, \"entreprises\": *, \"references\": *}"
        ],
        "defaultRaw": {
          "typeIds": null,
          "domaineIds": null,
          "statutIds": null,
          "substances": null,
          "noms": null,
          "entreprises": null,
          "references": null
        },
        "defaultValue": "{\"typeIds\":null,\"domaineIds\":null,\"statutIds\":null,\"substances\":null,\"noms\":null,\"entreprises\":null,\"references\":null}"
      },
      {
        "name": "context",
        "types": [
          "*"
        ]
      },
      {
        "name": "info",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 78,
    "kind": "function",
    "name": "titreAjouter",
    "memberof": "src/api/resolvers/titres.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/api/resolvers/titres.js~titreAjouter",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/api/resolvers/titres.js",
    "importStyle": "{titreAjouter}",
    "description": null,
    "lineNumber": 152,
    "undocument": true,
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"titre\": *}"
        ],
        "defaultRaw": {
          "titre": null
        },
        "defaultValue": "{\"titre\":null}"
      },
      {
        "name": "context",
        "types": [
          "*"
        ]
      },
      {
        "name": "info",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 79,
    "kind": "function",
    "name": "titreSupprimer",
    "memberof": "src/api/resolvers/titres.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/api/resolvers/titres.js~titreSupprimer",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/api/resolvers/titres.js",
    "importStyle": "{titreSupprimer}",
    "description": null,
    "lineNumber": 166,
    "undocument": true,
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"id\": *}"
        ],
        "defaultRaw": {
          "id": null
        },
        "defaultValue": "{\"id\":null}"
      },
      {
        "name": "context",
        "types": [
          "*"
        ]
      },
      {
        "name": "info",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 80,
    "kind": "function",
    "name": "titreModifier",
    "memberof": "src/api/resolvers/titres.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/api/resolvers/titres.js~titreModifier",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/api/resolvers/titres.js",
    "importStyle": "{titreModifier}",
    "description": null,
    "lineNumber": 180,
    "undocument": true,
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"titre\": *}"
        ],
        "defaultRaw": {
          "titre": null
        },
        "defaultValue": "{\"titre\":null}"
      },
      {
        "name": "context",
        "types": [
          "*"
        ]
      },
      {
        "name": "info",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 81,
    "kind": "function",
    "name": "titreEtapeModifier",
    "memberof": "src/api/resolvers/titres.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/api/resolvers/titres.js~titreEtapeModifier",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/api/resolvers/titres.js",
    "importStyle": "{titreEtapeModifier}",
    "description": null,
    "lineNumber": 194,
    "undocument": true,
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"etape\": *}"
        ],
        "defaultRaw": {
          "etape": null
        },
        "defaultValue": "{\"etape\":null}"
      },
      {
        "name": "context",
        "types": [
          "*"
        ]
      },
      {
        "name": "info",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 82,
    "kind": "file",
    "name": "src/api/resolvers/utilisateurs.js",
    "content": "import * as bcrypt from 'bcrypt'\nimport * as jwt from 'jsonwebtoken'\nimport * as emailRegex from 'email-regex'\nimport * as cryptoRandomString from 'crypto-random-string'\nimport mailer from '../../tools/mailer/index'\n\nimport {\n  utilisateurGet,\n  utilisateursGet,\n  utilisateurAdd,\n  utilisateurUpdate,\n  utilisateurRemove,\n  utilisateurByEmailGet\n} from '../../database/queries/utilisateurs'\n\nimport permissionsCheck from './_permissions-check'\n\nconst permissionsVisibleForAdmin = [\n  'admin',\n  'editeur',\n  'lecteur',\n  'entreprise',\n  'defaut'\n]\n\nconst utilisateurErreurs = async utilisateur => {\n  const errors = []\n\n  if (!utilisateur.prenom) {\n    errors.push('prénom manquant')\n  }\n\n  if (!utilisateur.nom) {\n    errors.push('nom manquant')\n  }\n\n  if (!utilisateur.email) {\n    errors.push('email manquant')\n  } else if (!emailRegex({ exact: true }).test(utilisateur.email)) {\n    errors.push('adresse email invalide')\n  }\n\n  return errors\n}\n\nconst userIdGenerate = async () => {\n  const id = cryptoRandomString(6)\n  const utilisateurWithTheSameId = await utilisateurGet(id)\n  if (utilisateurWithTheSameId) {\n    return userIdGenerate()\n  }\n\n  return id\n}\n\nconst utilisateur = async ({ id }, context, info) => {\n  if (\n    permissionsCheck(context.user, ['super']) ||\n    (context.user && context.user.id === id)\n  ) {\n    return utilisateurGet(id)\n  } else if (context.user && permissionsCheck(context.user, ['admin'])) {\n    const utilisateur = await utilisateurGet(id)\n\n    if (permissionsCheck(utilisateur, permissionsVisibleForAdmin)) {\n      return utilisateur\n    } else {\n      return null\n    }\n  }\n\n  return null\n}\n\nconst utilisateurs = async (\n  { entrepriseIds, administrationIds, permissionIds, noms },\n  context,\n  info\n) => {\n  if (context.user && permissionsCheck(context.user, ['super', 'admin'])) {\n    if (permissionsCheck(context.user, ['admin'])) {\n      if (permissionIds) {\n        permissionIds = permissionIds.filter(id =>\n          permissionsVisibleForAdmin.includes(id)\n        )\n      } else {\n        permissionIds = permissionsVisibleForAdmin\n      }\n    }\n\n    const utilisateurs = await utilisateursGet({\n      noms,\n      entrepriseIds,\n      administrationIds,\n      permissionIds\n    })\n\n    return utilisateurs\n  }\n  return null\n}\n\nconst utilisateurIdentifier = async (variables, context, info) => {\n  const utilisateur = context.user && (await utilisateurGet(context.user.id))\n  let token\n\n  if (utilisateur) {\n    token = tokenCreate(\n      utilisateur.id,\n      utilisateur.email,\n      utilisateur.permission\n    )\n  }\n\n  return { token, utilisateur }\n}\n\nconst utilisateurConnecter = async ({ email, motDePasse }, context, info) => {\n  const errors = []\n  let token\n  let utilisateur\n  const emailIsValid = emailRegex({ exact: true }).test(email)\n\n  if (!email) {\n    errors.push('adresse email manquante')\n  }\n\n  if (!emailIsValid) {\n    errors.push('adresse email invalide')\n  }\n\n  if (!motDePasse) {\n    errors.push('mot de passe manquant')\n  }\n\n  if (email && emailIsValid && motDePasse) {\n    utilisateur = await utilisateurByEmailGet(email)\n\n    if (utilisateur) {\n      const valid = await bcrypt.compare(motDePasse, utilisateur.motDePasse)\n\n      if (!valid) {\n        errors.push('mot de passe incorrect')\n      }\n    } else {\n      errors.push('aucun utilisateur enregistré avec cette adresse email')\n    }\n  }\n\n  if (!errors.length && utilisateur) {\n    token = tokenCreate(\n      utilisateur.id,\n      utilisateur.email,\n      utilisateur.permission\n    )\n  } else {\n    throw new Error(errors.join(', '))\n  }\n\n  return { token, utilisateur }\n}\n\nconst utilisateurAjouter = async ({ utilisateur }, context) => {\n  const errors = await utilisateurErreurs(utilisateur)\n\n  if (utilisateur.email) {\n    const utilisateurWithTheSameEmail = await utilisateurByEmailGet(\n      utilisateur.email\n    )\n\n    if (utilisateurWithTheSameEmail) {\n      errors.push('un utilisateur avec cet email existe déjà')\n    }\n  }\n\n  if (!utilisateur.motDePasse) {\n    errors.push('mot de passe manquant')\n  } else if (utilisateur.motDePasse.length < 8) {\n    errors.push('le mot de passe doit contenir au moins 8 caractères')\n  }\n\n  if (\n    !permissionsCheck(context.user, ['super', 'admin']) ||\n    !utilisateur.permission\n  ) {\n    utilisateur.permission = { id: 'defaut' }\n  }\n\n  if (\n    !permissionsCheck(context.user, ['super']) &&\n    utilisateur.permission.id === 'super'\n  ) {\n    errors.push(\n      'droits insuffisants pour créer un utilisateur avec ces permissions'\n    )\n  }\n\n  if (\n    !permissionsCheck(context.user, ['super', 'admin']) &&\n    context.user.email !== utilisateur.email\n  ) {\n    errors.push(\n      'droits insuffisants pour créer un compte avec cette adresse email'\n    )\n  }\n\n  if (!errors.length) {\n    utilisateur.motDePasse = await bcrypt.hash(utilisateur.motDePasse, 10)\n    utilisateur.id = await userIdGenerate()\n\n    const res = await utilisateurAdd(utilisateur)\n\n    return res\n  } else {\n    throw new Error(errors.join(', '))\n  }\n}\n\nconst utilisateurAjoutEmailEnvoyer = async ({ email }, context) => {\n  const errors = []\n  let utilisateur\n\n  console.log('email', email)\n  const emailIsValid = emailRegex({ exact: true }).test(email)\n\n  if (!email) {\n    errors.push('email manquant')\n  } else if (!emailIsValid) {\n    errors.push('adresse email invalide')\n  } else {\n    utilisateur = await utilisateurByEmailGet(email)\n\n    if (utilisateur) {\n      errors.push('un utilisateur est déjà enregistré avec cette adresse email')\n    }\n  }\n\n  if (!errors.length) {\n    const token = jwt.sign({ email }, process.env.JWT_SECRET)\n\n    const url = `${\n      process.env.UI_URL\n    }/creation-de-compte?token=${token}&email=${email}`\n\n    const subject = `[Camino] Création de votre compte utilisateur`\n    const html = `<p>Pour créer votre compte, <a href=\"${url}\">cliquez ici</a>.</p>`\n\n    try {\n      mailer(email, subject, html)\n    } catch (e) {\n      return \"erreur lors de l'envoi d'email\"\n    }\n\n    return 'un lien pour créer votre compte vous a été envoyé par email'\n  } else {\n    throw new Error(errors.join(', '))\n  }\n}\n\nconst utilisateurModifier = async ({ utilisateur }, context) => {\n  if (\n    permissionsCheck(context.user, ['super', 'admin']) ||\n    context.user.id === utilisateur.id\n  ) {\n    let res\n    const errors = await utilisateurErreurs(utilisateur)\n\n    if (!utilisateur.id) {\n      errors.push('id manquante')\n    }\n\n    if (!errors.length) {\n      res = await utilisateurUpdate(utilisateur)\n    } else {\n      throw new Error(errors.join(', '))\n    }\n\n    return res\n  } else {\n    throw new Error(\"droits insuffisants pour effectuer l'opération\")\n  }\n}\n\nconst utilisateurSupprimer = async ({ id }, context) => {\n  if (\n    permissionsCheck(context.user, ['super', 'admin']) ||\n    context.user.id === id\n  ) {\n    const errors = []\n    let res\n\n    if (!id) {\n      errors.push('id manquante')\n    }\n\n    if (!errors.length) {\n      res = await utilisateurRemove(id)\n    } else {\n      throw new Error(errors.join(', '))\n    }\n\n    return res\n  } else {\n    throw new Error(\"droits insuffisants pour effectuer l'opération\")\n  }\n}\n\nconst utilisateurMotDePasseModifier = async (\n  { id, motDePasse, motDePasseNouveau1, motDePasseNouveau2 },\n  context\n) => {\n  if (\n    permissionsCheck(context.user, ['super', 'admin']) ||\n    context.user.id === id\n  ) {\n    const errors = []\n\n    if (!id) {\n      errors.push('id manquante')\n    }\n\n    if (!motDePasse) {\n      errors.push('mot de passe manquant')\n    }\n\n    if (!motDePasseNouveau1) {\n      errors.push('nouveau mot de passe manquant')\n    } else if (motDePasseNouveau1.length < 8) {\n      errors.push('le mot de passe doit contenir au moins 8 caractères')\n    }\n\n    if (!motDePasseNouveau2) {\n      errors.push('vérification du nouveau mot de passe manquante')\n    }\n\n    if (motDePasseNouveau1 !== motDePasseNouveau2) {\n      errors.push('le nouveau mot de passe et la vérification sont différents')\n    }\n\n    if (id && motDePasse) {\n      const utilisateur = await utilisateurGet(id)\n\n      if (utilisateur) {\n        const valid = await bcrypt.compare(motDePasse, utilisateur.motDePasse)\n\n        if (!valid) {\n          errors.push('mot de passe incorrect')\n        }\n      } else {\n        errors.push('aucun utilisateur enregistré avec cette id')\n      }\n    }\n\n    if (!errors.length) {\n      const res = await utilisateurUpdate({\n        id,\n        motDePasse: await bcrypt.hash(motDePasseNouveau1, 10)\n      })\n\n      return res\n    } else {\n      throw new Error(errors.join(', '))\n    }\n  } else {\n    throw new Error(\"droits insuffisants pour effectuer l'opération\")\n  }\n}\n\nconst utilisateurMotDePasseEmailEnvoyer = async ({ email }, context) => {\n  const errors = []\n  let utilisateur\n  const emailIsValid = emailRegex({ exact: true }).test(email)\n\n  if (!email) {\n    errors.push('email manquant')\n  } else if (!emailIsValid) {\n    errors.push('adresse email invalide')\n  } else {\n    utilisateur = await utilisateurByEmailGet(email)\n\n    if (!utilisateur) {\n      errors.push('aucun utilisateur enregistré avec cette adresse email')\n    }\n  }\n\n  if (!errors.length) {\n    const token = jwt.sign({ id: utilisateur.id }, process.env.JWT_SECRET)\n\n    const url = `${\n      process.env.UI_URL\n    }/mot-de-passe?token=${token}&email=${email}`\n\n    const subject = `[Camino] Initialisation de votre mot de passe`\n    const html = `<p>Pour initialiser votre mot de passe, <a href=\"${url}\">cliquez ici</a> (lien valable 15 minutes).</p>`\n\n    try {\n      mailer(email, subject, html)\n    } catch (e) {\n      return \"erreur lors de l'envoi d'email\"\n    }\n\n    return 'email envoyé'\n  } else {\n    throw new Error(errors.join(', '))\n  }\n}\n\nconst utilisateurMotDePasseInitialiser = async (\n  { motDePasse1, motDePasse2 },\n  context\n) => {\n  const errors = []\n  const now = Math.round(new Date().getTime() / 1000)\n  const delay = 60 * 15 // 15 minutes\n\n  if (now - context.user.iat > delay) {\n    errors.push('délai expiré')\n  } else {\n    if (!motDePasse1) {\n      errors.push('nouveau mot de passe manquant')\n    } else if (motDePasse1.length < 8) {\n      errors.push('le mot de passe doit contenir au moins 8 caractères')\n    }\n\n    if (!motDePasse2) {\n      errors.push('vérification du nouveau mot de passe manquante')\n    }\n\n    if (motDePasse1 !== motDePasse2) {\n      errors.push('le nouveau mot de passe et la vérification sont différents')\n    }\n\n    if (context.user.id) {\n      const utilisateur = await utilisateurGet(context.user.id)\n\n      if (!utilisateur) {\n        errors.push('aucun utilisateur enregistré avec cette id')\n      }\n    }\n  }\n\n  if (!errors.length) {\n    const res = await utilisateurUpdate({\n      id: context.user.id,\n      motDePasse: await bcrypt.hash(motDePasse1, 10)\n    })\n\n    return 'mot de passe mis à jour'\n  } else {\n    throw new Error(errors.join(', '))\n  }\n}\n\nconst tokenCreate = (id, email, permission) =>\n  jwt.sign(\n    {\n      id,\n      email,\n      permission\n    },\n    process.env.JWT_SECRET\n  )\n\nexport {\n  utilisateur,\n  utilisateurs,\n  utilisateurIdentifier,\n  utilisateurConnecter,\n  utilisateurAjouter,\n  utilisateurAjoutEmailEnvoyer,\n  utilisateurModifier,\n  utilisateurSupprimer,\n  utilisateurMotDePasseModifier,\n  utilisateurMotDePasseEmailEnvoyer,\n  utilisateurMotDePasseInitialiser\n}\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/api/resolvers/utilisateurs.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 83,
    "kind": "variable",
    "name": "permissionsVisibleForAdmin",
    "memberof": "src/api/resolvers/utilisateurs.js",
    "static": true,
    "longname": "src/api/resolvers/utilisateurs.js~permissionsVisibleForAdmin",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/api/resolvers/utilisateurs.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 18,
    "undocument": true,
    "type": {
      "types": [
        "string[]"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 84,
    "kind": "function",
    "name": "utilisateurErreurs",
    "memberof": "src/api/resolvers/utilisateurs.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/api/resolvers/utilisateurs.js~utilisateurErreurs",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/api/resolvers/utilisateurs.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 26,
    "undocument": true,
    "params": [
      {
        "name": "utilisateur",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 85,
    "kind": "function",
    "name": "userIdGenerate",
    "memberof": "src/api/resolvers/utilisateurs.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/api/resolvers/utilisateurs.js~userIdGenerate",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/api/resolvers/utilisateurs.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 46,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 86,
    "kind": "function",
    "name": "tokenCreate",
    "memberof": "src/api/resolvers/utilisateurs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/api/resolvers/utilisateurs.js~tokenCreate",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/api/resolvers/utilisateurs.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 454,
    "undocument": true,
    "params": [
      {
        "name": "id",
        "types": [
          "*"
        ]
      },
      {
        "name": "email",
        "types": [
          "*"
        ]
      },
      {
        "name": "permission",
        "types": [
          "*"
        ]
      }
    ],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 87,
    "kind": "function",
    "name": "utilisateur",
    "memberof": "src/api/resolvers/utilisateurs.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/api/resolvers/utilisateurs.js~utilisateur",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/api/resolvers/utilisateurs.js",
    "importStyle": "{utilisateur}",
    "description": null,
    "lineNumber": 56,
    "undocument": true,
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"id\": *}"
        ],
        "defaultRaw": {
          "id": null
        },
        "defaultValue": "{\"id\":null}"
      },
      {
        "name": "context",
        "types": [
          "*"
        ]
      },
      {
        "name": "info",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 88,
    "kind": "function",
    "name": "utilisateurs",
    "memberof": "src/api/resolvers/utilisateurs.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/api/resolvers/utilisateurs.js~utilisateurs",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/api/resolvers/utilisateurs.js",
    "importStyle": "{utilisateurs}",
    "description": null,
    "lineNumber": 75,
    "undocument": true,
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"entrepriseIds\": *, \"administrationIds\": *, \"permissionIds\": *, \"noms\": *}"
        ],
        "defaultRaw": {
          "entrepriseIds": null,
          "administrationIds": null,
          "permissionIds": null,
          "noms": null
        },
        "defaultValue": "{\"entrepriseIds\":null,\"administrationIds\":null,\"permissionIds\":null,\"noms\":null}"
      },
      {
        "name": "context",
        "types": [
          "*"
        ]
      },
      {
        "name": "info",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 89,
    "kind": "function",
    "name": "utilisateurIdentifier",
    "memberof": "src/api/resolvers/utilisateurs.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/api/resolvers/utilisateurs.js~utilisateurIdentifier",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/api/resolvers/utilisateurs.js",
    "importStyle": "{utilisateurIdentifier}",
    "description": null,
    "lineNumber": 103,
    "undocument": true,
    "params": [
      {
        "name": "variables",
        "types": [
          "*"
        ]
      },
      {
        "name": "context",
        "types": [
          "*"
        ]
      },
      {
        "name": "info",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "{\"token\": *, \"utilisateur\": *}"
      ]
    }
  },
  {
    "__docId__": 90,
    "kind": "function",
    "name": "utilisateurConnecter",
    "memberof": "src/api/resolvers/utilisateurs.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/api/resolvers/utilisateurs.js~utilisateurConnecter",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/api/resolvers/utilisateurs.js",
    "importStyle": "{utilisateurConnecter}",
    "description": null,
    "lineNumber": 118,
    "undocument": true,
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"email\": *, \"motDePasse\": *}"
        ],
        "defaultRaw": {
          "email": null,
          "motDePasse": null
        },
        "defaultValue": "{\"email\":null,\"motDePasse\":null}"
      },
      {
        "name": "context",
        "types": [
          "*"
        ]
      },
      {
        "name": "info",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "{\"token\": *, \"utilisateur\": *}"
      ]
    }
  },
  {
    "__docId__": 91,
    "kind": "function",
    "name": "utilisateurAjouter",
    "memberof": "src/api/resolvers/utilisateurs.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/api/resolvers/utilisateurs.js~utilisateurAjouter",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/api/resolvers/utilisateurs.js",
    "importStyle": "{utilisateurAjouter}",
    "description": null,
    "lineNumber": 163,
    "undocument": true,
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"utilisateur\": *}"
        ],
        "defaultRaw": {
          "utilisateur": null
        },
        "defaultValue": "{\"utilisateur\":null}"
      },
      {
        "name": "context",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 92,
    "kind": "function",
    "name": "utilisateurAjoutEmailEnvoyer",
    "memberof": "src/api/resolvers/utilisateurs.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/api/resolvers/utilisateurs.js~utilisateurAjoutEmailEnvoyer",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/api/resolvers/utilisateurs.js",
    "importStyle": "{utilisateurAjoutEmailEnvoyer}",
    "description": null,
    "lineNumber": 219,
    "undocument": true,
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"email\": *}"
        ],
        "defaultRaw": {
          "email": null
        },
        "defaultValue": "{\"email\":null}"
      },
      {
        "name": "context",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 93,
    "kind": "function",
    "name": "utilisateurModifier",
    "memberof": "src/api/resolvers/utilisateurs.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/api/resolvers/utilisateurs.js~utilisateurModifier",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/api/resolvers/utilisateurs.js",
    "importStyle": "{utilisateurModifier}",
    "description": null,
    "lineNumber": 260,
    "undocument": true,
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"utilisateur\": *}"
        ],
        "defaultRaw": {
          "utilisateur": null
        },
        "defaultValue": "{\"utilisateur\":null}"
      },
      {
        "name": "context",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 94,
    "kind": "function",
    "name": "utilisateurSupprimer",
    "memberof": "src/api/resolvers/utilisateurs.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/api/resolvers/utilisateurs.js~utilisateurSupprimer",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/api/resolvers/utilisateurs.js",
    "importStyle": "{utilisateurSupprimer}",
    "description": null,
    "lineNumber": 284,
    "undocument": true,
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"id\": *}"
        ],
        "defaultRaw": {
          "id": null
        },
        "defaultValue": "{\"id\":null}"
      },
      {
        "name": "context",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 95,
    "kind": "function",
    "name": "utilisateurMotDePasseModifier",
    "memberof": "src/api/resolvers/utilisateurs.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/api/resolvers/utilisateurs.js~utilisateurMotDePasseModifier",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/api/resolvers/utilisateurs.js",
    "importStyle": "{utilisateurMotDePasseModifier}",
    "description": null,
    "lineNumber": 308,
    "undocument": true,
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"id\": *, \"motDePasse\": *, \"motDePasseNouveau1\": *, \"motDePasseNouveau2\": *}"
        ],
        "defaultRaw": {
          "id": null,
          "motDePasse": null,
          "motDePasseNouveau1": null,
          "motDePasseNouveau2": null
        },
        "defaultValue": "{\"id\":null,\"motDePasse\":null,\"motDePasseNouveau1\":null,\"motDePasseNouveau2\":null}"
      },
      {
        "name": "context",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 96,
    "kind": "function",
    "name": "utilisateurMotDePasseEmailEnvoyer",
    "memberof": "src/api/resolvers/utilisateurs.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/api/resolvers/utilisateurs.js~utilisateurMotDePasseEmailEnvoyer",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/api/resolvers/utilisateurs.js",
    "importStyle": "{utilisateurMotDePasseEmailEnvoyer}",
    "description": null,
    "lineNumber": 369,
    "undocument": true,
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"email\": *}"
        ],
        "defaultRaw": {
          "email": null
        },
        "defaultValue": "{\"email\":null}"
      },
      {
        "name": "context",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 97,
    "kind": "function",
    "name": "utilisateurMotDePasseInitialiser",
    "memberof": "src/api/resolvers/utilisateurs.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/api/resolvers/utilisateurs.js~utilisateurMotDePasseInitialiser",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/api/resolvers/utilisateurs.js",
    "importStyle": "{utilisateurMotDePasseInitialiser}",
    "description": null,
    "lineNumber": 408,
    "undocument": true,
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"motDePasse1\": *, \"motDePasse2\": *}"
        ],
        "defaultRaw": {
          "motDePasse1": null,
          "motDePasse2": null
        },
        "defaultValue": "{\"motDePasse1\":null,\"motDePasse2\":null}"
      },
      {
        "name": "context",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 98,
    "kind": "file",
    "name": "src/api/resolvers/version.js",
    "content": "const npmPackage = require('../../../package.json')\n\nconst version = (variables, context, info) => {\n  return npmPackage.version\n}\n\nexport { version }\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/api/resolvers/version.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 99,
    "kind": "variable",
    "name": "npmPackage",
    "memberof": "src/api/resolvers/version.js",
    "static": true,
    "longname": "src/api/resolvers/version.js~npmPackage",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/api/resolvers/version.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 1,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 100,
    "kind": "function",
    "name": "version",
    "memberof": "src/api/resolvers/version.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/api/resolvers/version.js~version",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/api/resolvers/version.js",
    "importStyle": "{version}",
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "params": [
      {
        "name": "variables",
        "types": [
          "*"
        ]
      },
      {
        "name": "context",
        "types": [
          "*"
        ]
      },
      {
        "name": "info",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 101,
    "kind": "file",
    "name": "src/api/resolvers.js",
    "content": "import { GraphQLDate } from 'graphql-iso-date'\n\nimport Json from './types/json'\n\nimport {\n  titre,\n  titres,\n  titreAjouter,\n  titreSupprimer,\n  titreModifier,\n  titreEtapeModifier\n} from './resolvers/titres'\n\nimport {\n  utilisateur,\n  utilisateurs,\n  utilisateurIdentifier,\n  utilisateurConnecter,\n  utilisateurAjouter,\n  utilisateurAjoutEmailEnvoyer,\n  utilisateurModifier,\n  utilisateurSupprimer,\n  utilisateurMotDePasseModifier,\n  utilisateurMotDePasseEmailEnvoyer,\n  utilisateurMotDePasseInitialiser\n} from './resolvers/utilisateurs'\n\nimport { version } from './resolvers/version'\nimport { metas } from './resolvers/metas'\nimport { substance, substances } from './resolvers/substances'\nimport { permissions } from './resolvers/permissions'\nimport { entreprise, entreprises } from './resolvers/entreprises'\nimport { titreTravauxRapportModifier } from './resolvers/titres-travaux'\n\nexport default {\n  //  types\n  Json,\n  GraphQLDate,\n  //  queries\n  version,\n  titre,\n  titres,\n  substance,\n  substances,\n  metas,\n  utilisateurIdentifier,\n  entreprise,\n  entreprises,\n  utilisateur,\n  utilisateurs,\n  permissions,\n  // mutations\n  titreAjouter,\n  titreModifier,\n  titreSupprimer,\n  titreEtapeModifier,\n  titreTravauxRapportModifier,\n  utilisateurConnecter,\n  utilisateurModifier,\n  utilisateurAjouter,\n  utilisateurSupprimer,\n  utilisateurMotDePasseModifier,\n  utilisateurMotDePasseInitialiser,\n  utilisateurMotDePasseEmailEnvoyer,\n  utilisateurAjoutEmailEnvoyer\n}\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/api/resolvers.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 102,
    "kind": "file",
    "name": "src/api/schemas/administrations.js",
    "content": "export default `\ntype Administration {\n  id: ID!\n  nom: String\n  service: String\n  url: String\n  email: String\n  telephone: String\n  adresse1: String\n  adresse2: String\n  codePostal: Int\n  ville: String\n  cedex: Int\n  utilisateurs: [Utilisateur]\n}\n\ninput InputAdministration {\n  id: ID!\n  nom: String\n  service: String\n  url: String\n  email: String\n  telephone: String\n  adresse1: String\n  adresse2: String\n  codePostal: Int\n  ville: String\n  cedex: Int\n}`\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/api/schemas/administrations.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 103,
    "kind": "file",
    "name": "src/api/schemas/entreprises.js",
    "content": "export default `\ntype Entreprise {\n  id: ID!\n  nom: String\n  raisonSociale: String\n  paysId: String\n  legalSiren: String\n  legalEtranger: String\n  legalForme: String\n  voieNumero: String\n  voieType: String\n  voieNom: String\n  adresseComplement: String\n  codePostal: Int\n  ville: String\n  cedex: Int\n  url: String\n  telephone: String\n  email: String\n  utilisateurs: [Utilisateur]\n}\n\ninput InputEntreprise {\n  id: ID!\n  nom: String\n  raisonSociale: String\n  paysId: String\n  legalSiren: String\n  legalEtranger: String\n  legalForme: String\n  voieNumero: String\n  voieType: String\n  voieNom: String\n  adresseComplement: String\n  codePostal: Int\n  ville: String\n  cedex: Int\n  url: String\n  telephone: String\n  email: String\n  utilisateurs: [InputUtilisateur]\n}`\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/api/schemas/entreprises.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 104,
    "kind": "file",
    "name": "src/api/schemas/geojsons.js",
    "content": "export default `\ntype GeojsonMultiPolygons {\n  type: FeatureCollectionType!\n  features: [GeojsonMultiPolygon]\n}\n\ntype GeojsonMultiPolygon {\n  type: FeatureType!\n  properties: Titre\n  geometry: GeometryMultiPolygon!\n}\n\ntype GeometryMultiPolygon {\n  type: GeometryTypeMultipolygon!\n  coordinates: [[[[Float]]]]\n}\n\ntype GeojsonPoints {\n  type: FeatureCollectionType!\n  features: [FeaturePoint]\n}\n\ntype FeaturePoint {\n  type: FeatureType!\n  geometry: GeometryPoints!\n  properites: FeaturePointProperties\n}\n\ntype FeaturePointProperties {\n  groupe: Int\n  contour: Int\n  point: Int\n  nom: String\n  description: String\n}\n\ntype GeometryPoints {\n  type: GeometryTypePoint!\n  coordinates: [Float]\n}\n\ninput InputGeojson {\n  type: FeatureCollectionType!\n  feature: [InputFeature]\n}\n\ninput InputFeature {\n  type: FeatureType!\n  geometry: InputGeometry!\n}\n\ninput InputGeometry {\n  type: GeometryType\n  coordinates: Json\n}\n\nenum FeatureCollectionType {\n  FeatureCollection\n}\n\nenum FeatureType {\n  Feature\n}\n\nenum GeometryType {\n  MultiPolygon\n  Point\n}\n\nenum GeometryTypeMultipolygon {\n  MultiPolygon\n}\n\nenum GeometryTypePoint {\n  Point\n}`\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/api/schemas/geojsons.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 105,
    "kind": "file",
    "name": "src/api/schemas/index.js",
    "content": "export default `\n\"\"\"\n# Requêtes en lecture (_Query_)\n\n- [Comment tester l'API Camino ?](https://github.com/MTES-MCT/camino-api/tree/master/docs/graphql)\n- [Documentation offcielle de GraphQL](https://graphql.org/)\n\n_Query_ un type _racine_ (_root_) de GraphQL.\n\nCertaines requêtes sont __publiques__.\n\nCertaines requêtes sont __protégées__ et nécessitent une authentification par token (jwt). Elles sont signalées par une étoile __*__.\n\nEnfin, certaines requêtes sont __semi-publiques__ et retournent un résultat plus ou moins riche selon le niveau de permission de l'utilisateur authentifié. Elles sont signalées par un plus __+__.\n\"\"\"\ntype Query {\n  \"Retourne la version de l'API\"\n  version: String\n\n  \"Retourne les meta-informations sur les titres miniers (types, domaines, statuts)\"\n  metas: Metas\n\n  \"__+__ Retourne un titre minier en fonction de son id\"\n  titre(id: ID!): Titre\n\n  \"__+__ Retourne une liste de titres miniers, en fonction d'arguments (optionels)\"\n  titres(\n    typeIds: [TypeId]\n    domaineIds: [DomaineId]\n    statutIds: [StatutId]\n    substances: [String]\n    noms: [String]\n    entreprises: [String]\n    references: [String]\n  ): [Titre]\n\n  \"__*__ Retourne un utilisateur en fonction de son id\"\n  utilisateur(id: ID!): Utilisateur\n\n  \"__*__ Retourne une liste d'utilisateurs en fonction d'arguments (optionels)\"\n  utilisateurs(\n    entrepriseIds: [ID]\n    administrationIds: [ID]\n    permissionIds: [ID]\n    noms: [String]\n  ): [Utilisateur]\n\n  \"Retourne une substance en fonction de son id\"\n  substance(id: String!): Substance\n\n  \"Retourne la liste des substances\"\n  substances: [Substance]\n\n  \"__*__ Retourne un utilisateur et son token en fonction du token\"\n  utilisateurIdentifier: UtilisateurToken\n\n  \"__+__ Retourne la liste des permissions utilisateurs\"\n  permissions: [Permission]\n\n  \"__*__ Retourne une entreprise en fonction de son id\"\n  entreprise(id: String!): Entreprise\n\n  \"__*__ Retourne la liste des entreprises\"\n  entreprises: [Entreprise]\n}\n\n\"\"\"\n# Requêtes en écriture (_Mutation_)\n\n- [Comment tester l'API Camino ?](https://github.com/MTES-MCT/camino-api/tree/master/docs/graphql)\n- [Documentation offcielle de GraphQL](https://graphql.org/)\n\n_Mutation_ un type natif de GraphQL.\n\nCes requêtes sont __protégées__. Elles nécessitent une authentification par token (jwt) et un niveau de permission suffisant. Elle sont signalées par une étoile __*__.\n\"\"\"\ntype Mutation {\n  \"__*__ Modifie une étape de titre minier\"\n  titreEtapeModifier(etape: InputEtape): Etape\n\n  \"__*__ Connecte l'utilisateur en fonction de ses identifiants\"\n  utilisateurConnecter(email: String!, motDePasse: String!): UtilisateurToken\n\n  \"__*__ Ajoute un utilisateur\"\n  utilisateurAjouter(utilisateur: InputUtilisateurAjouter!): Utilisateur\n\n  \"__*__ Modifie un utilisateur\"\n  utilisateurModifier(utilisateur: InputUtilisateur!): Utilisateur\n\n  \"__*__ Supprime un utilisateur\"\n  utilisateurSupprimer(id: ID!): Utilisateur\n\n  \"__*__ Modifie le mot de passe d'un utilisateur\"\n  utilisateurMotDePasseModifier(\n    id: ID!\n    motDePasse: String!\n    motDePasseNouveau1: String!\n    motDePasseNouveau2: String!\n  ): Utilisateur\n\n  \"__*__ Envoie un email à un utilisateur contenant une url pour modifier son mot de passe\"\n  utilisateurMotDePasseEmailEnvoyer(email: String!): String\n\n  \"__*__ Envoie un email à un utilisateur contenant une url pour créer son compte\"\n  utilisateurAjoutEmailEnvoyer(email: String!): String\n\n  \"__*__ Initialise un mot de passe utilisateur\"\n  utilisateurMotDePasseInitialiser(\n    motDePasse1: String!\n    motDePasse2: String!\n  ): String\n\n  \"__*__ Créé ou modifie un rapport de travaux\"\n  titreTravauxRapportModifier(\n    rapport: InputTitreTravauxRapport!\n  ): TitreTravauxRapport\n}\n\nscalar Json\n\nscalar Date\n`\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/api/schemas/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 106,
    "kind": "file",
    "name": "src/api/schemas/metas.js",
    "content": "export default `\n\"\"\"\nMeta-informations sur les titres miniers (types, domaines, statuts)\n\"\"\"\ntype Metas {\n  \"Les types de titres miniers (ex: permis exclusif de recherches, autorisation d'exploitation, etc.)\"\n  types: [Type]\n  \"Les domaines miniers (ex: substances énergétiques, minéraux et métaux, etc.)\"\n  domaines: [Domaine]\n  \"Les statuts des titres miniers (ex: valide, demande initiale, etc.)\"\n  statuts: [Statut]\n  \"La liste des types de démarches\"\n  demarchesTypes: [DemarcheType]\n}\n\n\"Le type de titre minier\"\ntype Type {\n  \"L'id composée de trois lettres\"\n  id: TypeId!\n  \"Le nom du type en français\"\n  nom: String!\n}\n\n\"Le domaine minier\"\ntype Domaine {\n  \"L'id composée d'une seule lettre\"\n  id: DomaineId!\n  \"Le nom du domaine en français\"\n  nom: String!\n}\n\n\"Le domaine minier\"\ninput InputDomaineId {\n  \"L'id composée d'une seule lettre\"\n  id: DomaineId!\n  \"Le nom du domaine en français\"\n  nom: String\n}\n\n\"Le statut d'un titre minier\"\ntype Statut {\n  \"L'id composée de trois lettres\"\n  id: StatutId!\n  \"Le nom du statut en français\"\n  nom: String!\n  \"La couleur associé au statut\"\n  couleur: Couleur!\n}\n\n\"Le type de démarche applicable à un titre minier\"\ntype DemarcheType {\n  \"L'id composée de trois lettres\"\n  id: ID!\n  \"Le nom en français\"\n  nom: String!\n  \"L'ordre de ce type de démarche\"\n  ordre: Int\n  \"Si la démarche contient une information de duréee\"\n  duree: Boolean\n  \"Si la démarche contient des informations géographiques\"\n  points: Boolean\n  \"Si la démarche contient des informations de substances\"\n  substances: Boolean\n  \"Si la démarche contient des titulaires\"\n  titulaires: Boolean\n  \"Si la démarche est renouvelable\"\n  renouvelable: Boolean\n  exception: Boolean\n  \"Les types d'étapes applicables à ce type de démarche\"\n  etapesTypes: [EtapeType]\n}\n\n\"Le statut d'une démarche applicable à un titre minier\"\ntype DemarcheStatut {\n  \"L'id composée de trois lettres\"\n  id: DemarcheStatutId!\n  \"Le nom en français\"\n  nom: String!\n  couleur: Couleur!\n}\n\n\"Le statut d'une phase de titre minier\"\ntype PhaseStatut {\n  \"Le statut d'une phase de titre minier est composé de trois lettres\"\n  id: PhaseStatutId!\n  \"Le nom d'une phase de titre minier en français\"\n  nom: String!\n  couleur: Couleur!\n}\n\n\"Le type d'étape d'une démarche de titre minier\"\ntype EtapeType {\n  \"L'id composée de trois lettres\"\n  id: ID!\n  \"Le nom en français\"\n  nom: String!\n  acceptationAuto: Boolean\n  ordre: Int!\n  typeId: TypeId\n  etapesStatuts: [EtapeStatut]\n}\n\ntype DemarcheType_etapeType {\n  typeId: ID!\n  demarcheTypeId: ID!\n  etapeTypeId: ID!\n  ordre: Int!\n}\n\n\"Le type d'étape d'une démarche de titre minier\"\ninput InputEtapeTypeId {\n  \"L'id composée de trois lettres\"\n  id: ID!\n  \"Le nom du domaine en français\"\n  nom: String\n  acceptationAuto: Boolean\n}\n\n\"Le statut d'une étape de démarche de titre minier\"\ntype EtapeStatut {\n  \"L'id du statut d'étape est composé de trois lettres\"\n  id: EtapeStatutId!\n  \"Le nom du domaine en français\"\n  nom: String!\n  couleur: Couleur!\n}\n\n\"Le statut d'une étape de démarche de titre minier\"\ninput InputEtapeStatutId {\n  \"L'id composée de trois lettres\"\n  id: EtapeStatutId!\n  \"Le nom en français\"\n  nom: String\n  couleur: Couleur\n}\n\n\"L'emprise géographique d'un titre minier\"\ntype Emprise {\n  \"L'id composée de trois lettres\"\n  id: EmpriseId!\n  \"Le nom en français\"\n  nom: String!\n}\n\n\"L'emprise géographique d'un titre minier\"\ninput InputEmpriseId {\n  \"L'id composée de trois lettres\"\n  id: EmpriseId!\n  \"Le nom en français\"\n  nom: String\n}\n\n\"\"\"\nL'id du type de titre minier\n\n- __apx__: Autorisation de prospections préalables (M, H, C)\n- __arc__: Autorisation de recherches (C)\n- __arg__: Autorisation de recherches (G)\n- __axm__: Autorisation d'exploitation (M)\n- __cxx__: Concession (M, H, G, S, C)\n- __prh__: Permis exclusif de recherches (H)\n- __prx__: Permis exclusif de recherches (M, G, S, C)\n- __pxc__: Permis exclusif de carrières (C)\n- __pxg__: Permis d'exploitation (G)\n- __pxh__: Permis d'exploitation (H)\n- __pxm__: Permis d'exploitation (M)\n\"\"\"\nenum TypeId {\n  apx\n  arc\n  arg\n  axm\n  cxx\n  prh\n  prx\n  pxc\n  pxg\n  pxh\n  pxm\n  pxx\n}\n\n\"\"\"\nL'id du domaine minier\n\n- __c__: Carrières\n- __f__: Combustibles fossiles\n- __g__: Géothermie\n- __h__: Substances énergétiques\n- __m__: Minéraux et métaux\n- __r__: Eléments radioactifs\n- __s__: Stockage\n- __w__: Granulats marins\n\"\"\"\nenum DomaineId {\n  c\n  f\n  g\n  h\n  m\n  r\n  s\n  w\n}\n\n\"\"\"\nL'id du statut d'un titre minier\n\n- __dmc__: Demande classée\n- __dmi__: Demande initiale\n- __ech__: Échu\n- __ind__: Indéterminé\n- __mod__: Modification en instance\n- __val__: Valide\n\"\"\"\nenum StatutId {\n  dmc\n  dmi\n  ech\n  ind\n  mod\n  val\n}\n\n\"\"\"\nL'id de l'emprise géographique d'un titre minier\n\n- __ter__: À terre\n- __mer__: En mer\n\"\"\"\nenum EmpriseId {\n  ter\n  mer\n}\n\n\"\"\"\nL'id du statut d'une démarche de titre minier\n\n- __acc__: Acceptée\n- __cls__: Classée sans suite\n- __dep__: Déposée\n- __eco__: En construction\n- __ind__: Indeterminé\n- __ini__: Initiée\n- __ins__: En instruction\n- __rej__: Rejetée\n- __ret__: Retirée\n- __ter__: Terminée\n\"\"\"\nenum DemarcheStatutId {\n  acc\n  cls\n  dep\n  eco\n  ind\n  ini\n  ins\n  rej\n  ret\n  ter\n}\n\n\"\"\"\nL'id du statut d'une phase de titre minier\n\n- __val__: Valide\n- __ech__: Échu\n\"\"\"\nenum PhaseStatutId {\n  val\n  ech\n}\n\n\"\"\"\nL'id du statut d'une étape de démarche de titre minier\n\n- __acc__: Acceptation\n- __def__: Défavorable\n- __dre__: Défavorable avec réserves\n- __fav__: Favorable\n- __fre__: Favorable avec réserves\n- __nul__: Non applicable\n- __rej__: Rejet\n- __nfa__: Non fait\n- __fai__: Fait\n\"\"\"\nenum EtapeStatutId {\n  acc\n  def\n  dre\n  fav\n  fre\n  nul\n  rej\n  nfa\n  fai\n}\n\n\"\"\"\nUne liste de couleurs génériques\n\"\"\"\nenum Couleur {\n  error\n  info\n  neutral\n  success\n  warning\n}\n\n\"Le type de titre minier\"\ninput InputType {\n  id: TypeId!\n}\n\n\"Le domaine minier\"\ninput InputDomaine {\n  id: DomaineId!\n}\n\n\"Le type de démarche d'un titre minier\"\ninput InputDemarcheTypeId {\n  id: ID!\n}\n`\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/api/schemas/metas.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 107,
    "kind": "file",
    "name": "src/api/schemas/substances.js",
    "content": "export default `\ntype Substance {\n  id: ID!\n  nom: String!\n  symbole: String\n  gerep: Int\n  description: String\n  legales: [SubstanceLegale!]!\n}\n\ntype TitreSubstance {\n  id: ID!\n  nom: String!\n  symbole: String\n  gerep: Int\n  description: String\n  legales: [SubstanceLegale!]!\n  connexe: Boolean\n  ordre: Int\n}\n\ntype SubstanceLegale {\n  id: ID!\n  nom: String!\n  domaine: Domaine\n  description: String\n  code: SubstanceLegaleCode!\n}\n\ntype SubstanceLegaleCode {\n  id: ID!\n  nom: String!\n  description: String\n  lien: String!\n}\n\ninput InputEtapeSubstanceId {\n  id: ID!\n  nom: String\n  symbole: String\n  connexe: String\n  gerep: Int\n  ordre: Int\n  description: String\n  legales: [InputSubstanceLegaleId]\n}\n\ninput InputSubstanceLegaleId {\n  id: ID!\n  nom: String\n  domaine: InputDomaineId\n  description: String\n  code: InputSubstanceLegaleCodeId\n}\n\ninput InputSubstanceLegaleCodeId {\n  id: ID!\n  nom: String\n  description: String\n  lien: String\n}`\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/api/schemas/substances.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 108,
    "kind": "file",
    "name": "src/api/schemas/titres-travaux.js",
    "content": "export default `\ntype TitreTravauxRapport {\n  id: ID!\n  titreId: ID!\n  date: Date!\n  confirmation: Boolean\n  contenu: Json\n}\n\ninput InputTitreTravauxRapport {\n  id: ID!\n  titreId: ID!\n  date: Date!\n  confirmation: Boolean\n  contenu: Json\n}`\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/api/schemas/titres-travaux.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 109,
    "kind": "file",
    "name": "src/api/schemas/titres.js",
    "content": "export default `\n\"Titre minier\"\ntype Titre {\n  \"\"\"\n  L'__id__ composée de la concaténation:\n  - du type en 3 lettres\n  - du slug du nom du titre\n  - de l'année d'octroi\n  \"\"\"\n  id: ID!\n  \"Le nom du titre\"\n  nom: String!\n  \"Le type du titre\"\n  type: Type!\n  \"Le domaine minier auquel se rattache le titre\"\n  domaine: Domaine!\n  \"Les références métier du titre\"\n  references: [Reference]\n  \"Le statut du titre\"\n  statut: Statut!\n  \"Les substances concernées par le titre dans son dernier état de validité\"\n  substances: [TitreSubstance]\n  \"Les coordonnées des points du périmètre géographique du titre dans son dernier état de validité\"\n  points: [Point]\n  \"Le geojson du contour du périmètre géographique du titre dans son dernier état de validité\"\n  geojsonMultiPolygon: GeojsonMultiPolygon\n  \"Le geojson de la liste de points du périmètre géographique du titre dans son dernier état de validité\"\n  geojsonPoints: GeojsonPoints\n  \"Les titualires du titre dans son dernier état de validité\"\n  titulaires: [Entreprise]\n  \"Les amodiataires du titre dans son dernier état de validité\"\n  amodiataires: [Entreprise]\n  \"Les administrations en charge du titre dans son dernier état de validité\"\n  administrations: [Administration]\n  \"Les démarches effectuées sur le titre\"\n  demarches: [Demarche]\n  \"La surface en Km² du titre dans son dernier état de validité\"\n  surface: Float\n  \"Le volume du titre dans son dernier état de validité\"\n  volume: Float\n  \"L'unité du volume du titre dans son dernier état de validité\"\n  volumeUnite: String\n  \"Les rapports de travaux\"\n  travauxRapports: [TitreTravauxRapport]\n}\n\n\"Références métier d'un titre minier\"\ntype Reference {\n  \"Le type est une chaine de caractère qui défini le référentiel (par exemple: DEB, DGEC, etc.\"\n  type: String\n  \"La référence du titre dans le référentiel\"\n  valeur: String!\n}\n\n\"Démarches effectuées sur un titre minier\"\ntype Demarche {\n  \"\"\"\n  L'__id__ composée de la concaténation:\n  - de l'id du titre\n  - du type de la démarche\n  \"\"\"\n  id: ID!\n  \"Le type de la démarche composé de trois lettres\"\n  type: DemarcheType!\n  \"L'ordre chronologique de la démarche\"\n  ordre: Int!\n  \"Le statut de la démarche\"\n  statut: DemarcheStatut!\n  \"La phase, si la démarche donne lieu à une phase\"\n  phase: Phase\n  \"Les étapes effectuées sur la démarche\"\n  etapes: [Etape]\n}\n\n\"Phase d'un titre minier\"\ntype Phase {\n  \"Le statut d'une phase\"\n  statut: PhaseStatut!\n  \"La date de début d'une phase\"\n  dateDebut: Date\n  \"La date de fin d'une phase\"\n  dateFin: Date\n}\n\n\"Étape d'une démarche effectuée sur un titre minier\"\ntype Etape {\n  \"\"\"\n  L'__id__ composée de la concaténation:\n  - de l'id de la démarche\n  - du type de l'étape\n  \"\"\"\n  id: ID!\n  \"Le type de l'étape\"\n  type: EtapeType!\n  \"Le statut de l'étape\"\n  statut: EtapeStatut!\n  \"L'ordre chronologique de l'étape\"\n  ordre: Int!\n  \"La date de l'étape\"\n  date: Date!\n  \"La durée de la démarche\"\n  duree: Int\n  \"La date de début de la démarche\"\n  dateDebut: Date\n  \"La date de fin de la démarche\"\n  dateFin: Date\n  \"La surface en Km² du titre\"\n  surface: Float\n  \"Le volume du titre\"\n  volume: Float\n  \"L'unité de volume du titre\"\n  volumeUnite: String\n  \"Les visas de l'étape\"\n  visas: [String]\n  \"Le montant de l'engagement financier du titulaire\"\n  engagement: Float\n  \"La devise de l'engagement financier du titulaire\"\n  engagementDevise: String\n  \"L'emprise géographique du titre\"\n  emprises: [Emprise]\n  \"Les substances concernées par le titre\"\n  substances: [TitreSubstance]\n  \"Les coordonnées des points du périmètre géographique du titre\"\n  points: [Point]\n  \"Le geojson du contour du périmètre géographique du titre\"\n  geojsonMultiPolygon: GeojsonMultiPolygon\n  \"Le geojson de la liste de points du périmètre géographique du titre\"\n  geojsonPoints: GeojsonPoints\n  \"Les titualires du titre dans son dernier état de validité\"\n  titulaires: [Entreprise]\n  \"Les amodiataires du titre dans son dernier état de validité\"\n  amodiataires: [Entreprise]\n  \"Les administrations en charge du titre\"\n  administrations: [Administration]\n  \"Les documents relatifs à l'étape\"\n  documents: [Document]\n  sourceIndisponible: Boolean\n}\n\n\"Document attaché à une étape de démarche\"\ntype Document {\n  \"\"\"\n  L'__id__ composée de la concaténation:\n  - de l'id de l'étape\n  - du type du document\n  \"\"\"\n  id: ID!\n  \"Le nom du document\"\n  nom: String!\n  \"Le type de document (arrêté, décret, etc.)\"\n  type: String\n  \"L'url du document\"\n  url: String\n  \"L'uri du document\"\n  uri: String\n  \"Le type de fichier\"\n  fichier: String\n  \"La référence au Journal Officiel\"\n  jorf: String\n  \"La référence Nor\"\n  nor: String\n}\n\n\"Point du périmètre géographique d'un titre (système géodésique WGS 84)\"\ntype Point {\n  \"\"\"\n  L'__id__ composée de la concaténation:\n  - de l'id de l'étape\n  - du groupe (lettre 'g' suivie de 2 chiffres)\n  - du contour (lettre 'c' suivie de 2 chiffres)\n  - du point (lettre 'p' suivie de 3 chiffres)\n  \"\"\"\n  id: ID!\n  \"Les coordonnées du point dans le système WGS 84\"\n  coordonnees: Coordonnees\n  \"Le groupe de contours auquel appartient le point composé d'un nombre entier commençant à 1\"\n  groupe: Int\n  \"Le contour auquel appartient le point composé d'un nombre entier commençant à 1. Le premier contour forme le périmètre. Les contours suivant forment des trous dans ce périmètre.\"\n  contour: Int\n  \"Le numéro du point dans le contour\"\n  point: Int\n  \"Le nom du point tel que stipulé dans les documents officiels\"\n  nom: String\n  \"La description du point telle que stipulée dans les documents officiels\"\n  description: String\n  \"Si le point appartient à un périmètre de sécurité\"\n  securite: Boolean\n  \"Liste d'id de référence de points\"\n  references: [PointReference]\n}\n\n\"Point du périmètre géographique d'un titre dans un système autre que WGS 84\"\ntype PointReference {\n  \"\"\"\n  L'__id__ composée de la concaténation:\n  - de l'id du point\n  - du système\n  \"\"\"\n  id: ID!\n  \"Le code du système de référence géodésique\"\n  systeme: String\n  \"Les coordonnées du point dans le système géodésique\"\n  coordonnees: Coordonnees\n}\n\n\"Paire de coordonnées géographiques\"\ntype Coordonnees {\n  \"La valeur des coordonnées en X sous forme d'un nombre décimal\"\n  x: Float\n  \"La valeur des coordonnées en Y sous forme d'un nombre décimal\"\n  y: Float\n}\n\n\"Titre minier\"\ninput InputTitre {\n  \"\"\"\n  L'__id__ composée de la concaténation:\n  - du type en 3 lettres\n  - du slug du nom du titre\n  - de l'année d'octroi\n  \"\"\"\n  id: ID!\n  nom: String!\n  type: InputType!\n  domaine: InputDomaine!\n  references: [InputReference]\n}\n\ninput InputReference {\n  type: String\n}\n\ninput InputEtape {\n  id: ID!\n  type: InputEtapeTypeId!\n  statut: InputEtapeStatutId!\n  ordre: Int!\n  date: Date!\n  duree: Int\n  dateDebut: Date\n  dateFin: Date\n  surface: Float\n  volume: Float\n  volumeUnite: String\n  visas: [String]\n  engagement: Float\n  engagementDevise: String\n  emprises: [InputEmpriseId]\n  substances: [InputEtapeSubstanceId]\n  points: [InputPoint]\n  titulaires: [InputEntreprise]\n  amodiataires: [InputEntreprise]\n  administrations: [InputAdministration]\n  sourceIndisponible: Boolean\n}\n\ninput InputPoint {\n  id: ID!\n  coordonnees: InputCoordonnees\n  groupe: Int\n  contour: Int\n  point: Int\n  nom: String\n  description: String\n  securite: Boolean\n  references: [InputPointReference]\n}\n\ninput InputPointReference {\n  id: ID!\n  systeme: String\n  coordonnees: InputCoordonnees\n}\n\ninput InputCoordonnees {\n  x: Float\n  y: Float\n}\n\ninput InputDocument {\n  id: ID!\n  nom: String!\n  type: String\n  url: String\n  uri: String\n  fichier: String\n  jorf: String\n  nor: String\n}`\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/api/schemas/titres.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 110,
    "kind": "file",
    "name": "src/api/schemas/utilisateurs.js",
    "content": "export default `\ntype Utilisateur {\n  id: ID!\n  email: String!\n  nom: String\n  prenom: String\n  telephoneMobile: String\n  telephoneFixe: String\n  administration: Administration\n  entreprise: Entreprise\n  permission: Permission\n  preferences: Json\n}\n\ntype UtilisateurToken {\n  utilisateur: Utilisateur\n  token: String\n}\n\ntype Permission {\n  id: ID!\n  nom: String\n}\n\ninput InputUtilisateur {\n  id: ID!\n  email: String!\n  nom: String\n  prenom: String\n  telephoneMobile: String\n  telephoneFixe: String\n  permission: InputPermission\n  entreprise: [InputEntreprise]\n  administration: [InputAdministration]\n  preferences: Json\n}\n\ninput InputUtilisateurAjouter {\n  email: String!\n  motDePasse: String!\n  nom: String\n  prenom: String\n  telephoneMobile: String\n  telephoneFixe: String\n  permission: InputPermission\n  entreprise: [InputEntreprise]\n  administration: [InputAdministration]\n  preferences: Json\n}\n\ninput InputPermission {\n  id: ID!\n  nom: String\n}`\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/api/schemas/utilisateurs.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 111,
    "kind": "file",
    "name": "src/api/schemas.js",
    "content": "import { buildSchema } from 'graphql'\n\nimport index from './schemas/index'\nimport metas from './schemas/metas'\nimport titres from './schemas/titres'\nimport substances from './schemas/substances'\nimport geojson from './schemas/geojsons'\nimport utilisateurs from './schemas/utilisateurs'\nimport administrations from './schemas/administrations'\nimport entreprises from './schemas/entreprises'\nimport titresTravaux from './schemas/titres-travaux'\n\nconst schema = buildSchema(`\n  ${index}\n\n  ${metas}\n\n  ${titres}\n\n  ${substances}\n\n  ${geojson}\n\n  ${utilisateurs}\n\n  ${administrations}\n\n  ${entreprises}\n\n  ${titresTravaux}\n`)\n\nexport default schema\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/api/schemas.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 112,
    "kind": "variable",
    "name": "schema",
    "memberof": "src/api/schemas.js",
    "static": true,
    "longname": "src/api/schemas.js~schema",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/api/schemas.js",
    "importStyle": "schema",
    "description": null,
    "lineNumber": 13,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 113,
    "kind": "file",
    "name": "src/api/types/json.js",
    "content": "import { GraphQLScalarType } from 'graphql'\n\nconst Json = new GraphQLScalarType({\n  name: 'Json',\n  serialize: value => {\n    // console.log('serialize value', value);\n    return value\n  },\n  parseValue: value => {\n    // console.log('parseValue value', value);\n    return value\n  },\n  parseLiteral: ast => {\n    // console.log('parseLiteral ast', ast);\n    return ast.value\n  }\n})\n\nexport default Json\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/api/types/json.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 114,
    "kind": "file",
    "name": "src/config/index.js",
    "content": "// virtualHost est défini seulement si\n// l'application tourne dans un container docker\n// voir le fichier DockerFile\n\nconst debug = process.env.NODE_DEBUG === 'true'\nconst virtualHost = process.env.VIRTUAL_HOST\nconst protocol = virtualHost ? 'https' : 'http'\nconst port = Number(process.env.NODE_PORT)\nconst url = virtualHost\n  ? `${protocol}://${virtualHost}/`\n  : `${protocol}://localhost:${port}/`\n\nexport { port, url, debug }\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/config/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 115,
    "kind": "variable",
    "name": "virtualHost",
    "memberof": "src/config/index.js",
    "static": true,
    "longname": "src/config/index.js~virtualHost",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/config/index.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 6,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 116,
    "kind": "variable",
    "name": "protocol",
    "memberof": "src/config/index.js",
    "static": true,
    "longname": "src/config/index.js~protocol",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/config/index.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 117,
    "kind": "variable",
    "name": "port",
    "memberof": "src/config/index.js",
    "static": true,
    "longname": "src/config/index.js~port",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/config/index.js",
    "importStyle": "{port}",
    "description": null,
    "lineNumber": 8,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 118,
    "kind": "variable",
    "name": "url",
    "memberof": "src/config/index.js",
    "static": true,
    "longname": "src/config/index.js~url",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/config/index.js",
    "importStyle": "{url}",
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 119,
    "kind": "variable",
    "name": "debug",
    "memberof": "src/config/index.js",
    "static": true,
    "longname": "src/config/index.js~debug",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/config/index.js",
    "importStyle": "{debug}",
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 120,
    "kind": "file",
    "name": "src/config/knex.js",
    "content": "import { knexSnakeCaseMappers } from 'objection'\n\nconst connection = {\n  host: process.env.PGHOST,\n  port: Number(process.env.PGPORT),\n  database: process.env.PGDATABASE,\n  user: process.env.PGUSER,\n  password: process.env.PGPASSWORD\n}\n\nconst knexConfig = {\n  client: 'pg',\n  // debug: true,\n  connection,\n  ...knexSnakeCaseMappers()\n}\n\nexport default knexConfig\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/config/knex.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 121,
    "kind": "variable",
    "name": "connection",
    "memberof": "src/config/knex.js",
    "static": true,
    "longname": "src/config/knex.js~connection",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/config/knex.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "type": {
      "types": [
        "{\"host\": *, \"port\": *, \"database\": *, \"user\": *, \"password\": *}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 122,
    "kind": "variable",
    "name": "knexConfig",
    "memberof": "src/config/knex.js",
    "static": true,
    "longname": "src/config/knex.js~knexConfig",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/config/knex.js",
    "importStyle": "knexConfig",
    "description": null,
    "lineNumber": 11,
    "undocument": true,
    "type": {
      "types": [
        "{\"client\": string, \"connection\": *, ...undefined: Object}"
      ]
    }
  },
  {
    "__docId__": 123,
    "kind": "file",
    "name": "src/database/index.js",
    "content": "import * as Knex from 'knex'\nimport { Model } from 'objection'\n\nimport knexConfig from '../config/knex'\nconst knex = Knex(knexConfig)\n\nModel.knex(knex)\n\nexport default knex\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/database/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 124,
    "kind": "variable",
    "name": "knex",
    "memberof": "src/database/index.js",
    "static": true,
    "longname": "src/database/index.js~knex",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/index.js",
    "importStyle": "knex",
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 125,
    "kind": "file",
    "name": "src/database/models/administrations.js",
    "content": "import { Model } from 'objection'\nimport { join } from 'path'\n\nexport default class Administrations extends Model {\n  static tableName = 'administrations'\n\n  static jsonSchema = {\n    type: 'object',\n    required: ['id', 'nom'],\n\n    properties: {\n      id: { type: 'string', maxLength: 64 },\n      nom: { type: 'string' },\n      service: { type: 'string' },\n      site: { type: 'string' },\n      email: { type: 'string' },\n      telephone: { type: 'string' },\n      adresse1: { type: 'string' },\n      adresse2: { type: 'string' },\n      code_postal: { type: 'integer' },\n      ville: { type: 'string' },\n      cedex: { type: 'integer' }\n    }\n  }\n\n  static relationMappings = {\n    // Utilisateurs est requis par Administrations\n    // Administrations est requis par Utilisateurs\n    // ce qui provoque une require loop\n    // solutions to require loops http://vincit.github.io/objection.js/#relations\n    utilisateurs: {\n      relation: Model.HasManyRelation,\n      modelClass: join(__dirname, 'utilisateurs'),\n      join: {\n        from: 'administrations.id',\n        to: 'utilisateurs.administrationId'\n      }\n    }\n  }\n}\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/database/models/administrations.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 126,
    "kind": "class",
    "name": "Administrations",
    "memberof": "src/database/models/administrations.js",
    "static": true,
    "longname": "src/database/models/administrations.js~Administrations",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/models/administrations.js",
    "importStyle": "Administrations",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "interface": false,
    "extends": [
      "objection~Model"
    ]
  },
  {
    "__docId__": 127,
    "kind": "member",
    "name": "tableName",
    "memberof": "src/database/models/administrations.js~Administrations",
    "static": true,
    "longname": "src/database/models/administrations.js~Administrations.tableName",
    "access": "public",
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 128,
    "kind": "member",
    "name": "jsonSchema",
    "memberof": "src/database/models/administrations.js~Administrations",
    "static": true,
    "longname": "src/database/models/administrations.js~Administrations.jsonSchema",
    "access": "public",
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 129,
    "kind": "member",
    "name": "relationMappings",
    "memberof": "src/database/models/administrations.js~Administrations",
    "static": true,
    "longname": "src/database/models/administrations.js~Administrations.relationMappings",
    "access": "public",
    "description": null,
    "lineNumber": 26,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 130,
    "kind": "file",
    "name": "src/database/models/demarches-statuts.js",
    "content": "import { Model } from 'objection'\n\nexport default class DemarchesStatuts extends Model {\n  static tableName = 'demarchesStatuts'\n\n  static jsonSchema = {\n    type: 'object',\n    required: ['id', 'nom', 'couleur'],\n\n    properties: {\n      id: { type: 'string', maxLength: 3 },\n      nom: { type: 'string' },\n      couleur: { type: 'string', maxLength: 8 }\n    }\n  }\n}\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/database/models/demarches-statuts.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 131,
    "kind": "class",
    "name": "DemarchesStatuts",
    "memberof": "src/database/models/demarches-statuts.js",
    "static": true,
    "longname": "src/database/models/demarches-statuts.js~DemarchesStatuts",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/models/demarches-statuts.js",
    "importStyle": "DemarchesStatuts",
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "interface": false,
    "extends": [
      "objection~Model"
    ]
  },
  {
    "__docId__": 132,
    "kind": "member",
    "name": "tableName",
    "memberof": "src/database/models/demarches-statuts.js~DemarchesStatuts",
    "static": true,
    "longname": "src/database/models/demarches-statuts.js~DemarchesStatuts.tableName",
    "access": "public",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 133,
    "kind": "member",
    "name": "jsonSchema",
    "memberof": "src/database/models/demarches-statuts.js~DemarchesStatuts",
    "static": true,
    "longname": "src/database/models/demarches-statuts.js~DemarchesStatuts.jsonSchema",
    "access": "public",
    "description": null,
    "lineNumber": 6,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 134,
    "kind": "file",
    "name": "src/database/models/demarches-types.js",
    "content": "import { Model } from 'objection'\nimport DemarchesStatuts from './demarches-statuts'\nimport EtapesTypes from './etapes-types'\n\nexport default class DemarchesTypes extends Model {\n  static tableName = 'demarchesTypes'\n\n  static jsonSchema = {\n    type: 'object',\n    required: ['id', 'nom'],\n\n    properties: {\n      id: { type: 'string', maxLength: 3 },\n      nom: { type: 'string' },\n      ordre: { type: 'integer' },\n      duree: { type: 'boolean' },\n      points: { type: 'boolean' },\n      substances: { type: 'boolean' },\n      titulaires: { type: 'boolean' },\n      renouvelable: { type: 'boolean' },\n      exception: { type: 'boolean' }\n    }\n  }\n\n  static relationMappings = {\n    demarchesStatuts: {\n      relation: Model.ManyToManyRelation,\n      modelClass: DemarchesStatuts,\n      join: {\n        from: 'demarchesTypes.id',\n        through: {\n          from: 'demarchesTypes__demarchesStatuts.demarcheTypeId',\n          to: 'demarchesTypes__demarchesStatuts.demarcheStatutId',\n          extra: ['ordre']\n        },\n        to: 'demarchesStatuts.id'\n      }\n    },\n\n    etapesTypes: {\n      relation: Model.ManyToManyRelation,\n      modelClass: EtapesTypes,\n      join: {\n        from: 'demarchesTypes.id',\n        through: {\n          from: 'demarchesTypes__etapesTypes.demarcheTypeId',\n          to: 'demarchesTypes__etapesTypes.etapeTypeId',\n          extra: ['ordre', 'typeId']\n        },\n        to: 'etapesTypes.id'\n      }\n    }\n  }\n}\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/database/models/demarches-types.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 135,
    "kind": "class",
    "name": "DemarchesTypes",
    "memberof": "src/database/models/demarches-types.js",
    "static": true,
    "longname": "src/database/models/demarches-types.js~DemarchesTypes",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/models/demarches-types.js",
    "importStyle": "DemarchesTypes",
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "interface": false,
    "extends": [
      "objection~Model"
    ]
  },
  {
    "__docId__": 136,
    "kind": "member",
    "name": "tableName",
    "memberof": "src/database/models/demarches-types.js~DemarchesTypes",
    "static": true,
    "longname": "src/database/models/demarches-types.js~DemarchesTypes.tableName",
    "access": "public",
    "description": null,
    "lineNumber": 6,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 137,
    "kind": "member",
    "name": "jsonSchema",
    "memberof": "src/database/models/demarches-types.js~DemarchesTypes",
    "static": true,
    "longname": "src/database/models/demarches-types.js~DemarchesTypes.jsonSchema",
    "access": "public",
    "description": null,
    "lineNumber": 8,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 138,
    "kind": "member",
    "name": "relationMappings",
    "memberof": "src/database/models/demarches-types.js~DemarchesTypes",
    "static": true,
    "longname": "src/database/models/demarches-types.js~DemarchesTypes.relationMappings",
    "access": "public",
    "description": null,
    "lineNumber": 25,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 139,
    "kind": "file",
    "name": "src/database/models/domaines.js",
    "content": "import { Model } from 'objection'\nimport Types from './types'\n\nexport default class Domaines extends Model {\n  static tableName = 'domaines'\n\n  static jsonSchema = {\n    type: 'object',\n    required: ['id', 'nom'],\n\n    properties: {\n      id: { type: 'string', maxLength: 1 },\n      nom: { type: 'string' }\n    }\n  }\n\n  static relationMappings = {\n    types: {\n      relation: Model.ManyToManyRelation,\n      modelClass: Types,\n      join: {\n        from: 'domaines.id',\n        through: {\n          from: 'domaines__types.domaineId',\n          to: 'domaines__types.typeId',\n          extra: ['archive']\n        },\n        to: 'types.id'\n      }\n    }\n  }\n}\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/database/models/domaines.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 140,
    "kind": "class",
    "name": "Domaines",
    "memberof": "src/database/models/domaines.js",
    "static": true,
    "longname": "src/database/models/domaines.js~Domaines",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/models/domaines.js",
    "importStyle": "Domaines",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "interface": false,
    "extends": [
      "objection~Model"
    ]
  },
  {
    "__docId__": 141,
    "kind": "member",
    "name": "tableName",
    "memberof": "src/database/models/domaines.js~Domaines",
    "static": true,
    "longname": "src/database/models/domaines.js~Domaines.tableName",
    "access": "public",
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 142,
    "kind": "member",
    "name": "jsonSchema",
    "memberof": "src/database/models/domaines.js~Domaines",
    "static": true,
    "longname": "src/database/models/domaines.js~Domaines.jsonSchema",
    "access": "public",
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 143,
    "kind": "member",
    "name": "relationMappings",
    "memberof": "src/database/models/domaines.js~Domaines",
    "static": true,
    "longname": "src/database/models/domaines.js~Domaines.relationMappings",
    "access": "public",
    "description": null,
    "lineNumber": 17,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 144,
    "kind": "file",
    "name": "src/database/models/emprises.js",
    "content": "import { Model } from 'objection'\n\nexport default class Emprises extends Model {\n  static tableName = 'emprises'\n\n  static jsonSchema = {\n    type: 'object',\n    required: ['id', 'nom'],\n\n    properties: {\n      id: { type: 'string', maxLength: 3 },\n      nom: { type: 'string' }\n    }\n  }\n}\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/database/models/emprises.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 145,
    "kind": "class",
    "name": "Emprises",
    "memberof": "src/database/models/emprises.js",
    "static": true,
    "longname": "src/database/models/emprises.js~Emprises",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/models/emprises.js",
    "importStyle": "Emprises",
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "interface": false,
    "extends": [
      "objection~Model"
    ]
  },
  {
    "__docId__": 146,
    "kind": "member",
    "name": "tableName",
    "memberof": "src/database/models/emprises.js~Emprises",
    "static": true,
    "longname": "src/database/models/emprises.js~Emprises.tableName",
    "access": "public",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 147,
    "kind": "member",
    "name": "jsonSchema",
    "memberof": "src/database/models/emprises.js~Emprises",
    "static": true,
    "longname": "src/database/models/emprises.js~Emprises.jsonSchema",
    "access": "public",
    "description": null,
    "lineNumber": 6,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 148,
    "kind": "file",
    "name": "src/database/models/entreprises.js",
    "content": "import { Model } from 'objection'\nimport { join } from 'path'\n\nexport default class Entreprises extends Model {\n  static tableName = 'entreprises'\n\n  static jsonSchema = {\n    type: 'object',\n    required: ['id', 'nom'],\n\n    properties: {\n      id: { type: 'string', maxLength: 64 },\n      nom: { type: ['string', 'null'] },\n      raisonSociale: { type: ['string', 'null'] },\n      paysId: { type: ['string', 'null'] },\n      legalSiren: { type: ['string', 'null'] },\n      legalEtranger: { type: ['string', 'null'] },\n      legalForme: { type: ['string', 'null'] },\n      voieNumero: { type: ['string', 'null'] },\n      voieType: { type: ['string', 'null'] },\n      voieNom: { type: ['string', 'null'] },\n      adresseComplement: { type: ['string', 'null'] },\n      codePostal: { type: ['integer', 'null'] },\n      ville: { type: ['string', 'null'] },\n      cedex: { type: ['integer', 'null'] },\n      email: { type: ['string', 'null'] },\n      telephone: { type: ['string', 'null'] },\n      url: { type: ['string', 'null'] }\n    }\n  }\n\n  static relationMappings = {\n    utilisateurs: {\n      relation: Model.HasManyRelation,\n      modelClass: `${__dirname}/utilisateurs`,\n      join: {\n        from: 'entreprises.id',\n        to: 'utilisateurs.entrepriseId'\n      }\n    }\n  }\n}\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/database/models/entreprises.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 149,
    "kind": "class",
    "name": "Entreprises",
    "memberof": "src/database/models/entreprises.js",
    "static": true,
    "longname": "src/database/models/entreprises.js~Entreprises",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/models/entreprises.js",
    "importStyle": "Entreprises",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "interface": false,
    "extends": [
      "objection~Model"
    ]
  },
  {
    "__docId__": 150,
    "kind": "member",
    "name": "tableName",
    "memberof": "src/database/models/entreprises.js~Entreprises",
    "static": true,
    "longname": "src/database/models/entreprises.js~Entreprises.tableName",
    "access": "public",
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 151,
    "kind": "member",
    "name": "jsonSchema",
    "memberof": "src/database/models/entreprises.js~Entreprises",
    "static": true,
    "longname": "src/database/models/entreprises.js~Entreprises.jsonSchema",
    "access": "public",
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 152,
    "kind": "member",
    "name": "relationMappings",
    "memberof": "src/database/models/entreprises.js~Entreprises",
    "static": true,
    "longname": "src/database/models/entreprises.js~Entreprises.relationMappings",
    "access": "public",
    "description": null,
    "lineNumber": 32,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 153,
    "kind": "file",
    "name": "src/database/models/etapes-statuts.js",
    "content": "import { Model } from 'objection'\n\nexport default class EtapesStatuts extends Model {\n  static tableName = 'etapesStatuts'\n\n  static jsonSchema = {\n    type: 'object',\n    required: ['id', 'nom', 'couleur'],\n\n    properties: {\n      id: { type: 'string', maxLength: 3 },\n      nom: { type: ['string', 'null'] },\n      couleur: { type: ['string', 'null'], maxLength: 8 }\n    }\n  }\n}\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/database/models/etapes-statuts.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 154,
    "kind": "class",
    "name": "EtapesStatuts",
    "memberof": "src/database/models/etapes-statuts.js",
    "static": true,
    "longname": "src/database/models/etapes-statuts.js~EtapesStatuts",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/models/etapes-statuts.js",
    "importStyle": "EtapesStatuts",
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "interface": false,
    "extends": [
      "objection~Model"
    ]
  },
  {
    "__docId__": 155,
    "kind": "member",
    "name": "tableName",
    "memberof": "src/database/models/etapes-statuts.js~EtapesStatuts",
    "static": true,
    "longname": "src/database/models/etapes-statuts.js~EtapesStatuts.tableName",
    "access": "public",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 156,
    "kind": "member",
    "name": "jsonSchema",
    "memberof": "src/database/models/etapes-statuts.js~EtapesStatuts",
    "static": true,
    "longname": "src/database/models/etapes-statuts.js~EtapesStatuts.jsonSchema",
    "access": "public",
    "description": null,
    "lineNumber": 6,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 157,
    "kind": "file",
    "name": "src/database/models/etapes-types.js",
    "content": "import { Model } from 'objection'\nimport EtapesStatuts from './etapes-statuts'\n\nexport default class EtapesTypes extends Model {\n  static tableName = 'etapesTypes'\n\n  static jsonSchema = {\n    type: 'object',\n    required: ['id', 'nom'],\n\n    properties: {\n      id: { type: 'string', maxLength: 3 },\n      nom: {\n        type: ['string', 'null'],\n        maxLength: 128\n      },\n      acceptationAuto: {\n        type: ['boolean', 'null']\n      },\n      dateDebut: {\n        type: ['date', 'null']\n      },\n      dateFin: {\n        type: ['date', 'null']\n      }\n    }\n  }\n\n  static relationMappings = {\n    etapesStatuts: {\n      relation: Model.ManyToManyRelation,\n      modelClass: EtapesStatuts,\n      join: {\n        from: 'etapesTypes.id',\n        through: {\n          from: 'etapesTypes__etapesStatuts.etapeTypeId',\n          to: 'etapesTypes__etapesStatuts.etapeStatutId',\n          extra: ['ordre']\n        },\n        to: 'etapesStatuts.id'\n      }\n    }\n  }\n}\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/database/models/etapes-types.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 158,
    "kind": "class",
    "name": "EtapesTypes",
    "memberof": "src/database/models/etapes-types.js",
    "static": true,
    "longname": "src/database/models/etapes-types.js~EtapesTypes",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/models/etapes-types.js",
    "importStyle": "EtapesTypes",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "interface": false,
    "extends": [
      "objection~Model"
    ]
  },
  {
    "__docId__": 159,
    "kind": "member",
    "name": "tableName",
    "memberof": "src/database/models/etapes-types.js~EtapesTypes",
    "static": true,
    "longname": "src/database/models/etapes-types.js~EtapesTypes.tableName",
    "access": "public",
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 160,
    "kind": "member",
    "name": "jsonSchema",
    "memberof": "src/database/models/etapes-types.js~EtapesTypes",
    "static": true,
    "longname": "src/database/models/etapes-types.js~EtapesTypes.jsonSchema",
    "access": "public",
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 161,
    "kind": "member",
    "name": "relationMappings",
    "memberof": "src/database/models/etapes-types.js~EtapesTypes",
    "static": true,
    "longname": "src/database/models/etapes-types.js~EtapesTypes.relationMappings",
    "access": "public",
    "description": null,
    "lineNumber": 29,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 162,
    "kind": "file",
    "name": "src/database/models/permissions.js",
    "content": "import { Model } from 'objection'\n\nexport default class Permissions extends Model {\n  static tableName = 'permissions'\n\n  static jsonSchema = {\n    type: 'object',\n    required: ['id', 'nom'],\n\n    properties: {\n      id: { type: 'string', maxLength: 12 },\n      nom: { type: 'string' },\n      ordre: { type: 'integer' }\n    }\n  }\n\n  static namedFilters = {\n    orderAsc: builder => {\n      builder.orderBy('ordre', 'asc')\n    }\n  }\n}\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/database/models/permissions.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 163,
    "kind": "class",
    "name": "Permissions",
    "memberof": "src/database/models/permissions.js",
    "static": true,
    "longname": "src/database/models/permissions.js~Permissions",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/models/permissions.js",
    "importStyle": "Permissions",
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "interface": false,
    "extends": [
      "objection~Model"
    ]
  },
  {
    "__docId__": 164,
    "kind": "member",
    "name": "tableName",
    "memberof": "src/database/models/permissions.js~Permissions",
    "static": true,
    "longname": "src/database/models/permissions.js~Permissions.tableName",
    "access": "public",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 165,
    "kind": "member",
    "name": "jsonSchema",
    "memberof": "src/database/models/permissions.js~Permissions",
    "static": true,
    "longname": "src/database/models/permissions.js~Permissions.jsonSchema",
    "access": "public",
    "description": null,
    "lineNumber": 6,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 166,
    "kind": "member",
    "name": "namedFilters",
    "memberof": "src/database/models/permissions.js~Permissions",
    "static": true,
    "longname": "src/database/models/permissions.js~Permissions.namedFilters",
    "access": "public",
    "description": null,
    "lineNumber": 17,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 167,
    "kind": "file",
    "name": "src/database/models/phases-statuts.js",
    "content": "import { Model } from 'objection'\n\nexport default class PhasesStatuts extends Model {\n  static tableName = 'phasesStatuts'\n\n  static jsonSchema = {\n    type: 'object',\n    required: ['id', 'nom', 'couleur'],\n\n    properties: {\n      id: { type: 'string', maxLength: 3 },\n      nom: { type: 'string' },\n      couleur: { type: 'string', maxLength: 8 }\n    }\n  }\n}\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/database/models/phases-statuts.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 168,
    "kind": "class",
    "name": "PhasesStatuts",
    "memberof": "src/database/models/phases-statuts.js",
    "static": true,
    "longname": "src/database/models/phases-statuts.js~PhasesStatuts",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/models/phases-statuts.js",
    "importStyle": "PhasesStatuts",
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "interface": false,
    "extends": [
      "objection~Model"
    ]
  },
  {
    "__docId__": 169,
    "kind": "member",
    "name": "tableName",
    "memberof": "src/database/models/phases-statuts.js~PhasesStatuts",
    "static": true,
    "longname": "src/database/models/phases-statuts.js~PhasesStatuts.tableName",
    "access": "public",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 170,
    "kind": "member",
    "name": "jsonSchema",
    "memberof": "src/database/models/phases-statuts.js~PhasesStatuts",
    "static": true,
    "longname": "src/database/models/phases-statuts.js~PhasesStatuts.jsonSchema",
    "access": "public",
    "description": null,
    "lineNumber": 6,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 171,
    "kind": "file",
    "name": "src/database/models/statuts.js",
    "content": "import { Model } from 'objection'\n\nexport default class Statuts extends Model {\n  static tableName = 'statuts'\n\n  static jsonSchema = {\n    type: 'object',\n    required: ['id', 'nom', 'couleur'],\n\n    properties: {\n      id: { type: 'string', maxLength: 3 },\n      nom: { type: 'string' },\n      couleur: { type: 'string', maxLength: 8 }\n    }\n  }\n}\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/database/models/statuts.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 172,
    "kind": "class",
    "name": "Statuts",
    "memberof": "src/database/models/statuts.js",
    "static": true,
    "longname": "src/database/models/statuts.js~Statuts",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/models/statuts.js",
    "importStyle": "Statuts",
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "interface": false,
    "extends": [
      "objection~Model"
    ]
  },
  {
    "__docId__": 173,
    "kind": "member",
    "name": "tableName",
    "memberof": "src/database/models/statuts.js~Statuts",
    "static": true,
    "longname": "src/database/models/statuts.js~Statuts.tableName",
    "access": "public",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 174,
    "kind": "member",
    "name": "jsonSchema",
    "memberof": "src/database/models/statuts.js~Statuts",
    "static": true,
    "longname": "src/database/models/statuts.js~Statuts.jsonSchema",
    "access": "public",
    "description": null,
    "lineNumber": 6,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 175,
    "kind": "file",
    "name": "src/database/models/substances-legales-codes.js",
    "content": "import { Model } from 'objection'\n\nexport default class SubstancesLegalesCodes extends Model {\n  static tableName = 'substancesLegalesCodes'\n\n  static jsonSchema = {\n    type: 'object',\n    required: ['id', 'nom', 'description', 'lien'],\n\n    properties: {\n      id: { type: 'string' },\n      nom: { type: ['string', 'null'] },\n      description: { type: ['string', 'null'] },\n      lien: { type: ['string', 'null'] }\n    }\n  }\n}\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/database/models/substances-legales-codes.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 176,
    "kind": "class",
    "name": "SubstancesLegalesCodes",
    "memberof": "src/database/models/substances-legales-codes.js",
    "static": true,
    "longname": "src/database/models/substances-legales-codes.js~SubstancesLegalesCodes",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/models/substances-legales-codes.js",
    "importStyle": "SubstancesLegalesCodes",
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "interface": false,
    "extends": [
      "objection~Model"
    ]
  },
  {
    "__docId__": 177,
    "kind": "member",
    "name": "tableName",
    "memberof": "src/database/models/substances-legales-codes.js~SubstancesLegalesCodes",
    "static": true,
    "longname": "src/database/models/substances-legales-codes.js~SubstancesLegalesCodes.tableName",
    "access": "public",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 178,
    "kind": "member",
    "name": "jsonSchema",
    "memberof": "src/database/models/substances-legales-codes.js~SubstancesLegalesCodes",
    "static": true,
    "longname": "src/database/models/substances-legales-codes.js~SubstancesLegalesCodes.jsonSchema",
    "access": "public",
    "description": null,
    "lineNumber": 6,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 179,
    "kind": "file",
    "name": "src/database/models/substances-legales.js",
    "content": "import { Model } from 'objection'\nimport SubstancesLegalesCodes from './substances-legales-codes'\nimport Domaines from './domaines'\n\nexport default class SubstancesLegales extends Model {\n  static tableName = 'substancesLegales'\n\n  static jsonSchema = {\n    type: 'object',\n    required: ['id', 'nom', 'lien'],\n\n    properties: {\n      id: { type: 'string' },\n      nom: { type: ['string', 'null'] },\n      domaineId: { type: ['string', 'null'] },\n      description: { type: ['string', 'null'] },\n      substanceLegalCodeId: { type: ['string', 'null'] }\n    }\n  }\n\n  static relationMappings = {\n    code: {\n      relation: Model.BelongsToOneRelation,\n      modelClass: SubstancesLegalesCodes,\n      join: {\n        from: 'substancesLegales.substanceLegaleCodeId',\n        to: 'substancesLegalesCodes.id'\n      }\n    },\n    domaine: {\n      relation: Model.BelongsToOneRelation,\n      modelClass: Domaines,\n      join: {\n        from: 'substancesLegales.domaineId',\n        to: 'domaines.id'\n      }\n    }\n  }\n}\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/database/models/substances-legales.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 180,
    "kind": "class",
    "name": "SubstancesLegales",
    "memberof": "src/database/models/substances-legales.js",
    "static": true,
    "longname": "src/database/models/substances-legales.js~SubstancesLegales",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/models/substances-legales.js",
    "importStyle": "SubstancesLegales",
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "interface": false,
    "extends": [
      "objection~Model"
    ]
  },
  {
    "__docId__": 181,
    "kind": "member",
    "name": "tableName",
    "memberof": "src/database/models/substances-legales.js~SubstancesLegales",
    "static": true,
    "longname": "src/database/models/substances-legales.js~SubstancesLegales.tableName",
    "access": "public",
    "description": null,
    "lineNumber": 6,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 182,
    "kind": "member",
    "name": "jsonSchema",
    "memberof": "src/database/models/substances-legales.js~SubstancesLegales",
    "static": true,
    "longname": "src/database/models/substances-legales.js~SubstancesLegales.jsonSchema",
    "access": "public",
    "description": null,
    "lineNumber": 8,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 183,
    "kind": "member",
    "name": "relationMappings",
    "memberof": "src/database/models/substances-legales.js~SubstancesLegales",
    "static": true,
    "longname": "src/database/models/substances-legales.js~SubstancesLegales.relationMappings",
    "access": "public",
    "description": null,
    "lineNumber": 21,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 184,
    "kind": "file",
    "name": "src/database/models/substances.js",
    "content": "import { Model } from 'objection'\nimport SubstancesLegales from './substances-legales'\n\nexport default class Substances extends Model {\n  static tableName = 'substances'\n\n  static jsonSchema = {\n    type: 'object',\n    required: ['id', 'nom', 'domaineId', 'type', 'substanceLegaleId'],\n\n    properties: {\n      id: { type: 'string' },\n      nom: { type: ['string', 'null'] },\n      symbole: { type: ['string', 'null'] },\n      gerep: { type: ['integer', 'null'] },\n      description: { type: ['string', 'null'], maxLength: 2048 },\n      substanceLegalId: { type: 'string' }\n    }\n  }\n\n  static relationMappings = {\n    legales: {\n      relation: Model.ManyToManyRelation,\n      modelClass: SubstancesLegales,\n      join: {\n        from: 'substances.id',\n        through: {\n          from: 'substances__substancesLegales.substanceId',\n          to: 'substances__substancesLegales.substanceLegaleId'\n        },\n        to: 'substancesLegales.id'\n      }\n    }\n  }\n}\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/database/models/substances.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 185,
    "kind": "class",
    "name": "Substances",
    "memberof": "src/database/models/substances.js",
    "static": true,
    "longname": "src/database/models/substances.js~Substances",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/models/substances.js",
    "importStyle": "Substances",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "interface": false,
    "extends": [
      "objection~Model"
    ]
  },
  {
    "__docId__": 186,
    "kind": "member",
    "name": "tableName",
    "memberof": "src/database/models/substances.js~Substances",
    "static": true,
    "longname": "src/database/models/substances.js~Substances.tableName",
    "access": "public",
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 187,
    "kind": "member",
    "name": "jsonSchema",
    "memberof": "src/database/models/substances.js~Substances",
    "static": true,
    "longname": "src/database/models/substances.js~Substances.jsonSchema",
    "access": "public",
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 188,
    "kind": "member",
    "name": "relationMappings",
    "memberof": "src/database/models/substances.js~Substances",
    "static": true,
    "longname": "src/database/models/substances.js~Substances.relationMappings",
    "access": "public",
    "description": null,
    "lineNumber": 21,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 189,
    "kind": "file",
    "name": "src/database/models/titres-administrations.js",
    "content": "import { Model } from 'objection'\nimport Administrations from './administrations'\n\nexport default class TitresAdministrations extends Model {\n  static tableName = 'titresAdministrations'\n\n  static jsonSchema = {\n    type: 'object',\n    required: ['administrationId', 'titreEtapeId'],\n\n    properties: {\n      administrationId: { type: 'string', maxLength: 64 },\n      titreEtapeId: { type: 'string', maxLength: 128 }\n    }\n  }\n\n  static relationMappings = {\n    substance: {\n      relation: Model.BelongsToOneRelation,\n      modelClass: Administrations,\n      join: {\n        from: 'titresAdministrations.administrationId',\n        to: 'administrations.id'\n      }\n    }\n  }\n\n  static idColumn = ['administrationId', 'titreEtapeId']\n}\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/database/models/titres-administrations.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 190,
    "kind": "class",
    "name": "TitresAdministrations",
    "memberof": "src/database/models/titres-administrations.js",
    "static": true,
    "longname": "src/database/models/titres-administrations.js~TitresAdministrations",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/models/titres-administrations.js",
    "importStyle": "TitresAdministrations",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "interface": false,
    "extends": [
      "objection~Model"
    ]
  },
  {
    "__docId__": 191,
    "kind": "member",
    "name": "tableName",
    "memberof": "src/database/models/titres-administrations.js~TitresAdministrations",
    "static": true,
    "longname": "src/database/models/titres-administrations.js~TitresAdministrations.tableName",
    "access": "public",
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 192,
    "kind": "member",
    "name": "jsonSchema",
    "memberof": "src/database/models/titres-administrations.js~TitresAdministrations",
    "static": true,
    "longname": "src/database/models/titres-administrations.js~TitresAdministrations.jsonSchema",
    "access": "public",
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 193,
    "kind": "member",
    "name": "relationMappings",
    "memberof": "src/database/models/titres-administrations.js~TitresAdministrations",
    "static": true,
    "longname": "src/database/models/titres-administrations.js~TitresAdministrations.relationMappings",
    "access": "public",
    "description": null,
    "lineNumber": 17,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 194,
    "kind": "member",
    "name": "idColumn",
    "memberof": "src/database/models/titres-administrations.js~TitresAdministrations",
    "static": true,
    "longname": "src/database/models/titres-administrations.js~TitresAdministrations.idColumn",
    "access": "public",
    "description": null,
    "lineNumber": 28,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 195,
    "kind": "file",
    "name": "src/database/models/titres-amodiataires.js",
    "content": "import { Model } from 'objection'\nimport Entreprises from './entreprises'\n\nexport default class TitresAmodiataires extends Model {\n  static tableName = 'titresAmodiataires'\n\n  static jsonSchema = {\n    type: 'object',\n    required: ['entrepriseId', 'titreEtapeId'],\n\n    properties: {\n      entrepriseId: { type: 'string', maxLength: 64 },\n      titreEtapeId: { type: 'string', maxLength: 128 }\n    }\n  }\n\n  static relationMappings = {\n    entreprise: {\n      relation: Model.BelongsToOneRelation,\n      modelClass: Entreprises,\n      join: {\n        from: 'titresAmodiataires.entrepriseId',\n        to: 'entreprises.id'\n      }\n    }\n  }\n\n  static idColumn = ['entrepriseId', 'titreEtapeId']\n}\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/database/models/titres-amodiataires.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 196,
    "kind": "class",
    "name": "TitresAmodiataires",
    "memberof": "src/database/models/titres-amodiataires.js",
    "static": true,
    "longname": "src/database/models/titres-amodiataires.js~TitresAmodiataires",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/models/titres-amodiataires.js",
    "importStyle": "TitresAmodiataires",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "interface": false,
    "extends": [
      "objection~Model"
    ]
  },
  {
    "__docId__": 197,
    "kind": "member",
    "name": "tableName",
    "memberof": "src/database/models/titres-amodiataires.js~TitresAmodiataires",
    "static": true,
    "longname": "src/database/models/titres-amodiataires.js~TitresAmodiataires.tableName",
    "access": "public",
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 198,
    "kind": "member",
    "name": "jsonSchema",
    "memberof": "src/database/models/titres-amodiataires.js~TitresAmodiataires",
    "static": true,
    "longname": "src/database/models/titres-amodiataires.js~TitresAmodiataires.jsonSchema",
    "access": "public",
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 199,
    "kind": "member",
    "name": "relationMappings",
    "memberof": "src/database/models/titres-amodiataires.js~TitresAmodiataires",
    "static": true,
    "longname": "src/database/models/titres-amodiataires.js~TitresAmodiataires.relationMappings",
    "access": "public",
    "description": null,
    "lineNumber": 17,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 200,
    "kind": "member",
    "name": "idColumn",
    "memberof": "src/database/models/titres-amodiataires.js~TitresAmodiataires",
    "static": true,
    "longname": "src/database/models/titres-amodiataires.js~TitresAmodiataires.idColumn",
    "access": "public",
    "description": null,
    "lineNumber": 28,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 201,
    "kind": "file",
    "name": "src/database/models/titres-demarches.js",
    "content": "import { Model } from 'objection'\nimport DemarchesTypes from './demarches-types'\nimport DemarchesStatuts from './demarches-statuts'\nimport TitresPhases from './titres-phases'\nimport TitresEtapes from './titres-etapes'\n\nexport default class TitresDemarches extends Model {\n  static tableName = 'titresDemarches'\n\n  static jsonSchema = {\n    type: 'object',\n    required: ['id', 'titreId'],\n\n    properties: {\n      id: { type: 'string', maxLength: 128 },\n      titreId: { type: 'string', maxLength: 128 },\n      typeId: { type: 'string', maxLength: 8 },\n      statutId: { type: 'string', maxLength: 3 },\n      ordre: { type: 'integer' },\n      annulationDemarcheId: { type: 'string', maxLength: 128 }\n    }\n  }\n\n  static relationMappings = {\n    type: {\n      relation: Model.BelongsToOneRelation,\n      modelClass: DemarchesTypes,\n      join: {\n        from: 'titresDemarches.typeId',\n        to: 'demarchesTypes.id'\n      }\n    },\n    statut: {\n      relation: Model.BelongsToOneRelation,\n      modelClass: DemarchesStatuts,\n      join: {\n        from: 'titresDemarches.statutId',\n        to: 'demarchesStatuts.id'\n      }\n    },\n    phase: {\n      relation: Model.BelongsToOneRelation,\n      modelClass: TitresPhases,\n      join: {\n        from: 'titresDemarches.id',\n        to: 'titresPhases.titreDemarcheId'\n      }\n    },\n    etapes: {\n      relation: Model.HasManyRelation,\n      modelClass: TitresEtapes,\n      join: {\n        from: 'titresDemarches.id',\n        to: 'titresEtapes.titreDemarcheId'\n      }\n    },\n    annulationDemarche: {\n      relation: Model.BelongsToOneRelation,\n      modelClass: TitresDemarches,\n      join: {\n        from: 'titresDemarches.annulationDemarcheId',\n        to: 'titresDemarches.id'\n      }\n    }\n  }\n\n  // $parseDatabaseJson(json) {\n  //   json = super.$parseDatabaseJson(json)\n  //   if (json) {\n  //     console.log('--------------->', json)\n  //   }\n  //   console.log('<---------------')\n  //   return json\n  // }\n\n  static namedFilters = {\n    orderDesc: builder => {\n      builder.orderBy('ordre', 'desc')\n    }\n  }\n}\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/database/models/titres-demarches.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 202,
    "kind": "class",
    "name": "TitresDemarches",
    "memberof": "src/database/models/titres-demarches.js",
    "static": true,
    "longname": "src/database/models/titres-demarches.js~TitresDemarches",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/models/titres-demarches.js",
    "importStyle": "TitresDemarches",
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "interface": false,
    "extends": [
      "objection~Model"
    ]
  },
  {
    "__docId__": 203,
    "kind": "member",
    "name": "tableName",
    "memberof": "src/database/models/titres-demarches.js~TitresDemarches",
    "static": true,
    "longname": "src/database/models/titres-demarches.js~TitresDemarches.tableName",
    "access": "public",
    "description": null,
    "lineNumber": 8,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 204,
    "kind": "member",
    "name": "jsonSchema",
    "memberof": "src/database/models/titres-demarches.js~TitresDemarches",
    "static": true,
    "longname": "src/database/models/titres-demarches.js~TitresDemarches.jsonSchema",
    "access": "public",
    "description": null,
    "lineNumber": 10,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 205,
    "kind": "member",
    "name": "relationMappings",
    "memberof": "src/database/models/titres-demarches.js~TitresDemarches",
    "static": true,
    "longname": "src/database/models/titres-demarches.js~TitresDemarches.relationMappings",
    "access": "public",
    "description": null,
    "lineNumber": 24,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 206,
    "kind": "member",
    "name": "namedFilters",
    "memberof": "src/database/models/titres-demarches.js~TitresDemarches",
    "static": true,
    "longname": "src/database/models/titres-demarches.js~TitresDemarches.namedFilters",
    "access": "public",
    "description": null,
    "lineNumber": 76,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 207,
    "kind": "file",
    "name": "src/database/models/titres-documents.js",
    "content": "import { Model } from 'objection'\n\nexport default class TitresDocuments extends Model {\n  static tableName = 'titresDocuments'\n\n  static jsonSchema = {\n    type: 'object',\n    required: ['id', 'titreEtapeId', 'nom', 'date'],\n\n    properties: {\n      id: { type: 'string' },\n      titreEtapeId: { type: 'string', maxLength: 128 },\n      type: { type: 'string' },\n      nom: { type: 'string' },\n      url: { type: 'string' },\n      uri: { type: 'string' },\n      fichier: { type: 'string' },\n      jorf: { type: 'string' },\n      nor: { type: 'string' }\n    }\n  }\n}\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/database/models/titres-documents.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 208,
    "kind": "class",
    "name": "TitresDocuments",
    "memberof": "src/database/models/titres-documents.js",
    "static": true,
    "longname": "src/database/models/titres-documents.js~TitresDocuments",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/models/titres-documents.js",
    "importStyle": "TitresDocuments",
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "interface": false,
    "extends": [
      "objection~Model"
    ]
  },
  {
    "__docId__": 209,
    "kind": "member",
    "name": "tableName",
    "memberof": "src/database/models/titres-documents.js~TitresDocuments",
    "static": true,
    "longname": "src/database/models/titres-documents.js~TitresDocuments.tableName",
    "access": "public",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 210,
    "kind": "member",
    "name": "jsonSchema",
    "memberof": "src/database/models/titres-documents.js~TitresDocuments",
    "static": true,
    "longname": "src/database/models/titres-documents.js~TitresDocuments.jsonSchema",
    "access": "public",
    "description": null,
    "lineNumber": 6,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 211,
    "kind": "file",
    "name": "src/database/models/titres-emprises.js",
    "content": "import { Model } from 'objection'\nimport Emprises from './emprises'\n\nexport default class TitresEmprises extends Model {\n  static tableName = 'titresEmprises'\n\n  static jsonSchema = {\n    type: 'object',\n    required: ['empriseId', 'titreEtapeId'],\n\n    properties: {\n      empriseId: { type: 'string', maxLength: 3 },\n      titreEtapeId: { type: 'string', maxLength: 128 }\n    }\n  }\n\n  static relationMappings = {\n    emprise: {\n      relation: Model.BelongsToOneRelation,\n      modelClass: Emprises,\n      join: {\n        from: 'titresEmprises.empriseId',\n        to: 'emprises.id'\n      }\n    }\n  }\n\n  static idColumn = ['empriseId', 'titreEtapeId']\n}\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/database/models/titres-emprises.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 212,
    "kind": "class",
    "name": "TitresEmprises",
    "memberof": "src/database/models/titres-emprises.js",
    "static": true,
    "longname": "src/database/models/titres-emprises.js~TitresEmprises",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/models/titres-emprises.js",
    "importStyle": "TitresEmprises",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "interface": false,
    "extends": [
      "objection~Model"
    ]
  },
  {
    "__docId__": 213,
    "kind": "member",
    "name": "tableName",
    "memberof": "src/database/models/titres-emprises.js~TitresEmprises",
    "static": true,
    "longname": "src/database/models/titres-emprises.js~TitresEmprises.tableName",
    "access": "public",
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 214,
    "kind": "member",
    "name": "jsonSchema",
    "memberof": "src/database/models/titres-emprises.js~TitresEmprises",
    "static": true,
    "longname": "src/database/models/titres-emprises.js~TitresEmprises.jsonSchema",
    "access": "public",
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 215,
    "kind": "member",
    "name": "relationMappings",
    "memberof": "src/database/models/titres-emprises.js~TitresEmprises",
    "static": true,
    "longname": "src/database/models/titres-emprises.js~TitresEmprises.relationMappings",
    "access": "public",
    "description": null,
    "lineNumber": 17,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 216,
    "kind": "member",
    "name": "idColumn",
    "memberof": "src/database/models/titres-emprises.js~TitresEmprises",
    "static": true,
    "longname": "src/database/models/titres-emprises.js~TitresEmprises.idColumn",
    "access": "public",
    "description": null,
    "lineNumber": 28,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 217,
    "kind": "file",
    "name": "src/database/models/titres-erreurs.js",
    "content": "import { Model } from 'objection'\n\nexport default class TitresErreurs extends Model {\n  static tableName = 'titresErreurs'\n\n  static jsonSchema = {\n    type: 'object',\n    required: ['id', 'titreDemarcheId'],\n\n    properties: {\n      titreEtapeId: { type: 'string', maxLength: 128 },\n      date: { type: 'boolean' },\n      duree: { type: 'boolean' },\n      dateDebut: { type: 'boolean' },\n      dateFin: { type: 'boolean' },\n      surface: { type: 'boolean' },\n      visas: { type: 'boolean' },\n      engagement: { type: 'boolean' },\n      engagementDevise: { type: 'boolean' },\n      points: { type: 'boolean' },\n      substances: { type: 'boolean' },\n      titulaires: { type: 'boolean' },\n      amodiataires: { type: 'boolean' },\n      administrations: { type: 'boolean' }\n    }\n  }\n}\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/database/models/titres-erreurs.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 218,
    "kind": "class",
    "name": "TitresErreurs",
    "memberof": "src/database/models/titres-erreurs.js",
    "static": true,
    "longname": "src/database/models/titres-erreurs.js~TitresErreurs",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/models/titres-erreurs.js",
    "importStyle": "TitresErreurs",
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "interface": false,
    "extends": [
      "objection~Model"
    ]
  },
  {
    "__docId__": 219,
    "kind": "member",
    "name": "tableName",
    "memberof": "src/database/models/titres-erreurs.js~TitresErreurs",
    "static": true,
    "longname": "src/database/models/titres-erreurs.js~TitresErreurs.tableName",
    "access": "public",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 220,
    "kind": "member",
    "name": "jsonSchema",
    "memberof": "src/database/models/titres-erreurs.js~TitresErreurs",
    "static": true,
    "longname": "src/database/models/titres-erreurs.js~TitresErreurs.jsonSchema",
    "access": "public",
    "description": null,
    "lineNumber": 6,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 221,
    "kind": "file",
    "name": "src/database/models/titres-etapes.js",
    "content": "import { Model } from 'objection'\nimport EtapesTypes from './etapes-types'\nimport EtapesStatuts from './etapes-statuts'\nimport Substances from './substances'\nimport TitresPoints from './titres-points'\nimport Entreprises from './entreprises'\nimport Administrations from './administrations'\nimport TitresDocuments from './titres-documents'\nimport Emprises from './emprises'\nimport TitresErreurs from './titres-erreurs'\n\nimport TitresSubstances from './titres-substances'\nimport TitresAdministrations from './titres-administrations'\nimport TitresTitulaires from './titres-titulaires'\nimport TitresAmodiataires from './titres-amodiataires'\nimport TitresEmprises from './titres-emprises'\n\nexport default class TitresEtapes extends Model {\n  static tableName = 'titresEtapes'\n\n  static jsonSchema = {\n    type: 'object',\n    required: ['id', 'titreDemarcheId'],\n\n    properties: {\n      id: { type: 'string', maxLength: 128 },\n      titreDemarcheId: { type: 'string', maxLength: 128 },\n      typeId: { type: 'string', maxLength: 3 },\n      statutId: { type: 'string', maxLength: 3 },\n      ordre: { type: 'integer' },\n      date: { type: 'date' },\n      duree: { type: ['integer', 'null'] },\n      dateDebut: { type: 'date' },\n      dateFin: { type: 'date' },\n      surface: { type: 'float' },\n      volume: { type: 'float' },\n      volumeUnite: { type: ['string', 'null'] },\n      visas: { type: ['json', 'null'] },\n      engagement: { type: ['float', 'null'] },\n      engagementDevise: { type: ['string', 'null'] },\n      sourceIndisponible: { type: ['boolean', 'null'] }\n    }\n  }\n\n  static relationMappings = {\n    type: {\n      relation: Model.BelongsToOneRelation,\n      modelClass: EtapesTypes,\n      join: {\n        from: 'titresEtapes.typeId',\n        to: 'etapesTypes.id'\n      }\n    },\n    statut: {\n      relation: Model.BelongsToOneRelation,\n      modelClass: EtapesStatuts,\n      join: {\n        from: 'titresEtapes.statutId',\n        to: 'etapesStatuts.id'\n      }\n    },\n    substances: {\n      relation: Model.ManyToManyRelation,\n      modelClass: Substances,\n      join: {\n        from: 'titresEtapes.id',\n        through: {\n          from: 'titresSubstances.titreEtapeId',\n          to: 'titresSubstances.substanceId',\n          extra: ['ordre', 'connexe']\n        },\n        to: 'substances.id'\n      }\n    },\n    points: {\n      relation: Model.HasManyRelation,\n      modelClass: TitresPoints,\n      join: {\n        from: 'titresEtapes.id',\n        to: 'titresPoints.titreEtapeId'\n      }\n    },\n    titulaires: {\n      relation: Model.ManyToManyRelation,\n      modelClass: Entreprises,\n      join: {\n        from: 'titresEtapes.id',\n        through: {\n          from: 'titresTitulaires.titreEtapeId',\n          to: 'titresTitulaires.entrepriseId'\n        },\n        to: 'entreprises.id'\n      }\n    },\n    amodiataires: {\n      relation: Model.ManyToManyRelation,\n      modelClass: Entreprises,\n      join: {\n        from: 'titresEtapes.id',\n        through: {\n          from: 'titresAmodiataires.titreEtapeId',\n          to: 'titresAmodiataires.entrepriseId'\n        },\n        to: 'entreprises.id'\n      }\n    },\n    administrations: {\n      relation: Model.ManyToManyRelation,\n      modelClass: Administrations,\n      join: {\n        from: 'titresEtapes.id',\n        through: {\n          from: 'titresAdministrations.titreEtapeId',\n          to: 'titresAdministrations.administrationId'\n        },\n        to: 'administrations.id'\n      }\n    },\n    documents: {\n      relation: Model.HasManyRelation,\n      modelClass: TitresDocuments,\n      join: {\n        from: 'titresEtapes.id',\n        to: 'titresDocuments.titreEtapeId'\n      }\n    },\n    emprises: {\n      relation: Model.ManyToManyRelation,\n      modelClass: Emprises,\n      join: {\n        from: 'titresEtapes.id',\n        through: {\n          from: 'titresEmprises.titreEtapeId',\n          to: 'titresEmprises.empriseId'\n        },\n        to: 'emprises.id'\n      }\n    },\n    erreurs: {\n      relation: Model.BelongsToOneRelation,\n      modelClass: TitresErreurs,\n      join: {\n        from: 'titresEtapes.id',\n        to: 'titresErreurs.titreEtapeId'\n      }\n    },\n    titresSubstances: {\n      relation: Model.HasManyRelation,\n      modelClass: TitresSubstances,\n      join: {\n        from: 'titresEtapes.id',\n        to: 'titresSubstances.titreEtapeId'\n      }\n    },\n    titresTitulaires: {\n      relation: Model.HasManyRelation,\n      modelClass: TitresTitulaires,\n      join: {\n        from: 'titresEtapes.id',\n        to: 'titresTitulaires.titreEtapeId'\n      }\n    },\n    titresAmodiataires: {\n      relation: Model.HasManyRelation,\n      modelClass: TitresAmodiataires,\n      join: {\n        from: 'titresEtapes.id',\n        to: 'titresAmodiataires.titreEtapeId'\n      }\n    },\n    titresAdministrations: {\n      relation: Model.HasManyRelation,\n      modelClass: TitresAdministrations,\n      join: {\n        from: 'titresEtapes.id',\n        to: 'titresAdministrations.titreEtapeId'\n      }\n    },\n    titresEmprises: {\n      relation: Model.HasManyRelation,\n      modelClass: TitresEmprises,\n      join: {\n        from: 'titresEtapes.id',\n        to: 'titresEmprises.titreEtapeId'\n      }\n    }\n  }\n\n  static namedFilters = {\n    orderDesc: builder => {\n      builder.orderBy('ordre', 'desc')\n    }\n  }\n}\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/database/models/titres-etapes.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 222,
    "kind": "class",
    "name": "TitresEtapes",
    "memberof": "src/database/models/titres-etapes.js",
    "static": true,
    "longname": "src/database/models/titres-etapes.js~TitresEtapes",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/models/titres-etapes.js",
    "importStyle": "TitresEtapes",
    "description": null,
    "lineNumber": 18,
    "undocument": true,
    "interface": false,
    "extends": [
      "objection~Model"
    ]
  },
  {
    "__docId__": 223,
    "kind": "member",
    "name": "tableName",
    "memberof": "src/database/models/titres-etapes.js~TitresEtapes",
    "static": true,
    "longname": "src/database/models/titres-etapes.js~TitresEtapes.tableName",
    "access": "public",
    "description": null,
    "lineNumber": 19,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 224,
    "kind": "member",
    "name": "jsonSchema",
    "memberof": "src/database/models/titres-etapes.js~TitresEtapes",
    "static": true,
    "longname": "src/database/models/titres-etapes.js~TitresEtapes.jsonSchema",
    "access": "public",
    "description": null,
    "lineNumber": 21,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 225,
    "kind": "member",
    "name": "relationMappings",
    "memberof": "src/database/models/titres-etapes.js~TitresEtapes",
    "static": true,
    "longname": "src/database/models/titres-etapes.js~TitresEtapes.relationMappings",
    "access": "public",
    "description": null,
    "lineNumber": 45,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 226,
    "kind": "member",
    "name": "namedFilters",
    "memberof": "src/database/models/titres-etapes.js~TitresEtapes",
    "static": true,
    "longname": "src/database/models/titres-etapes.js~TitresEtapes.namedFilters",
    "access": "public",
    "description": null,
    "lineNumber": 189,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 227,
    "kind": "file",
    "name": "src/database/models/titres-phases.js",
    "content": "import { Model } from 'objection'\nimport PhasesStatuts from './phases-statuts'\n\nexport default class TitresPhases extends Model {\n  static tableName = 'titresPhases'\n\n  static jsonSchema = {\n    type: 'object',\n    required: ['titreDemarcheId', 'statutId'],\n\n    properties: {\n      titreDemarcheId: { type: 'string', maxLength: 128 },\n      statutId: { type: 'string', maxLength: 3 },\n      dateDebut: { type: 'date' },\n      dateFin: { type: 'date' }\n    }\n  }\n\n  static relationMappings = {\n    statut: {\n      relation: Model.BelongsToOneRelation,\n      modelClass: PhasesStatuts,\n      join: {\n        from: 'titresPhases.statutId',\n        to: 'phasesStatuts.id'\n      }\n    }\n  }\n\n  static idColumn = 'titreDemarcheId'\n}\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/database/models/titres-phases.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 228,
    "kind": "class",
    "name": "TitresPhases",
    "memberof": "src/database/models/titres-phases.js",
    "static": true,
    "longname": "src/database/models/titres-phases.js~TitresPhases",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/models/titres-phases.js",
    "importStyle": "TitresPhases",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "interface": false,
    "extends": [
      "objection~Model"
    ]
  },
  {
    "__docId__": 229,
    "kind": "member",
    "name": "tableName",
    "memberof": "src/database/models/titres-phases.js~TitresPhases",
    "static": true,
    "longname": "src/database/models/titres-phases.js~TitresPhases.tableName",
    "access": "public",
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 230,
    "kind": "member",
    "name": "jsonSchema",
    "memberof": "src/database/models/titres-phases.js~TitresPhases",
    "static": true,
    "longname": "src/database/models/titres-phases.js~TitresPhases.jsonSchema",
    "access": "public",
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 231,
    "kind": "member",
    "name": "relationMappings",
    "memberof": "src/database/models/titres-phases.js~TitresPhases",
    "static": true,
    "longname": "src/database/models/titres-phases.js~TitresPhases.relationMappings",
    "access": "public",
    "description": null,
    "lineNumber": 19,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 232,
    "kind": "member",
    "name": "idColumn",
    "memberof": "src/database/models/titres-phases.js~TitresPhases",
    "static": true,
    "longname": "src/database/models/titres-phases.js~TitresPhases.idColumn",
    "access": "public",
    "description": null,
    "lineNumber": 30,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 233,
    "kind": "file",
    "name": "src/database/models/titres-points-references.js",
    "content": "import { Model } from 'objection'\n\nexport default class TitresPointsReferences extends Model {\n  static tableName = 'titresPointsReferences'\n\n  static jsonSchema = {\n    type: 'object',\n    required: ['titrePointId', 'id', 'systeme', 'coordonnees'],\n\n    properties: {\n      id: { type: 'string' },\n      titrePointId: { type: 'string' },\n      systeme: { type: 'string' },\n      coordonnees: {\n        type: 'object',\n        properties: {\n          x: { type: 'float' },\n          y: { type: 'float' }\n        }\n      }\n    }\n  }\n}\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/database/models/titres-points-references.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 234,
    "kind": "class",
    "name": "TitresPointsReferences",
    "memberof": "src/database/models/titres-points-references.js",
    "static": true,
    "longname": "src/database/models/titres-points-references.js~TitresPointsReferences",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/models/titres-points-references.js",
    "importStyle": "TitresPointsReferences",
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "interface": false,
    "extends": [
      "objection~Model"
    ]
  },
  {
    "__docId__": 235,
    "kind": "member",
    "name": "tableName",
    "memberof": "src/database/models/titres-points-references.js~TitresPointsReferences",
    "static": true,
    "longname": "src/database/models/titres-points-references.js~TitresPointsReferences.tableName",
    "access": "public",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 236,
    "kind": "member",
    "name": "jsonSchema",
    "memberof": "src/database/models/titres-points-references.js~TitresPointsReferences",
    "static": true,
    "longname": "src/database/models/titres-points-references.js~TitresPointsReferences.jsonSchema",
    "access": "public",
    "description": null,
    "lineNumber": 6,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 237,
    "kind": "file",
    "name": "src/database/models/titres-points.js",
    "content": "import { Model } from 'objection'\nimport TitresPointsReferences from './titres-points-references'\n\nexport default class TitresPoints extends Model {\n  static tableName = 'titresPoints'\n\n  static jsonSchema = {\n    type: 'object',\n    required: [\n      'id',\n      'titreEtapeId',\n      'coordonnees',\n      'groupe',\n      'contour',\n      'point'\n    ],\n\n    properties: {\n      id: { type: 'string' },\n      titreEtapeId: { type: 'string', maxLength: 128 },\n      coordonnees: {\n        type: 'object',\n        properties: {\n          x: { type: 'float' },\n          y: { type: 'float' }\n        }\n      },\n      groupe: { type: 'integer' },\n      contour: { type: 'integer' },\n      point: { type: 'integer' },\n      nom: { type: ['string', 'null'] },\n      description: { type: ['string', 'null'] },\n      securite: { type: ['boolean', 'null'] }\n    }\n  }\n\n  static relationMappings = {\n    references: {\n      relation: Model.HasManyRelation,\n      modelClass: TitresPointsReferences,\n      join: {\n        from: 'titresPoints.id',\n        to: 'titresPointsReferences.titrePointId'\n      }\n    }\n  }\n\n  $formatDatabaseJson(json) {\n    if (json.coordonnees) {\n      const t = `${json.coordonnees.x},${json.coordonnees.y}`\n      json.coordonnees = t\n    }\n    json = super.$formatDatabaseJson(json)\n    return json\n  }\n\n  $parseDatabaseJson(json) {\n    json = super.$parseDatabaseJson(json)\n    if (json) {\n      // console.log('--------------->', json)\n    }\n    return json\n  }\n}\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/database/models/titres-points.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 238,
    "kind": "class",
    "name": "TitresPoints",
    "memberof": "src/database/models/titres-points.js",
    "static": true,
    "longname": "src/database/models/titres-points.js~TitresPoints",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/models/titres-points.js",
    "importStyle": "TitresPoints",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "interface": false,
    "extends": [
      "objection~Model"
    ]
  },
  {
    "__docId__": 239,
    "kind": "member",
    "name": "tableName",
    "memberof": "src/database/models/titres-points.js~TitresPoints",
    "static": true,
    "longname": "src/database/models/titres-points.js~TitresPoints.tableName",
    "access": "public",
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 240,
    "kind": "member",
    "name": "jsonSchema",
    "memberof": "src/database/models/titres-points.js~TitresPoints",
    "static": true,
    "longname": "src/database/models/titres-points.js~TitresPoints.jsonSchema",
    "access": "public",
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 241,
    "kind": "member",
    "name": "relationMappings",
    "memberof": "src/database/models/titres-points.js~TitresPoints",
    "static": true,
    "longname": "src/database/models/titres-points.js~TitresPoints.relationMappings",
    "access": "public",
    "description": null,
    "lineNumber": 37,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 242,
    "kind": "method",
    "name": "$formatDatabaseJson",
    "memberof": "src/database/models/titres-points.js~TitresPoints",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/database/models/titres-points.js~TitresPoints#$formatDatabaseJson",
    "access": "public",
    "description": null,
    "lineNumber": 48,
    "undocument": true,
    "params": [
      {
        "name": "json",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 243,
    "kind": "method",
    "name": "$parseDatabaseJson",
    "memberof": "src/database/models/titres-points.js~TitresPoints",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/database/models/titres-points.js~TitresPoints#$parseDatabaseJson",
    "access": "public",
    "description": null,
    "lineNumber": 57,
    "undocument": true,
    "params": [
      {
        "name": "json",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 244,
    "kind": "file",
    "name": "src/database/models/titres-substances.js",
    "content": "import { Model } from 'objection'\nimport Substances from './substances'\n\nexport default class TitresSubstances extends Model {\n  static tableName = 'titresSubstances'\n\n  static jsonSchema = {\n    type: 'object',\n    required: ['substanceId', 'titreEtapeId'],\n\n    properties: {\n      substanceId: { type: 'string', maxLength: 4 },\n      titreEtapeId: { type: 'string', maxLength: 128 },\n      connexe: { type: 'boolean' },\n      ordre: { type: 'integer' }\n    }\n  }\n\n  static relationMappings = {\n    substance: {\n      relation: Model.BelongsToOneRelation,\n      modelClass: Substances,\n      join: {\n        from: 'titresSubstances.substanceId',\n        to: 'substances.id'\n      }\n    }\n  }\n\n  static idColumn = ['substanceId', 'titreEtapeId']\n}\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/database/models/titres-substances.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 245,
    "kind": "class",
    "name": "TitresSubstances",
    "memberof": "src/database/models/titres-substances.js",
    "static": true,
    "longname": "src/database/models/titres-substances.js~TitresSubstances",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/models/titres-substances.js",
    "importStyle": "TitresSubstances",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "interface": false,
    "extends": [
      "objection~Model"
    ]
  },
  {
    "__docId__": 246,
    "kind": "member",
    "name": "tableName",
    "memberof": "src/database/models/titres-substances.js~TitresSubstances",
    "static": true,
    "longname": "src/database/models/titres-substances.js~TitresSubstances.tableName",
    "access": "public",
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 247,
    "kind": "member",
    "name": "jsonSchema",
    "memberof": "src/database/models/titres-substances.js~TitresSubstances",
    "static": true,
    "longname": "src/database/models/titres-substances.js~TitresSubstances.jsonSchema",
    "access": "public",
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 248,
    "kind": "member",
    "name": "relationMappings",
    "memberof": "src/database/models/titres-substances.js~TitresSubstances",
    "static": true,
    "longname": "src/database/models/titres-substances.js~TitresSubstances.relationMappings",
    "access": "public",
    "description": null,
    "lineNumber": 19,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 249,
    "kind": "member",
    "name": "idColumn",
    "memberof": "src/database/models/titres-substances.js~TitresSubstances",
    "static": true,
    "longname": "src/database/models/titres-substances.js~TitresSubstances.idColumn",
    "access": "public",
    "description": null,
    "lineNumber": 30,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 250,
    "kind": "file",
    "name": "src/database/models/titres-titulaires.js",
    "content": "import { Model } from 'objection'\nimport Entreprises from './entreprises'\n\nexport default class TitresTitulaires extends Model {\n  static tableName = 'titresTitulaires'\n\n  static jsonSchema = {\n    type: 'object',\n    required: ['entrepriseId', 'titreEtapeId'],\n\n    properties: {\n      entrepriseId: { type: 'string', maxLength: 64 },\n      titreEtapeId: { type: 'string', maxLength: 128 }\n    }\n  }\n\n  static relationMappings = {\n    entreprise: {\n      relation: Model.BelongsToOneRelation,\n      modelClass: Entreprises,\n      join: {\n        from: 'titresTitulaires.entrepriseId',\n        to: 'entreprises.id'\n      }\n    }\n  }\n}\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/database/models/titres-titulaires.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 251,
    "kind": "class",
    "name": "TitresTitulaires",
    "memberof": "src/database/models/titres-titulaires.js",
    "static": true,
    "longname": "src/database/models/titres-titulaires.js~TitresTitulaires",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/models/titres-titulaires.js",
    "importStyle": "TitresTitulaires",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "interface": false,
    "extends": [
      "objection~Model"
    ]
  },
  {
    "__docId__": 252,
    "kind": "member",
    "name": "tableName",
    "memberof": "src/database/models/titres-titulaires.js~TitresTitulaires",
    "static": true,
    "longname": "src/database/models/titres-titulaires.js~TitresTitulaires.tableName",
    "access": "public",
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 253,
    "kind": "member",
    "name": "jsonSchema",
    "memberof": "src/database/models/titres-titulaires.js~TitresTitulaires",
    "static": true,
    "longname": "src/database/models/titres-titulaires.js~TitresTitulaires.jsonSchema",
    "access": "public",
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 254,
    "kind": "member",
    "name": "relationMappings",
    "memberof": "src/database/models/titres-titulaires.js~TitresTitulaires",
    "static": true,
    "longname": "src/database/models/titres-titulaires.js~TitresTitulaires.relationMappings",
    "access": "public",
    "description": null,
    "lineNumber": 17,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 255,
    "kind": "file",
    "name": "src/database/models/titres-travaux-rapports.js",
    "content": "import { Model } from 'objection'\n\nexport default class TitresTravauxRapports extends Model {\n  static tableName = 'titresTravauxRapports'\n\n  static jsonSchema = {\n    type: 'object',\n    required: ['id', 'titreId', 'date', 'contenu'],\n    properties: {\n      id: { type: 'string' },\n      titreId: { type: 'string' },\n      date: { type: 'date' },\n      confirmation: { type: 'boolean' },\n      contenu: { type: 'json' }\n    }\n  }\n}\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/database/models/titres-travaux-rapports.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 256,
    "kind": "class",
    "name": "TitresTravauxRapports",
    "memberof": "src/database/models/titres-travaux-rapports.js",
    "static": true,
    "longname": "src/database/models/titres-travaux-rapports.js~TitresTravauxRapports",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/models/titres-travaux-rapports.js",
    "importStyle": "TitresTravauxRapports",
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "interface": false,
    "extends": [
      "objection~Model"
    ]
  },
  {
    "__docId__": 257,
    "kind": "member",
    "name": "tableName",
    "memberof": "src/database/models/titres-travaux-rapports.js~TitresTravauxRapports",
    "static": true,
    "longname": "src/database/models/titres-travaux-rapports.js~TitresTravauxRapports.tableName",
    "access": "public",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 258,
    "kind": "member",
    "name": "jsonSchema",
    "memberof": "src/database/models/titres-travaux-rapports.js~TitresTravauxRapports",
    "static": true,
    "longname": "src/database/models/titres-travaux-rapports.js~TitresTravauxRapports.jsonSchema",
    "access": "public",
    "description": null,
    "lineNumber": 6,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 259,
    "kind": "file",
    "name": "src/database/models/titres.js",
    "content": "import { Model } from 'objection'\nimport Domaines from './domaines'\nimport Types from './types'\nimport Statuts from './statuts'\nimport TitresDemarches from './titres-demarches'\nimport TitresEtapes from './titres-etapes'\nimport Substances from './substances'\nimport TitresPoints from './titres-points'\nimport Entreprises from './entreprises'\nimport Administrations from './administrations'\nimport TitresTravauxRapports from './titres-travaux-rapports'\n\nexport default class Titres extends Model {\n  static tableName = 'titres'\n\n  static jsonSchema = {\n    type: 'object',\n    required: ['id', 'nom', 'domaineId', 'typeId', 'statutId'],\n    properties: {\n      id: { type: 'string' },\n      nom: { type: 'string' },\n      domaineId: { type: 'string', maxLength: 1 },\n      typeId: { type: 'string', maxLength: 3 },\n      statutId: { type: 'string', maxLength: 3 },\n      references: { type: ['json', 'null'] },\n      substancesTitreEtapeId: { type: ['string', 'null'], maxLength: 128 },\n      pointsTitreEtapeId: { type: ['string', 'null'], maxLength: 128 },\n      titulairesTitreEtapeId: { type: ['string', 'null'], maxLength: 128 },\n      amodiatairesTitreEtapeId: { type: ['string', 'null'], maxLength: 128 },\n      administrationsTitreEtapeId: {\n        type: ['string', 'null'],\n        maxLength: 128\n      },\n      surfaceTitreEtapeId: { type: ['string', 'null'], maxLength: 128 },\n      volumeTitreEtapeId: { type: ['string', 'null'], maxLength: 128 }\n    }\n  }\n\n  static relationMappings = {\n    domaine: {\n      relation: Model.BelongsToOneRelation,\n      modelClass: Domaines,\n      join: {\n        from: 'titres.domaineId',\n        to: 'domaines.id'\n      }\n    },\n    type: {\n      relation: Model.BelongsToOneRelation,\n      modelClass: Types,\n      join: {\n        from: 'titres.typeId',\n        to: 'types.id'\n      }\n    },\n    statut: {\n      relation: Model.BelongsToOneRelation,\n      modelClass: Statuts,\n      join: {\n        from: 'titres.statutId',\n        to: 'statuts.id'\n      }\n    },\n    demarches: {\n      relation: Model.HasManyRelation,\n      modelClass: TitresDemarches,\n      join: {\n        from: 'titres.id',\n        to: 'titresDemarches.titreId'\n      }\n    },\n    surfaceEtape: {\n      relation: Model.BelongsToOneRelation,\n      modelClass: TitresEtapes,\n      join: {\n        from: 'titres.surfaceTitreEtapeId',\n        to: 'titresEtapes.id'\n      },\n      modify: builder => builder.select('surface')\n    },\n    volumeEtape: {\n      relation: Model.BelongsToOneRelation,\n      modelClass: TitresEtapes,\n      join: {\n        from: 'titres.volumeTitreEtapeId',\n        to: 'titresEtapes.id'\n      },\n      modify: builder => builder.select(['volume', 'volumeUnite'])\n    },\n    substances: {\n      relation: Model.ManyToManyRelation,\n      modelClass: Substances,\n      join: {\n        from: 'titres.substancesTitreEtapeId',\n        through: {\n          from: 'titresSubstances.titreEtapeId',\n          to: 'titresSubstances.substanceId',\n          extra: ['ordre', 'connexe']\n        },\n        to: 'substances.id'\n      }\n    },\n    points: {\n      relation: Model.HasManyRelation,\n      modelClass: TitresPoints,\n      join: {\n        from: 'titres.pointsTitreEtapeId',\n        to: 'titresPoints.titreEtapeId'\n      }\n    },\n    titulaires: {\n      relation: Model.ManyToManyRelation,\n      modelClass: Entreprises,\n      join: {\n        from: 'titres.titulairesTitreEtapeId',\n        through: {\n          from: 'titresTitulaires.titreEtapeId',\n          to: 'titresTitulaires.entrepriseId'\n        },\n        to: 'entreprises.id'\n      }\n    },\n    amodiataires: {\n      relation: Model.ManyToManyRelation,\n      modelClass: Entreprises,\n      join: {\n        from: 'titres.amodiatairesTitreEtapeId',\n        through: {\n          from: 'titresAmodiataires.titreEtapeId',\n          to: 'titresAmodiataires.entrepriseId'\n        },\n        to: 'entreprises.id'\n      }\n    },\n    administrations: {\n      relation: Model.ManyToManyRelation,\n      modelClass: Administrations,\n      join: {\n        from: 'titres.administrationsTitreEtapeId',\n        through: {\n          from: 'titresAdministrations.titreEtapeId',\n          to: 'titresAdministrations.administrationId'\n        },\n        to: 'administrations.id'\n      }\n    },\n    travauxRapports: {\n      relation: Model.HasManyRelation,\n      modelClass: TitresTravauxRapports,\n      join: {\n        from: 'titres.id',\n        to: 'titresTravauxRapports.titreId'\n      }\n    }\n  }\n}\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/database/models/titres.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 260,
    "kind": "class",
    "name": "Titres",
    "memberof": "src/database/models/titres.js",
    "static": true,
    "longname": "src/database/models/titres.js~Titres",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/models/titres.js",
    "importStyle": "Titres",
    "description": null,
    "lineNumber": 13,
    "undocument": true,
    "interface": false,
    "extends": [
      "objection~Model"
    ]
  },
  {
    "__docId__": 261,
    "kind": "member",
    "name": "tableName",
    "memberof": "src/database/models/titres.js~Titres",
    "static": true,
    "longname": "src/database/models/titres.js~Titres.tableName",
    "access": "public",
    "description": null,
    "lineNumber": 14,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 262,
    "kind": "member",
    "name": "jsonSchema",
    "memberof": "src/database/models/titres.js~Titres",
    "static": true,
    "longname": "src/database/models/titres.js~Titres.jsonSchema",
    "access": "public",
    "description": null,
    "lineNumber": 16,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 263,
    "kind": "member",
    "name": "relationMappings",
    "memberof": "src/database/models/titres.js~Titres",
    "static": true,
    "longname": "src/database/models/titres.js~Titres.relationMappings",
    "access": "public",
    "description": null,
    "lineNumber": 39,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 264,
    "kind": "file",
    "name": "src/database/models/types.js",
    "content": "import { Model } from 'objection'\n\nimport DemarchesTypes from './demarches-types'\n\nexport default class Types extends Model {\n  static tableName = 'types'\n\n  static jsonSchema = {\n    type: 'object',\n    required: ['id', 'nom'],\n\n    properties: {\n      id: { type: 'string', maxLength: 3 },\n      nom: { type: 'string' }\n    }\n  }\n\n  static relationMappings = {\n    types: {\n      relation: Model.ManyToManyRelation,\n      modelClass: DemarchesTypes,\n      join: {\n        from: 'types.id',\n        through: {\n          from: 'demarchesTypes__types.typeId',\n          to: 'demarchesTypes__types.demarcheTypeId',\n          extra: [\n            'dureeMax',\n            'acceptationImplicite',\n            'delaiImplicite',\n            'delaiRecours',\n            'legalRef',\n            'legalLien',\n            'dateDebut',\n            'dateFin'\n          ]\n        },\n        to: 'demarchesTypes.id'\n      }\n    }\n  }\n}\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/database/models/types.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 265,
    "kind": "class",
    "name": "Types",
    "memberof": "src/database/models/types.js",
    "static": true,
    "longname": "src/database/models/types.js~Types",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/models/types.js",
    "importStyle": "Types",
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "interface": false,
    "extends": [
      "objection~Model"
    ]
  },
  {
    "__docId__": 266,
    "kind": "member",
    "name": "tableName",
    "memberof": "src/database/models/types.js~Types",
    "static": true,
    "longname": "src/database/models/types.js~Types.tableName",
    "access": "public",
    "description": null,
    "lineNumber": 6,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 267,
    "kind": "member",
    "name": "jsonSchema",
    "memberof": "src/database/models/types.js~Types",
    "static": true,
    "longname": "src/database/models/types.js~Types.jsonSchema",
    "access": "public",
    "description": null,
    "lineNumber": 8,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 268,
    "kind": "member",
    "name": "relationMappings",
    "memberof": "src/database/models/types.js~Types",
    "static": true,
    "longname": "src/database/models/types.js~Types.relationMappings",
    "access": "public",
    "description": null,
    "lineNumber": 18,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 269,
    "kind": "file",
    "name": "src/database/models/utilisateurs.js",
    "content": "import { Model } from 'objection'\nimport Permissions from './permissions'\nimport { join } from 'path'\n\nexport default class Utilisateurs extends Model {\n  static tableName = 'utilisateurs'\n\n  static jsonSchema = {\n    type: 'object',\n    required: ['id', 'email', 'motDePasse'],\n\n    properties: {\n      id: { type: 'string', minLength: 1, maxLength: 64 },\n      email: { type: 'string' },\n      motDePasse: { type: 'string', minLength: 8, maxLength: 255 },\n      nom: { type: ['string', 'null'] },\n      prenom: { type: ['string', 'null'] },\n      telephone_fixe: { type: ['string', 'null'] },\n      telephone_mobile: { type: ['string', 'null'] },\n      entrepriseId: { type: ['string', 'null'], maxLength: 64 },\n      administrationId: { type: ['string', 'null'], maxLength: 64 },\n      permissionId: { type: ['string', 'null'], maxLength: 12 },\n      preferences: { type: ['json', 'null'] }\n    }\n  }\n\n  static relationMappings = {\n    permission: {\n      relation: Model.BelongsToOneRelation,\n      modelClass: Permissions,\n      join: {\n        from: 'utilisateurs.permissionId',\n        to: 'permissions.id'\n      }\n      // modify: builder => builder.select('id')\n    },\n    administration: {\n      relation: Model.BelongsToOneRelation,\n      modelClass: join(__dirname, 'administrations'),\n      join: {\n        from: 'utilisateurs.administrationId',\n        to: 'administrations.id'\n      }\n    },\n    entreprise: {\n      relation: Model.BelongsToOneRelation,\n      modelClass: join(__dirname, 'entreprises'),\n      join: {\n        from: 'utilisateurs.entrepriseId',\n        to: 'entreprises.id'\n      }\n    }\n  }\n}\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/database/models/utilisateurs.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 270,
    "kind": "class",
    "name": "Utilisateurs",
    "memberof": "src/database/models/utilisateurs.js",
    "static": true,
    "longname": "src/database/models/utilisateurs.js~Utilisateurs",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/models/utilisateurs.js",
    "importStyle": "Utilisateurs",
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "interface": false,
    "extends": [
      "objection~Model"
    ]
  },
  {
    "__docId__": 271,
    "kind": "member",
    "name": "tableName",
    "memberof": "src/database/models/utilisateurs.js~Utilisateurs",
    "static": true,
    "longname": "src/database/models/utilisateurs.js~Utilisateurs.tableName",
    "access": "public",
    "description": null,
    "lineNumber": 6,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 272,
    "kind": "member",
    "name": "jsonSchema",
    "memberof": "src/database/models/utilisateurs.js~Utilisateurs",
    "static": true,
    "longname": "src/database/models/utilisateurs.js~Utilisateurs.jsonSchema",
    "access": "public",
    "description": null,
    "lineNumber": 8,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 273,
    "kind": "member",
    "name": "relationMappings",
    "memberof": "src/database/models/utilisateurs.js~Utilisateurs",
    "static": true,
    "longname": "src/database/models/utilisateurs.js~Utilisateurs.relationMappings",
    "access": "public",
    "description": null,
    "lineNumber": 27,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 274,
    "kind": "file",
    "name": "src/database/queries/_options.js",
    "content": "const utilisateurs = {\n  eager: '[permission, administration, entreprise]',\n  update: {\n    relate: ['permission', 'administration', 'entreprise'],\n    unrelate: ['permission', 'administration', 'entreprise'],\n    noDelete: ['permission', 'administration', 'entreprise']\n  }\n}\n\nconst administrations = {\n  eager: `utilisateurs.permission`\n}\n\nconst entreprises = {\n  eager: `utilisateurs.permission`\n}\n\nconst substances = {\n  eager: `legales.[code, domaine]`\n}\n\nconst points = {\n  eager: `references`\n}\n\nconst etapes = {\n  eager: `[points.${points.eager}, type, statut, documents, substances.${\n    substances.eager\n  }, titresSubstances, titulaires.${\n    entreprises.eager\n  }, titresTitulaires, amodiataires.${\n    entreprises.eager\n  }, titresAmodiataires, administrations.${\n    administrations.eager\n  }, titresAdministrations, emprises, titresEmprises]`,\n  update: {\n    relate: [\n      'type',\n      'statut',\n      'titulaires',\n      'amodiataires',\n      'substances',\n      'emprises',\n      'administrations'\n    ],\n    unrelate: [\n      'type',\n      'statut',\n      'titulaires',\n      'amodiataires',\n      'substances',\n      'emprises',\n      'administrations'\n    ],\n    noDelete: []\n  }\n}\n\nconst phases = {\n  eager: 'statut'\n}\n\nconst demarches = {\n  eager: `[type, statut, phase.${phases.eager}, etapes(orderDesc).${\n    etapes.eager\n  }]`\n}\n\nconst titres = {\n  eager: `[type, domaine, statut, points, substances.${\n    substances.eager\n  }, titulaires.${entreprises.eager}, amodiataires.${\n    entreprises.eager\n  }, administrations.${administrations.eager}, demarches(orderDesc).${\n    demarches.eager\n  }, surfaceEtape, volumeEtape, travauxRapports]`,\n  update: {\n    relate: ['type', 'domaine', 'statut', 'substances'],\n    unrelate: ['type', 'domaine', 'statut', 'substances'],\n    insertMissing: ['phases', 'phases.points']\n  }\n}\n\nconst demarchesTypes = {\n  eager: `etapesTypes.etapesStatuts`\n}\n\nexport default {\n  utilisateurs,\n  phases,\n  etapes,\n  demarches,\n  titres,\n  substances,\n  entreprises,\n  demarchesTypes\n}\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/database/queries/_options.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 275,
    "kind": "variable",
    "name": "utilisateurs",
    "memberof": "src/database/queries/_options.js",
    "static": true,
    "longname": "src/database/queries/_options.js~utilisateurs",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/database/queries/_options.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 1,
    "undocument": true,
    "type": {
      "types": [
        "{\"eager\": string, \"update\": *}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 276,
    "kind": "variable",
    "name": "administrations",
    "memberof": "src/database/queries/_options.js",
    "static": true,
    "longname": "src/database/queries/_options.js~administrations",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/database/queries/_options.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 10,
    "undocument": true,
    "type": {
      "types": [
        "{\"eager\": *}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 277,
    "kind": "variable",
    "name": "entreprises",
    "memberof": "src/database/queries/_options.js",
    "static": true,
    "longname": "src/database/queries/_options.js~entreprises",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/database/queries/_options.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 14,
    "undocument": true,
    "type": {
      "types": [
        "{\"eager\": *}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 278,
    "kind": "variable",
    "name": "substances",
    "memberof": "src/database/queries/_options.js",
    "static": true,
    "longname": "src/database/queries/_options.js~substances",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/database/queries/_options.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 18,
    "undocument": true,
    "type": {
      "types": [
        "{\"eager\": *}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 279,
    "kind": "variable",
    "name": "points",
    "memberof": "src/database/queries/_options.js",
    "static": true,
    "longname": "src/database/queries/_options.js~points",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/database/queries/_options.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 22,
    "undocument": true,
    "type": {
      "types": [
        "{\"eager\": *}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 280,
    "kind": "variable",
    "name": "etapes",
    "memberof": "src/database/queries/_options.js",
    "static": true,
    "longname": "src/database/queries/_options.js~etapes",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/database/queries/_options.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 26,
    "undocument": true,
    "type": {
      "types": [
        "{\"eager\": *, \"update\": *}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 281,
    "kind": "variable",
    "name": "phases",
    "memberof": "src/database/queries/_options.js",
    "static": true,
    "longname": "src/database/queries/_options.js~phases",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/database/queries/_options.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 59,
    "undocument": true,
    "type": {
      "types": [
        "{\"eager\": string}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 282,
    "kind": "variable",
    "name": "demarches",
    "memberof": "src/database/queries/_options.js",
    "static": true,
    "longname": "src/database/queries/_options.js~demarches",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/database/queries/_options.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 63,
    "undocument": true,
    "type": {
      "types": [
        "{\"eager\": *}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 283,
    "kind": "variable",
    "name": "titres",
    "memberof": "src/database/queries/_options.js",
    "static": true,
    "longname": "src/database/queries/_options.js~titres",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/database/queries/_options.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 69,
    "undocument": true,
    "type": {
      "types": [
        "{\"eager\": *, \"update\": *}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 284,
    "kind": "variable",
    "name": "demarchesTypes",
    "memberof": "src/database/queries/_options.js",
    "static": true,
    "longname": "src/database/queries/_options.js~demarchesTypes",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/database/queries/_options.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 84,
    "undocument": true,
    "type": {
      "types": [
        "{\"eager\": *}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 285,
    "kind": "file",
    "name": "src/database/queries/entreprises.js",
    "content": "import Entreprises from '../models/entreprises'\nimport options from './_options'\n\nconst entrepriseGet = async id =>\n  Entreprises.query()\n    .findById(id)\n    .eager(options.entreprises.eager)\n\nconst entreprisesGet = async ({ noms }) =>\n  Entreprises.query()\n    .skipUndefined()\n    .eager(options.entreprises.eager)\n\nexport { entrepriseGet, entreprisesGet }\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/database/queries/entreprises.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 286,
    "kind": "function",
    "name": "entrepriseGet",
    "memberof": "src/database/queries/entreprises.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/database/queries/entreprises.js~entrepriseGet",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/queries/entreprises.js",
    "importStyle": "{entrepriseGet}",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "params": [
      {
        "name": "id",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 287,
    "kind": "function",
    "name": "entreprisesGet",
    "memberof": "src/database/queries/entreprises.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/database/queries/entreprises.js~entreprisesGet",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/queries/entreprises.js",
    "importStyle": "{entreprisesGet}",
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"noms\": *}"
        ],
        "defaultRaw": {
          "noms": null
        },
        "defaultValue": "{\"noms\":null}"
      }
    ],
    "return": null
  },
  {
    "__docId__": 288,
    "kind": "file",
    "name": "src/database/queries/metas.js",
    "content": "import Types from '../models/types'\nimport Domaines from '../models/domaines'\nimport Statuts from '../models/statuts'\nimport DemarchesTypes from '../models/demarches-types'\nimport options from './_options'\n\nconst typesGet = async () => Types.query()\n\nconst domainesGet = async () => Domaines.query()\n\nconst statutsGet = async () => Statuts.query()\n\nconst demarchesTypesGet = async () =>\n  DemarchesTypes.query().eager(options.demarchesTypes.eager)\n\nexport { typesGet, domainesGet, statutsGet, demarchesTypesGet }\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/database/queries/metas.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 289,
    "kind": "function",
    "name": "typesGet",
    "memberof": "src/database/queries/metas.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/database/queries/metas.js~typesGet",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/queries/metas.js",
    "importStyle": "{typesGet}",
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 290,
    "kind": "function",
    "name": "domainesGet",
    "memberof": "src/database/queries/metas.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/database/queries/metas.js~domainesGet",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/queries/metas.js",
    "importStyle": "{domainesGet}",
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 291,
    "kind": "function",
    "name": "statutsGet",
    "memberof": "src/database/queries/metas.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/database/queries/metas.js~statutsGet",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/queries/metas.js",
    "importStyle": "{statutsGet}",
    "description": null,
    "lineNumber": 11,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 292,
    "kind": "function",
    "name": "demarchesTypesGet",
    "memberof": "src/database/queries/metas.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/database/queries/metas.js~demarchesTypesGet",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/queries/metas.js",
    "importStyle": "{demarchesTypesGet}",
    "description": null,
    "lineNumber": 13,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 293,
    "kind": "file",
    "name": "src/database/queries/permissions.js",
    "content": "import Permissions from '../models/permissions'\n\nconst permissionsGet = async ({ ordreMax }) =>\n  Permissions.query()\n    .skipUndefined()\n    .where('ordre', '>=', ordreMax)\n    .orderBy('ordre')\n\nconst permissionGet = async id => Permissions.query().findById(id)\n\nexport { permissionsGet, permissionGet }\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/database/queries/permissions.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 294,
    "kind": "function",
    "name": "permissionsGet",
    "memberof": "src/database/queries/permissions.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/database/queries/permissions.js~permissionsGet",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/queries/permissions.js",
    "importStyle": "{permissionsGet}",
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"ordreMax\": *}"
        ],
        "defaultRaw": {
          "ordreMax": null
        },
        "defaultValue": "{\"ordreMax\":null}"
      }
    ],
    "return": null
  },
  {
    "__docId__": 295,
    "kind": "function",
    "name": "permissionGet",
    "memberof": "src/database/queries/permissions.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/database/queries/permissions.js~permissionGet",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/queries/permissions.js",
    "importStyle": "{permissionGet}",
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "params": [
      {
        "name": "id",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 296,
    "kind": "file",
    "name": "src/database/queries/substances.js",
    "content": "import Substances from '../models/substances'\nimport options from './_options'\n\nconst substancesGet = async () =>\n  Substances.query()\n    .eager(options.substances.eager)\n    .orderBy('nom')\n\nconst substanceGet = async id =>\n  Substances.query()\n    .findById(id)\n    .eager(options.substances.eager)\n\nexport { substancesGet, substanceGet }\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/database/queries/substances.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 297,
    "kind": "function",
    "name": "substancesGet",
    "memberof": "src/database/queries/substances.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/database/queries/substances.js~substancesGet",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/queries/substances.js",
    "importStyle": "{substancesGet}",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 298,
    "kind": "function",
    "name": "substanceGet",
    "memberof": "src/database/queries/substances.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/database/queries/substances.js~substanceGet",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/queries/substances.js",
    "importStyle": "{substanceGet}",
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "params": [
      {
        "name": "id",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 299,
    "kind": "file",
    "name": "src/database/queries/titres-demarches.js",
    "content": "import TitresDemarches from '../models/titres-demarches'\nimport options from './_options'\n\nconst titresDemarchesGet = async ({ demarchesIds, titresIds }) =>\n  TitresDemarches.query()\n    .skipUndefined()\n    .eager(options.demarches.eager)\n    .orderBy('ordre')\n    .whereIn('titresDemarches.typeId', demarchesIds)\n    .whereIn('titresDemarches.titreId', titresIds)\n\nconst titreDemarcheGet = async demarcheId =>\n  TitresDemarches.query()\n    .eager(options.demarches.eager)\n    .findById(demarcheId)\n\nconst titreDemarcheStatutIdUpdate = async ({ id, statutId }) =>\n  TitresDemarches.query()\n    .skipUndefined()\n    .findById(id)\n    .patch({ statutId })\n\nconst titreDemarcheOrdreUpdate = async ({ id, ordre }) =>\n  TitresDemarches.query()\n    .skipUndefined()\n    .findById(id)\n    .patch({ ordre })\n\nexport {\n  titreDemarcheGet,\n  titresDemarchesGet,\n  titreDemarcheStatutIdUpdate,\n  titreDemarcheOrdreUpdate\n}\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/database/queries/titres-demarches.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 300,
    "kind": "function",
    "name": "titreDemarcheGet",
    "memberof": "src/database/queries/titres-demarches.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/database/queries/titres-demarches.js~titreDemarcheGet",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/queries/titres-demarches.js",
    "importStyle": "{titreDemarcheGet}",
    "description": null,
    "lineNumber": 12,
    "undocument": true,
    "params": [
      {
        "name": "demarcheId",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 301,
    "kind": "function",
    "name": "titresDemarchesGet",
    "memberof": "src/database/queries/titres-demarches.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/database/queries/titres-demarches.js~titresDemarchesGet",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/queries/titres-demarches.js",
    "importStyle": "{titresDemarchesGet}",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"demarchesIds\": *, \"titresIds\": *}"
        ],
        "defaultRaw": {
          "demarchesIds": null,
          "titresIds": null
        },
        "defaultValue": "{\"demarchesIds\":null,\"titresIds\":null}"
      }
    ],
    "return": null
  },
  {
    "__docId__": 302,
    "kind": "function",
    "name": "titreDemarcheStatutIdUpdate",
    "memberof": "src/database/queries/titres-demarches.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/database/queries/titres-demarches.js~titreDemarcheStatutIdUpdate",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/queries/titres-demarches.js",
    "importStyle": "{titreDemarcheStatutIdUpdate}",
    "description": null,
    "lineNumber": 17,
    "undocument": true,
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"id\": *, \"statutId\": *}"
        ],
        "defaultRaw": {
          "id": null,
          "statutId": null
        },
        "defaultValue": "{\"id\":null,\"statutId\":null}"
      }
    ],
    "return": null
  },
  {
    "__docId__": 303,
    "kind": "function",
    "name": "titreDemarcheOrdreUpdate",
    "memberof": "src/database/queries/titres-demarches.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/database/queries/titres-demarches.js~titreDemarcheOrdreUpdate",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/queries/titres-demarches.js",
    "importStyle": "{titreDemarcheOrdreUpdate}",
    "description": null,
    "lineNumber": 23,
    "undocument": true,
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"id\": *, \"ordre\": *}"
        ],
        "defaultRaw": {
          "id": null,
          "ordre": null
        },
        "defaultValue": "{\"id\":null,\"ordre\":null}"
      }
    ],
    "return": null
  },
  {
    "__docId__": 304,
    "kind": "file",
    "name": "src/database/queries/titres-etapes.js",
    "content": "import TitresEtapes from '../models/titres-etapes'\nimport options from './_options'\n\nconst titreEtapeGet = async titreEtapeId =>\n  TitresEtapes.query()\n    .eager(options.etapes.eager)\n    .findById(titreEtapeId)\n\nconst titresEtapesGet = async ({ etapesIds, titresDemarchesIds }) =>\n  TitresEtapes.query()\n    .skipUndefined()\n    .eager(options.etapes.eager)\n    .orderBy('ordre')\n    .whereIn('titresEtapes.typeId', etapesIds)\n    .whereIn('titresEtapes.titreDemarcheId', titresDemarchesIds)\n\nconst titreEtapeUpdate = async ({ id, props }) =>\n  TitresEtapes.query()\n    .skipUndefined()\n    .findById(id)\n    .patch(props)\n\nconst titreEtapeUpsert = async etape =>\n  TitresEtapes.query()\n    .upsertGraph(etape, options.etapes.update)\n    .eager(options.etapes.eager)\n\nexport { titreEtapeGet, titresEtapesGet, titreEtapeUpdate, titreEtapeUpsert }\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/database/queries/titres-etapes.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 305,
    "kind": "function",
    "name": "titreEtapeGet",
    "memberof": "src/database/queries/titres-etapes.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/database/queries/titres-etapes.js~titreEtapeGet",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/queries/titres-etapes.js",
    "importStyle": "{titreEtapeGet}",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "params": [
      {
        "name": "titreEtapeId",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 306,
    "kind": "function",
    "name": "titresEtapesGet",
    "memberof": "src/database/queries/titres-etapes.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/database/queries/titres-etapes.js~titresEtapesGet",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/queries/titres-etapes.js",
    "importStyle": "{titresEtapesGet}",
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"etapesIds\": *, \"titresDemarchesIds\": *}"
        ],
        "defaultRaw": {
          "etapesIds": null,
          "titresDemarchesIds": null
        },
        "defaultValue": "{\"etapesIds\":null,\"titresDemarchesIds\":null}"
      }
    ],
    "return": null
  },
  {
    "__docId__": 307,
    "kind": "function",
    "name": "titreEtapeUpdate",
    "memberof": "src/database/queries/titres-etapes.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/database/queries/titres-etapes.js~titreEtapeUpdate",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/queries/titres-etapes.js",
    "importStyle": "{titreEtapeUpdate}",
    "description": null,
    "lineNumber": 17,
    "undocument": true,
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"id\": *, \"props\": *}"
        ],
        "defaultRaw": {
          "id": null,
          "props": null
        },
        "defaultValue": "{\"id\":null,\"props\":null}"
      }
    ],
    "return": null
  },
  {
    "__docId__": 308,
    "kind": "function",
    "name": "titreEtapeUpsert",
    "memberof": "src/database/queries/titres-etapes.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/database/queries/titres-etapes.js~titreEtapeUpsert",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/queries/titres-etapes.js",
    "importStyle": "{titreEtapeUpsert}",
    "description": null,
    "lineNumber": 23,
    "undocument": true,
    "params": [
      {
        "name": "etape",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 309,
    "kind": "file",
    "name": "src/database/queries/titres-phases.js",
    "content": "import TitresPhases from '../models/titres-phases'\nimport options from './_options'\n\nconst titresPhasesGet = async () =>\n  TitresPhases.query()\n    .skipUndefined()\n    .eager(options.phases.eager)\n\nconst titrePhaseUpdate = async ({ titrePhase }) =>\n  TitresPhases.query().upsertGraph(titrePhase, { insertMissing: true })\n\nconst titrePhaseDelete = async ({ titreDemarcheId }) =>\n  TitresPhases.query()\n    .deleteById(titreDemarcheId)\n    .returning('*')\n\nexport { titresPhasesGet, titrePhaseUpdate, titrePhaseDelete }\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/database/queries/titres-phases.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 310,
    "kind": "function",
    "name": "titresPhasesGet",
    "memberof": "src/database/queries/titres-phases.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/database/queries/titres-phases.js~titresPhasesGet",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/queries/titres-phases.js",
    "importStyle": "{titresPhasesGet}",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 311,
    "kind": "function",
    "name": "titrePhaseUpdate",
    "memberof": "src/database/queries/titres-phases.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/database/queries/titres-phases.js~titrePhaseUpdate",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/queries/titres-phases.js",
    "importStyle": "{titrePhaseUpdate}",
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"titrePhase\": *}"
        ],
        "defaultRaw": {
          "titrePhase": null
        },
        "defaultValue": "{\"titrePhase\":null}"
      }
    ],
    "return": null
  },
  {
    "__docId__": 312,
    "kind": "function",
    "name": "titrePhaseDelete",
    "memberof": "src/database/queries/titres-phases.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/database/queries/titres-phases.js~titrePhaseDelete",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/queries/titres-phases.js",
    "importStyle": "{titrePhaseDelete}",
    "description": null,
    "lineNumber": 12,
    "undocument": true,
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"titreDemarcheId\": *}"
        ],
        "defaultRaw": {
          "titreDemarcheId": null
        },
        "defaultValue": "{\"titreDemarcheId\":null}"
      }
    ],
    "return": null
  },
  {
    "__docId__": 313,
    "kind": "file",
    "name": "src/database/queries/titres-points.js",
    "content": "import TitresPoints from '../models/titres-points'\n\nconst titresPointsGet = async () => TitresPoints.query()\n\nconst titrePointUpdate = async ({ id, groupe, contour, point }) =>\n  TitresPoints.query()\n    .skipUndefined()\n    .findById(id)\n    .patch({ id, groupe, contour, point })\n\nexport { titresPointsGet, titrePointUpdate }\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/database/queries/titres-points.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 314,
    "kind": "function",
    "name": "titresPointsGet",
    "memberof": "src/database/queries/titres-points.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/database/queries/titres-points.js~titresPointsGet",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/queries/titres-points.js",
    "importStyle": "{titresPointsGet}",
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 315,
    "kind": "function",
    "name": "titrePointUpdate",
    "memberof": "src/database/queries/titres-points.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/database/queries/titres-points.js~titrePointUpdate",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/queries/titres-points.js",
    "importStyle": "{titrePointUpdate}",
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"id\": *, \"groupe\": *, \"contour\": *, \"point\": *}"
        ],
        "defaultRaw": {
          "id": null,
          "groupe": null,
          "contour": null,
          "point": null
        },
        "defaultValue": "{\"id\":null,\"groupe\":null,\"contour\":null,\"point\":null}"
      }
    ],
    "return": null
  },
  {
    "__docId__": 316,
    "kind": "file",
    "name": "src/database/queries/titres-travaux.js",
    "content": "import titreTravauxRapports from '../models/titres-travaux-rapports'\n\nconst titresTravauxRapportGet = async id =>\n  titreTravauxRapports.query().findById(id)\n\nconst titresTravauxRapportsGet = async () =>\n  titreTravauxRapports.query().skipUndefined()\n\nconst titreTravauxRapportUpdate = async ({ titreTravauxRapport }) =>\n  titreTravauxRapports\n    .query()\n    .upsertGraph(titreTravauxRapport, { insertMissing: true })\n    .first()\n\nexport {\n  titresTravauxRapportGet,\n  titresTravauxRapportsGet,\n  titreTravauxRapportUpdate\n}\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/database/queries/titres-travaux.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 317,
    "kind": "function",
    "name": "titresTravauxRapportGet",
    "memberof": "src/database/queries/titres-travaux.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/database/queries/titres-travaux.js~titresTravauxRapportGet",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/queries/titres-travaux.js",
    "importStyle": "{titresTravauxRapportGet}",
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "params": [
      {
        "name": "id",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 318,
    "kind": "function",
    "name": "titresTravauxRapportsGet",
    "memberof": "src/database/queries/titres-travaux.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/database/queries/titres-travaux.js~titresTravauxRapportsGet",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/queries/titres-travaux.js",
    "importStyle": "{titresTravauxRapportsGet}",
    "description": null,
    "lineNumber": 6,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 319,
    "kind": "function",
    "name": "titreTravauxRapportUpdate",
    "memberof": "src/database/queries/titres-travaux.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/database/queries/titres-travaux.js~titreTravauxRapportUpdate",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/queries/titres-travaux.js",
    "importStyle": "{titreTravauxRapportUpdate}",
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"titreTravauxRapport\": *}"
        ],
        "defaultRaw": {
          "titreTravauxRapport": null
        },
        "defaultValue": "{\"titreTravauxRapport\":null}"
      }
    ],
    "return": null
  },
  {
    "__docId__": 320,
    "kind": "file",
    "name": "src/database/queries/titres.js",
    "content": "import Titres from '../models/titres'\nimport options from './_options'\n\nconst titreGet = async id =>\n  Titres.query()\n    .findById(id)\n    .eager(options.titres.eager)\n\nconst titresGet = async ({\n  typeIds,\n  domaineIds,\n  statutIds,\n  substances,\n  noms,\n  entreprises,\n  references\n}) => {\n  const q = Titres.query()\n    .skipUndefined()\n    .eager(options.titres.eager)\n\n  if (typeIds) {\n    q.whereIn('titres.typeId', typeIds)\n  }\n\n  if (domaineIds) {\n    q.whereIn('titres.domaineId', domaineIds)\n  }\n\n  if (statutIds) {\n    q.whereIn('titres.statutId', statutIds)\n  }\n\n  if (noms) {\n    q.where(builder => {\n      builder\n        .whereRaw(`?? ~* ?`, [\n          'titres.nom',\n          noms.map(n => `(?=.*?(${n}))`).join('')\n        ])\n        .orWhereRaw(`?? ~* ?`, [\n          'titres.id',\n          noms.map(n => `(?=.*?(${n}))`).join('')\n        ])\n    })\n  }\n\n  if (references) {\n    q.where(builder => {\n      references.forEach(ref => {\n        builder.orWhereRaw(`lower(??::text) like ?`, [\n          'titres.references',\n          `%${ref.toLowerCase()}%`\n        ])\n      })\n    })\n    // .groupBy('titres.id')\n    // .havingRaw(\n    //   `(${references\n    //     .map(_ => `count(*) filter (where lower(??) like ?) > 0`)\n    //     .join(') and (')})`,\n    //   references.reduce(\n    //     (res, ref) => [...res, `%${ref.toLowerCase()}%`],\n    //     []\n    //   )\n    // )\n  }\n\n  // if (substances) {\n  //   q.where(builder => {\n  //     builder\n  //       .whereRaw(`?? ~* ?`, ['substances.nom', substances.join('|')])\n  //       .orWhereRaw(`?? ~* ?`, ['substances.id', substances.join('|')])\n  //       .orWhereRaw(`?? ~* ?`, [\n  //         'substances:legales.nom',\n  //         substances.join('|')\n  //       ])\n  //       .orWhereRaw(`?? ~* ?`, [\n  //         'substances:legales.id',\n  //         substances.join('|')\n  //       ])\n  //   }).joinRelation('substances.legales')\n  // }\n\n  // if (substances) {\n  //   q.where(builder => {\n  //     builder.whereIn(\n  //       'substances.nom',\n  //       substances.map(s => `%${s.toLowerCase()}%`)\n  //     )\n  //     // .orWhereIn('substances.id', substances)\n  //     // .orWhereIn('substances:legales.nom', substances)\n  //     // .orWhereIn('substances:legales.id', substances)\n  //   }).joinRelation('substances')\n  // }\n\n  // if (substances) {\n  //   q.joinRelation('substances')\n\n  //   q.where('titre.id', 'in', builder => {\n  //     substances.forEach((s, i) => {\n  //       builder.where('substances.nom', 'like', `%${s.toLowerCase()}%`)\n  //       // .orWhereIn('substances.id', substances)\n  //       // .orWhereIn('substances:legales.nom', substances)\n  //       // .orWhereIn('substances:legales.id', substances)\n  //     })\n  //   })\n  // }\n\n  // if (substances) {\n  //   q.where(builder => {\n  //     builder.whereRaw(\n  //       `lower(??) like all(array[${substances.map(() => '?').join(',')}])`,\n  //       ['substances.nom', ...substances.map(s => `%${s.toLowerCase()}%`)]\n  //     )\n  //     // .whereIn('substances.nom', substances)\n  //     // .orWhereIn('substances.id', substances)\n  //     // .orWhereIn('substances:legales.nom', substances)\n  //     // .orWhereIn('substances:legales.id', substances)\n  //   }).joinRelation('substances')\n  // }\n\n  if (substances) {\n    const fields = [\n      'substances.nom',\n      'substances.id',\n      'substances:legales.nom',\n      'substances:legales.id'\n    ]\n\n    q.where(builder => {\n      substances.forEach(s => {\n        fields.forEach(f => {\n          builder.orWhereRaw(`lower(??) like ?`, [f, `%${s.toLowerCase()}%`])\n        })\n      })\n    })\n      .groupBy('titres.id')\n      .havingRaw(\n        `(${substances\n          .map(_ =>\n            fields\n              .map(_ => `count(*) filter (where lower(??) like ?) > 0`)\n              .join(' or ')\n          )\n          .join(') and (')})`,\n        substances.reduce(\n          (res, s) => [\n            ...res,\n            ...fields.reduce((r, f) => [...r, f, `%${s.toLowerCase()}%`], [])\n          ],\n          []\n        )\n      )\n      .joinRelation('substances.legales')\n  }\n\n  if (entreprises) {\n    const fields = [\n      'titulaires.nom',\n      'titulaires.id'\n      // 'amodiataires.nom',\n      // 'amodiataires.id'\n    ]\n\n    q.where(builder => {\n      entreprises.forEach(s => {\n        fields.forEach(f => {\n          builder.orWhereRaw(`lower(??) like ?`, [f, `%${s.toLowerCase()}%`])\n        })\n      })\n    })\n      .groupBy('titres.id')\n      .havingRaw(\n        `(${entreprises\n          .map(_ =>\n            fields\n              .map(_ => `count(*) filter (where lower(??) like ?) > 0`)\n              .join(' or ')\n          )\n          .join(') and (')})`,\n        entreprises.reduce(\n          (res, s) => [\n            ...res,\n            ...fields.reduce((r, f) => [...r, f, `%${s.toLowerCase()}%`], [])\n          ],\n          []\n        )\n      )\n      .joinRelation('titulaires')\n  }\n\n  // console.log(q.toSql())\n  return q\n}\n\nconst titrePropsUpdate = async ({ id, props }) =>\n  Titres.query()\n    .skipUndefined()\n    .findById(id)\n    .patch(props)\n\nconst titreAdd = async titre =>\n  Titres.query()\n    .insertGraph(titre, options.titres.update)\n    .first()\n    .eager(options.titres.eager)\n\nconst titreRemove = async id =>\n  Titres.query()\n    .deleteById(id)\n    .first()\n    .eager(options.titres.eager)\n    .returning('*')\n\nconst titreUpdate = async titre =>\n  Titres.query()\n    .upsertGraph([titre], options.titres.update)\n    .eager(options.titres.eager)\n    .first()\n\nexport {\n  titreGet,\n  titresGet,\n  titrePropsUpdate,\n  titreAdd,\n  titreRemove,\n  titreUpdate\n}\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/database/queries/titres.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 321,
    "kind": "function",
    "name": "titreGet",
    "memberof": "src/database/queries/titres.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/database/queries/titres.js~titreGet",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/queries/titres.js",
    "importStyle": "{titreGet}",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "params": [
      {
        "name": "id",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 322,
    "kind": "function",
    "name": "titresGet",
    "memberof": "src/database/queries/titres.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/database/queries/titres.js~titresGet",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/queries/titres.js",
    "importStyle": "{titresGet}",
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"typeIds\": *, \"domaineIds\": *, \"statutIds\": *, \"substances\": *, \"noms\": *, \"entreprises\": *, \"references\": *}"
        ],
        "defaultRaw": {
          "typeIds": null,
          "domaineIds": null,
          "statutIds": null,
          "substances": null,
          "noms": null,
          "entreprises": null,
          "references": null
        },
        "defaultValue": "{\"typeIds\":null,\"domaineIds\":null,\"statutIds\":null,\"substances\":null,\"noms\":null,\"entreprises\":null,\"references\":null}"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 323,
    "kind": "function",
    "name": "titrePropsUpdate",
    "memberof": "src/database/queries/titres.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/database/queries/titres.js~titrePropsUpdate",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/queries/titres.js",
    "importStyle": "{titrePropsUpdate}",
    "description": null,
    "lineNumber": 197,
    "undocument": true,
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"id\": *, \"props\": *}"
        ],
        "defaultRaw": {
          "id": null,
          "props": null
        },
        "defaultValue": "{\"id\":null,\"props\":null}"
      }
    ],
    "return": null
  },
  {
    "__docId__": 324,
    "kind": "function",
    "name": "titreAdd",
    "memberof": "src/database/queries/titres.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/database/queries/titres.js~titreAdd",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/queries/titres.js",
    "importStyle": "{titreAdd}",
    "description": null,
    "lineNumber": 203,
    "undocument": true,
    "params": [
      {
        "name": "titre",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 325,
    "kind": "function",
    "name": "titreRemove",
    "memberof": "src/database/queries/titres.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/database/queries/titres.js~titreRemove",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/queries/titres.js",
    "importStyle": "{titreRemove}",
    "description": null,
    "lineNumber": 209,
    "undocument": true,
    "params": [
      {
        "name": "id",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 326,
    "kind": "function",
    "name": "titreUpdate",
    "memberof": "src/database/queries/titres.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/database/queries/titres.js~titreUpdate",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/queries/titres.js",
    "importStyle": "{titreUpdate}",
    "description": null,
    "lineNumber": 216,
    "undocument": true,
    "params": [
      {
        "name": "titre",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 327,
    "kind": "file",
    "name": "src/database/queries/utilisateurs.js",
    "content": "import Utilisateurs from '../models/utilisateurs'\nimport options from './_options'\n\nconst utilisateurGet = async id =>\n  Utilisateurs.query()\n    .findById(id)\n    .eager(options.utilisateurs.eager)\n\nconst utilisateurByEmailGet = async email =>\n  Utilisateurs.query()\n    .where('email', email)\n    .eager(options.utilisateurs.eager)\n    .first()\n\nconst utilisateursGet = async ({\n  noms,\n  entrepriseIds,\n  administrationIds,\n  permissionIds\n}) => {\n  const q = Utilisateurs.query()\n    .skipUndefined()\n    .eager(options.utilisateurs.eager)\n    .whereIn('utilisateurs.administrationId', administrationIds)\n    .whereIn('utilisateurs.entrepriseId', entrepriseIds)\n    .whereIn('utilisateurs.permissionId', permissionIds)\n\n  if (noms) {\n    q.whereRaw(`lower(??) ~* ${noms.map(n => '?').join('|')}`, [\n      'utilisateurs.nom',\n      ...noms.map(n => n.toLowerCase())\n    ])\n  }\n\n  return q\n}\n\nconst utilisateurAdd = async utilisateur =>\n  Utilisateurs.query()\n    .insertGraph(utilisateur, options.utilisateurs.update)\n    .eager(options.utilisateurs.eager)\n    .first()\n\nconst utilisateurRemove = async id =>\n  Utilisateurs.query()\n    .deleteById(id)\n    .first()\n    .returning('*')\n\nconst utilisateurUpdate = async utilisateur =>\n  Utilisateurs.query()\n    .upsertGraphAndFetch(utilisateur, options.utilisateurs.update)\n    .eager(options.utilisateurs.eager)\n\nexport {\n  utilisateurGet,\n  utilisateurByEmailGet,\n  utilisateursGet,\n  utilisateurAdd,\n  utilisateurRemove,\n  utilisateurUpdate\n}\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/database/queries/utilisateurs.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 328,
    "kind": "function",
    "name": "utilisateurGet",
    "memberof": "src/database/queries/utilisateurs.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/database/queries/utilisateurs.js~utilisateurGet",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/queries/utilisateurs.js",
    "importStyle": "{utilisateurGet}",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "params": [
      {
        "name": "id",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 329,
    "kind": "function",
    "name": "utilisateurByEmailGet",
    "memberof": "src/database/queries/utilisateurs.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/database/queries/utilisateurs.js~utilisateurByEmailGet",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/queries/utilisateurs.js",
    "importStyle": "{utilisateurByEmailGet}",
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "params": [
      {
        "name": "email",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 330,
    "kind": "function",
    "name": "utilisateursGet",
    "memberof": "src/database/queries/utilisateurs.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/database/queries/utilisateurs.js~utilisateursGet",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/queries/utilisateurs.js",
    "importStyle": "{utilisateursGet}",
    "description": null,
    "lineNumber": 15,
    "undocument": true,
    "params": [
      {
        "name": "objectPattern",
        "types": [
          "{\"noms\": *, \"entrepriseIds\": *, \"administrationIds\": *, \"permissionIds\": *}"
        ],
        "defaultRaw": {
          "noms": null,
          "entrepriseIds": null,
          "administrationIds": null,
          "permissionIds": null
        },
        "defaultValue": "{\"noms\":null,\"entrepriseIds\":null,\"administrationIds\":null,\"permissionIds\":null}"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 331,
    "kind": "function",
    "name": "utilisateurAdd",
    "memberof": "src/database/queries/utilisateurs.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/database/queries/utilisateurs.js~utilisateurAdd",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/queries/utilisateurs.js",
    "importStyle": "{utilisateurAdd}",
    "description": null,
    "lineNumber": 38,
    "undocument": true,
    "params": [
      {
        "name": "utilisateur",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 332,
    "kind": "function",
    "name": "utilisateurRemove",
    "memberof": "src/database/queries/utilisateurs.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/database/queries/utilisateurs.js~utilisateurRemove",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/queries/utilisateurs.js",
    "importStyle": "{utilisateurRemove}",
    "description": null,
    "lineNumber": 44,
    "undocument": true,
    "params": [
      {
        "name": "id",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 333,
    "kind": "function",
    "name": "utilisateurUpdate",
    "memberof": "src/database/queries/utilisateurs.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/database/queries/utilisateurs.js~utilisateurUpdate",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/database/queries/utilisateurs.js",
    "importStyle": "{utilisateurUpdate}",
    "description": null,
    "lineNumber": 50,
    "undocument": true,
    "params": [
      {
        "name": "utilisateur",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 334,
    "kind": "file",
    "name": "src/index.js",
    "content": "/**\n * Camino API, le cadastre minier numérique ouvert\n *\n * This program is free software: you can redistribute it and/or modify it under the terms of the GNU Affero General Public License as published by the Free Software Foundation, either version 3 of the License, or any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License along with this program. If not, see <https://www.gnu.org/licenses/>.\n */\n\nimport 'dotenv/config'\nimport './database/index'\nimport chalk from 'chalk'\nimport * as express from 'express'\nimport * as cors from 'cors'\nimport * as compression from 'compression'\nimport * as expressGraphql from 'express-graphql'\nimport * as expressJwt from 'express-jwt'\nimport * as Sentry from '@sentry/node'\n\nimport { port, url } from './config/index'\nimport schema from './api/schemas'\nimport rootValue from './api/resolvers'\n\nconst app = express()\n\nif (process.env.SENTRY_DSN) {\n  Sentry.init({\n    dsn: process.env.SENTRY_DSN\n    // integrations: [\n    //   new Sentry.Integrations.RewriteFrames({\n    //     root: global.__rootdir__\n    //   })\n    // ]\n  })\n\n  app.use(Sentry.Handlers.requestHandler())\n}\n\napp.use(cors({ credentials: true }))\n\napp.use(compression())\n\napp.use(\n  expressJwt({\n    credentialsRequired: false,\n    secret: process.env.JWT_SECRET || 'jwtSecret should be declared in .env'\n  })\n)\n\n// app.get('/', (req, res) => {\n//   console.log('broke')\n//   throw new Error('Broke!')\n// })\n\napp.use(\n  '/',\n  expressGraphql((req, res, graphQLParams) => ({\n    schema,\n    rootValue,\n    graphiql: true,\n    pretty: true,\n    formatError: err => ({\n      message: err.message,\n      locations: err.locations,\n      stack: err.stack ? err.stack.split('\\n') : [],\n      path: err.path\n    }),\n    context: {\n      user: req.user\n    }\n  }))\n)\n\nif (process.env.SENTRY_DSN) {\n  app.use(Sentry.Handlers.errorHandler())\n}\n\napp.listen(port, () => {\n  console.log(' ')\n  console.log(chalk.bgWhiteBright.black.bold('> Url: ' + url + ' '))\n  console.log(chalk.bgWhiteBright.black.bold('> ENV: ' + process.env.ENV + ' '))\n  console.log(\n    chalk.bgWhiteBright.black.bold('> NODE_ENV: ' + process.env.NODE_ENV + ' ')\n  )\n  console.log(' ')\n})\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 335,
    "kind": "variable",
    "name": "app",
    "memberof": "src/index.js",
    "static": true,
    "longname": "src/index.js~app",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/index.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 25,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 336,
    "kind": "file",
    "name": "src/tasks/_utils/__mocks__/titre-demarches.js",
    "content": "export default [\n  {\n    id: 'h-cxx-courdemanges-1988-oct01',\n    titreId: 'h-cxx-courdemanges-1988',\n    typeId: 'oct',\n    statutId: 'acc',\n    ordre: 1,\n    annulationDemarcheId: null,\n    type: {\n      id: 'oct',\n      nom: 'octroi',\n      ordre: 1,\n      duree: true,\n      points: true,\n      substances: true,\n      titulaires: true,\n      renouvelable: null,\n      exception: null\n    },\n    statut: {\n      id: 'acc',\n      nom: 'acceptée',\n      couleur: 'success'\n    },\n    phase: {\n      titreDemarcheId: 'h-cxx-courdemanges-1988-oct01',\n      statutId: 'ech',\n      dateDebut: '1988-03-11T23:00:00.000Z',\n      dateFin: '2013-03-11T23:00:00.000Z',\n      statut: {\n        id: 'ech',\n        nom: 'échu',\n        couleur: 'neutral'\n      }\n    },\n    etapes: [\n      {\n        id: 'h-cxx-courdemanges-1988-oct01-dpu01',\n        titreDemarcheId: 'h-cxx-courdemanges-1988-oct01',\n        typeId: 'dpu',\n        statutId: 'acc',\n        ordre: 2,\n        date: '1988-03-11T23:00:00.000Z',\n        dateDebut: null,\n        dateFin: null,\n        duree: null,\n        surface: null,\n        volume: null,\n        volumeUnite: null,\n        visas: null,\n        engagement: null,\n        engagementDevise: null,\n        sourceIndisponible: null,\n        statut: {\n          id: 'acc',\n          nom: 'acceptation',\n          couleur: 'success'\n        },\n        type: {\n          id: 'dpu',\n          nom: 'publication de décision au JORF',\n          acceptationAuto: null,\n          legalRef: null,\n          legalLien: null,\n          dateDebut: null,\n          dateFin: null\n        },\n        points: [\n          {\n            id: 'h-cxx-courdemanges-1988-oct01-dpu01-g01-c01-p001',\n            titreEtapeId: 'h-cxx-courdemanges-1988-oct01-dpu01',\n            coordonnees: {\n              x: 4.51459594890447,\n              y: 48.6719486120829\n            },\n            groupe: 1,\n            contour: 1,\n            point: 1,\n            nom: '1',\n            description: null,\n            securite: null,\n            references: []\n          },\n          {\n            id: 'h-cxx-courdemanges-1988-oct01-dpu01-g01-c01-p002',\n            titreEtapeId: 'h-cxx-courdemanges-1988-oct01-dpu01',\n            coordonnees: {\n              x: 4.51459616094044,\n              y: 48.6899483429733\n            },\n            groupe: 1,\n            contour: 1,\n            point: 2,\n            nom: '2',\n            description: null,\n            securite: null,\n            references: []\n          },\n          {\n            id: 'h-cxx-courdemanges-1988-oct01-dpu01-g01-c01-p003',\n            titreEtapeId: 'h-cxx-courdemanges-1988-oct01-dpu01',\n            coordonnees: {\n              x: 4.52359772370847,\n              y: 48.6899476947979\n            },\n            groupe: 1,\n            contour: 1,\n            point: 3,\n            nom: '3',\n            description: null,\n            securite: null,\n            references: []\n          },\n          {\n            id: 'h-cxx-courdemanges-1988-oct01-dpu01-g01-c01-p004',\n            titreEtapeId: 'h-cxx-courdemanges-1988-oct01-dpu01',\n            coordonnees: {\n              x: 4.52359638442287,\n              y: 48.7079472655535\n            },\n            groupe: 1,\n            contour: 1,\n            point: 4,\n            nom: '4',\n            description: null,\n            securite: null,\n            references: []\n          },\n          {\n            id: 'h-cxx-courdemanges-1988-oct01-dpu01-g01-c01-p005',\n            titreEtapeId: 'h-cxx-courdemanges-1988-oct01-dpu01',\n            coordonnees: {\n              x: 4.53259652584434,\n              y: 48.7079491092924\n            },\n            groupe: 1,\n            contour: 1,\n            point: 5,\n            nom: '5',\n            description: null,\n            securite: null,\n            references: []\n          },\n          {\n            id: 'h-cxx-courdemanges-1988-oct01-dpu01-g01-c01-p006',\n            titreEtapeId: 'h-cxx-courdemanges-1988-oct01-dpu01',\n            coordonnees: {\n              x: 4.53259659192424,\n              y: 48.7169477868536\n            },\n            groupe: 1,\n            contour: 1,\n            point: 6,\n            nom: '6',\n            description: null,\n            securite: null,\n            references: []\n          },\n          {\n            id: 'h-cxx-courdemanges-1988-oct01-dpu01-g01-c01-p007',\n            titreEtapeId: 'h-cxx-courdemanges-1988-oct01-dpu01',\n            coordonnees: {\n              x: 4.56859872248003,\n              y: 48.716948427773\n            },\n            groupe: 1,\n            contour: 1,\n            point: 7,\n            nom: '7',\n            description: null,\n            securite: null,\n            references: []\n          },\n          {\n            id: 'h-cxx-courdemanges-1988-oct01-dpu01-g01-c01-p008',\n            titreEtapeId: 'h-cxx-courdemanges-1988-oct01-dpu01',\n            coordonnees: {\n              x: 4.56859806574096,\n              y: 48.6629495950434\n            },\n            groupe: 1,\n            contour: 1,\n            point: 8,\n            nom: '8',\n            description: null,\n            securite: null,\n            references: []\n          },\n          {\n            id: 'h-cxx-courdemanges-1988-oct01-dpu01-g01-c01-p009',\n            titreEtapeId: 'h-cxx-courdemanges-1988-oct01-dpu01',\n            coordonnees: {\n              x: 4.53259748905556,\n              y: 48.662948591802\n            },\n            groupe: 1,\n            contour: 1,\n            point: 9,\n            nom: '9',\n            description: null,\n            securite: null,\n            references: []\n          },\n          {\n            id: 'h-cxx-courdemanges-1988-oct01-dpu01-g01-c01-p010',\n            titreEtapeId: 'h-cxx-courdemanges-1988-oct01-dpu01',\n            coordonnees: {\n              x: 4.53259759874971,\n              y: 48.6719486061898\n            },\n            groupe: 1,\n            contour: 1,\n            point: 10,\n            nom: '10',\n            description: null,\n            securite: null,\n            references: []\n          },\n          {\n            id: 'h-cxx-courdemanges-1988-oct01-dpu01-g01-c01-p011',\n            titreEtapeId: 'h-cxx-courdemanges-1988-oct01-dpu01',\n            coordonnees: {\n              x: 4.51459594890447,\n              y: 48.6719486120829\n            },\n            groupe: 1,\n            contour: 1,\n            point: 11,\n            nom: '11',\n            description: null,\n            securite: null,\n            references: []\n          }\n        ],\n        documents: [\n          {\n            id: 'h-cxx-courdemanges-1988-oct01-dpu01-b1fe6f9a',\n            titreEtapeId: 'h-cxx-courdemanges-1988-oct01-dpu01',\n            type: 'Décret',\n            nom:\n              \"Décret du 7 mars 1988 accordant la concession d'hydrocarbures liquides ou gazeux dite Concession de Courdemanges à la Société nationale Elf-Aquitaine (Production), à la Société BP France, à la Société française de développement pétrolier BP et à la Société Pétrorep conjointes et solidaires\",\n            jorf: 'JORFTEXT000000700374',\n            nor: 'INDE8800069D',\n            url:\n              'https://www.legifrance.gouv.fr/affichTexte.do?cidTexte=JORFTEXT000000700374',\n            uri: null,\n            fichier: null\n          }\n        ],\n        substances: [],\n        titresSubstances: [],\n        titulaires: [],\n        titresTitulaires: [],\n        amodiataires: [],\n        titresAmodiataires: [],\n        administrations: [],\n        titresAdministrations: [],\n        emprises: [],\n        titresEmprises: []\n      },\n      {\n        id: 'h-cxx-courdemanges-1988-oct01-dex01',\n        titreDemarcheId: 'h-cxx-courdemanges-1988-oct01',\n        typeId: 'dex',\n        statutId: 'acc',\n        ordre: 1,\n        date: '1988-03-06T23:00:00.000Z',\n        dateDebut: null,\n        dateFin: '2013-03-11T23:00:00.000Z',\n        duree: 25,\n        surface: 19.9,\n        volume: null,\n        volumeUnite: null,\n        visas: null,\n        engagement: null,\n        engagementDevise: null,\n        sourceIndisponible: null,\n        statut: {\n          id: 'acc',\n          nom: 'acceptation',\n          couleur: 'success'\n        },\n        type: {\n          id: 'dex',\n          nom: 'décision expresse',\n          acceptationAuto: null,\n          legalRef: null,\n          legalLien: null,\n          dateDebut: null,\n          dateFin: null\n        },\n        points: [],\n        documents: [\n          {\n            id: 'h-cxx-courdemanges-1988-oct01-dex01-14b2848a',\n            titreEtapeId: 'h-cxx-courdemanges-1988-oct01-dex01',\n            type: 'Décret',\n            nom:\n              \"Décret du 7 mars 1988 accordant la concession d'hydrocarbures liquides ou gazeux dite Concession de Courdemanges à la Société nationale Elf-Aquitaine (Production), à la Société BP France, à la Société française de développement pétrolier BP et à la Société Pétrorep conjointes et solidaires\",\n            jorf: null,\n            nor: null,\n            url: null,\n            uri: null,\n            fichier: null\n          }\n        ],\n        substances: [\n          {\n            id: 'hydx',\n            nom: 'hydrocarbures liquides ou gazeux',\n            symbole: null,\n            gerep: null,\n            description: null,\n            ordre: null,\n            connexe: null,\n            legales: [\n              {\n                id: 'hydx',\n                nom: 'hydrocarbures liquides ou gazeux',\n                domaineId: 'h',\n                description: \"A l'exeption de la tourbe\",\n                substanceLegaleCodeId: 'l111_1-1',\n                code: {\n                  id: 'l111_1-1',\n                  nom: 'L111-1, 1°',\n                  description:\n                    \"Des hydrocarbures et des combustibles fossiles, la tourbe exceptée, qu'ils soient sous forme solide, liquide ou gazeuse, du graphite, du diamant\",\n                  lien:\n                    'https://www.legifrance.gouv.fr/affichCodeArticle.do;?idArticle=LEGIARTI000036435815&cidTexte=LEGITEXT000023501962'\n                },\n                domaine: {\n                  id: 'h',\n                  nom: 'hydrocarbures liquides ou gazeux',\n                  ordre: 4\n                }\n              }\n            ]\n          }\n        ],\n        titresSubstances: [\n          {\n            titreEtapeId: 'h-cxx-courdemanges-1988-oct01-dex01',\n            substanceId: 'hydx',\n            connexe: null,\n            ordre: null\n          }\n        ],\n        titulaires: [\n          {\n            id: 'fr-000000014',\n            nom: 'Société française de développement pétrolier BP',\n            raisonSociale: null,\n            paysId: 'FR',\n            legalSiren: null,\n            legalEtranger: null,\n            legalForme: null,\n            voieNumero: null,\n            voieType: null,\n            voieNom: null,\n            adresseComplement: null,\n            codePostal: null,\n            ville: null,\n            cedex: null,\n            localite: null,\n            insee: null,\n            url: null,\n            email: null,\n            telephone: null,\n            utilisateurs: []\n          },\n          {\n            id: 'fr-542034327',\n            nom: 'BP France',\n            raisonSociale: null,\n            paysId: 'FR',\n            legalSiren: '542034327',\n            legalEtranger: null,\n            legalForme: null,\n            voieNumero: null,\n            voieType: null,\n            voieNom: null,\n            adresseComplement: null,\n            codePostal: null,\n            ville: 'PONTOISE',\n            cedex: null,\n            localite: null,\n            insee: null,\n            url: null,\n            email: null,\n            telephone: null,\n            utilisateurs: []\n          },\n          {\n            id: 'fr-562034629',\n            nom: 'Petrorep',\n            raisonSociale: null,\n            paysId: 'FR',\n            legalSiren: '562034629',\n            legalEtranger: null,\n            legalForme: null,\n            voieNumero: null,\n            voieType: null,\n            voieNom: null,\n            adresseComplement: null,\n            codePostal: null,\n            ville: 'PARIS',\n            cedex: null,\n            localite: null,\n            insee: null,\n            url: null,\n            email: null,\n            telephone: null,\n            utilisateurs: []\n          },\n          {\n            id: 'fr-632022711',\n            nom: 'Elf Aquitaine (Production)',\n            raisonSociale: null,\n            paysId: 'FR',\n            legalSiren: '632022711',\n            legalEtranger: null,\n            legalForme: null,\n            voieNumero: null,\n            voieType: null,\n            voieNom: null,\n            adresseComplement: null,\n            codePostal: null,\n            ville: 'NANTERRE',\n            cedex: null,\n            localite: null,\n            insee: null,\n            url: null,\n            email: null,\n            telephone: null,\n            utilisateurs: []\n          }\n        ],\n        titresTitulaires: [\n          {\n            titreEtapeId: 'h-cxx-courdemanges-1988-oct01-dex01',\n            entrepriseId: 'fr-000000014'\n          },\n          {\n            titreEtapeId: 'h-cxx-courdemanges-1988-oct01-dex01',\n            entrepriseId: 'fr-542034327'\n          },\n          {\n            titreEtapeId: 'h-cxx-courdemanges-1988-oct01-dex01',\n            entrepriseId: 'fr-562034629'\n          },\n          {\n            titreEtapeId: 'h-cxx-courdemanges-1988-oct01-dex01',\n            entrepriseId: 'fr-632022711'\n          }\n        ],\n        amodiataires: [],\n        titresAmodiataires: [],\n        administrations: [],\n        titresAdministrations: [],\n        emprises: [],\n        titresEmprises: []\n      }\n    ]\n  },\n  {\n    id: 'h-cxx-courdemanges-1988-mut01',\n    titreId: 'h-cxx-courdemanges-1988',\n    typeId: 'mut',\n    statutId: 'acc',\n    ordre: 2,\n    annulationDemarcheId: null,\n    type: {\n      id: 'mut',\n      nom: 'mutation',\n      ordre: null,\n      duree: true,\n      points: true,\n      substances: null,\n      titulaires: true,\n      renouvelable: true,\n      exception: null\n    },\n    statut: {\n      id: 'acc',\n      nom: 'acceptée',\n      couleur: 'success'\n    },\n    phase: null,\n    etapes: [\n      {\n        id: 'h-cxx-courdemanges-1988-mut01-dpu01',\n        titreDemarcheId: 'h-cxx-courdemanges-1988-mut01',\n        typeId: 'dpu',\n        statutId: 'acc',\n        ordre: 2,\n        date: '1994-09-29T23:00:00.000Z',\n        dateDebut: null,\n        dateFin: null,\n        duree: null,\n        surface: null,\n        volume: null,\n        volumeUnite: null,\n        visas: null,\n        engagement: null,\n        engagementDevise: null,\n        sourceIndisponible: null,\n        statut: {\n          id: 'acc',\n          nom: 'acceptation',\n          couleur: 'success'\n        },\n        type: {\n          id: 'dpu',\n          nom: 'publication de décision au JORF',\n          acceptationAuto: null,\n          legalRef: null,\n          legalLien: null,\n          dateDebut: null,\n          dateFin: null\n        },\n        points: [],\n        documents: [\n          {\n            id: 'h-cxx-courdemanges-1988-mut01-dpu01-bc71fc1b',\n            titreEtapeId: 'h-cxx-courdemanges-1988-mut01-dpu01',\n            type: 'Décret',\n            nom:\n              \"Décret du 23 septembre 1994 autorisant la mutation de concessions de mines d'hydrocarbures liquides ou gazeux\",\n            jorf: 'JORFTEXT000000549383',\n            nor: 'INDE9401060D',\n            url:\n              'https://www.legifrance.gouv.fr/affichTexte.do?cidTexte=JORFTEXT000000549383',\n            uri: null,\n            fichier: null\n          }\n        ],\n        substances: [],\n        titresSubstances: [],\n        titulaires: [],\n        titresTitulaires: [],\n        amodiataires: [],\n        titresAmodiataires: [],\n        administrations: [],\n        titresAdministrations: [],\n        emprises: [],\n        titresEmprises: []\n      },\n      {\n        id: 'h-cxx-courdemanges-1988-mut01-dex01',\n        titreDemarcheId: 'h-cxx-courdemanges-1988-mut01',\n        typeId: 'dex',\n        statutId: 'acc',\n        ordre: 1,\n        date: '1994-09-22T22:00:00.000Z',\n        dateDebut: null,\n        dateFin: null,\n        duree: null,\n        surface: null,\n        volume: null,\n        volumeUnite: null,\n        visas: null,\n        engagement: null,\n        engagementDevise: null,\n        sourceIndisponible: null,\n        statut: {\n          id: 'acc',\n          nom: 'acceptation',\n          couleur: 'success'\n        },\n        type: {\n          id: 'dex',\n          nom: 'décision expresse',\n          acceptationAuto: null,\n          legalRef: null,\n          legalLien: null,\n          dateDebut: null,\n          dateFin: null\n        },\n        points: [],\n        documents: [\n          {\n            id: 'h-cxx-courdemanges-1988-mut01-dex01-bce98f90',\n            titreEtapeId: 'h-cxx-courdemanges-1988-mut01-dex01',\n            type: 'Décret',\n            nom:\n              \"Décret du 23 septembre 1994 autorisant la mutation de concessions de mines d'hydrocarbures liquides ou gazeux\",\n            jorf: null,\n            nor: null,\n            url: null,\n            uri: null,\n            fichier: null\n          }\n        ],\n        substances: [\n          {\n            id: 'hydx',\n            nom: 'hydrocarbures liquides ou gazeux',\n            symbole: null,\n            gerep: null,\n            description: null,\n            ordre: null,\n            connexe: null,\n            legales: [\n              {\n                id: 'hydx',\n                nom: 'hydrocarbures liquides ou gazeux',\n                domaineId: 'h',\n                description: \"A l'exeption de la tourbe\",\n                substanceLegaleCodeId: 'l111_1-1',\n                code: {\n                  id: 'l111_1-1',\n                  nom: 'L111-1, 1°',\n                  description:\n                    \"Des hydrocarbures et des combustibles fossiles, la tourbe exceptée, qu'ils soient sous forme solide, liquide ou gazeuse, du graphite, du diamant\",\n                  lien:\n                    'https://www.legifrance.gouv.fr/affichCodeArticle.do;?idArticle=LEGIARTI000036435815&cidTexte=LEGITEXT000023501962'\n                },\n                domaine: {\n                  id: 'h',\n                  nom: 'hydrocarbures liquides ou gazeux',\n                  ordre: 4\n                }\n              }\n            ]\n          }\n        ],\n        titresSubstances: [\n          {\n            titreEtapeId: 'h-cxx-courdemanges-1988-mut01-dex01',\n            substanceId: 'hydx',\n            connexe: null,\n            ordre: null\n          }\n        ],\n        titulaires: [\n          {\n            id: 'fr-562034629',\n            nom: 'Petrorep',\n            raisonSociale: null,\n            paysId: 'FR',\n            legalSiren: '562034629',\n            legalEtranger: null,\n            legalForme: null,\n            voieNumero: null,\n            voieType: null,\n            voieNom: null,\n            adresseComplement: null,\n            codePostal: null,\n            ville: 'PARIS',\n            cedex: null,\n            localite: null,\n            insee: null,\n            url: null,\n            email: null,\n            telephone: null,\n            utilisateurs: []\n          },\n          {\n            id: 'fr-572199164',\n            nom: 'IPC Petroleum France',\n            raisonSociale: null,\n            paysId: 'FR',\n            legalSiren: '572199164',\n            legalEtranger: null,\n            legalForme: null,\n            voieNumero: null,\n            voieType: null,\n            voieNom: null,\n            adresseComplement: null,\n            codePostal: null,\n            ville: 'REIMS',\n            cedex: null,\n            localite: null,\n            insee: null,\n            url: null,\n            email: null,\n            telephone: null,\n            utilisateurs: []\n          },\n          {\n            id: 'fr-632022711',\n            nom: 'Elf Aquitaine (Production)',\n            raisonSociale: null,\n            paysId: 'FR',\n            legalSiren: '632022711',\n            legalEtranger: null,\n            legalForme: null,\n            voieNumero: null,\n            voieType: null,\n            voieNom: null,\n            adresseComplement: null,\n            codePostal: null,\n            ville: 'NANTERRE',\n            cedex: null,\n            localite: null,\n            insee: null,\n            url: null,\n            email: null,\n            telephone: null,\n            utilisateurs: []\n          }\n        ],\n        titresTitulaires: [\n          {\n            titreEtapeId: 'h-cxx-courdemanges-1988-mut01-dex01',\n            entrepriseId: 'fr-562034629'\n          },\n          {\n            titreEtapeId: 'h-cxx-courdemanges-1988-mut01-dex01',\n            entrepriseId: 'fr-572199164'\n          },\n          {\n            titreEtapeId: 'h-cxx-courdemanges-1988-mut01-dex01',\n            entrepriseId: 'fr-632022711'\n          }\n        ],\n        amodiataires: [],\n        titresAmodiataires: [],\n        administrations: [],\n        titresAdministrations: [],\n        emprises: [],\n        titresEmprises: []\n      }\n    ]\n  },\n  {\n    id: 'h-cxx-courdemanges-1988-mut02',\n    titreId: 'h-cxx-courdemanges-1988',\n    typeId: 'mut',\n    statutId: 'acc',\n    ordre: 3,\n    annulationDemarcheId: null,\n    type: {\n      id: 'mut',\n      nom: 'mutation',\n      ordre: null,\n      duree: true,\n      points: true,\n      substances: null,\n      titulaires: true,\n      renouvelable: true,\n      exception: null\n    },\n    statut: {\n      id: 'acc',\n      nom: 'acceptée',\n      couleur: 'success'\n    },\n    phase: null,\n    etapes: [\n      {\n        id: 'h-cxx-courdemanges-1988-mut02-dpu01',\n        titreDemarcheId: 'h-cxx-courdemanges-1988-mut02',\n        typeId: 'dpu',\n        statutId: 'acc',\n        ordre: 2,\n        date: '1998-03-23T23:00:00.000Z',\n        dateDebut: null,\n        dateFin: null,\n        duree: null,\n        surface: null,\n        volume: null,\n        volumeUnite: null,\n        visas: null,\n        engagement: null,\n        engagementDevise: null,\n        sourceIndisponible: null,\n        statut: {\n          id: 'acc',\n          nom: 'acceptation',\n          couleur: 'success'\n        },\n        type: {\n          id: 'dpu',\n          nom: 'publication de décision au JORF',\n          acceptationAuto: null,\n          legalRef: null,\n          legalLien: null,\n          dateDebut: null,\n          dateFin: null\n        },\n        points: [],\n        documents: [\n          {\n            id: 'h-cxx-courdemanges-1988-mut02-dpu01-8c4cc033',\n            titreEtapeId: 'h-cxx-courdemanges-1988-mut02-dpu01',\n            type: 'Décret',\n            nom:\n              \"Décret du 17 mars 1998 autorisant la mutation de la concession de mines d'hydrocarbures liquides ou gazeux dite « Concession de Courdemanges » (Marne)\",\n            jorf: 'JORFTEXT000000754620',\n            nor: 'ECOI9800196D',\n            url:\n              'https://www.legifrance.gouv.fr/affichTexte.do?cidTexte=JORFTEXT000000754620',\n            uri: null,\n            fichier: null\n          }\n        ],\n        substances: [],\n        titresSubstances: [],\n        titulaires: [],\n        titresTitulaires: [],\n        amodiataires: [],\n        titresAmodiataires: [],\n        administrations: [],\n        titresAdministrations: [],\n        emprises: [],\n        titresEmprises: []\n      },\n      {\n        id: 'h-cxx-courdemanges-1988-mut02-dex01',\n        titreDemarcheId: 'h-cxx-courdemanges-1988-mut02',\n        typeId: 'dex',\n        statutId: 'acc',\n        ordre: 1,\n        date: '1998-03-16T23:00:00.000Z',\n        dateDebut: null,\n        dateFin: null,\n        duree: null,\n        surface: null,\n        volume: null,\n        volumeUnite: null,\n        visas: null,\n        engagement: null,\n        engagementDevise: null,\n        sourceIndisponible: null,\n        statut: {\n          id: 'acc',\n          nom: 'acceptation',\n          couleur: 'success'\n        },\n        type: {\n          id: 'dex',\n          nom: 'décision expresse',\n          acceptationAuto: null,\n          legalRef: null,\n          legalLien: null,\n          dateDebut: null,\n          dateFin: null\n        },\n        points: [],\n        documents: [\n          {\n            id: 'h-cxx-courdemanges-1988-mut02-dex01-177cbb60',\n            titreEtapeId: 'h-cxx-courdemanges-1988-mut02-dex01',\n            type: 'Décret',\n            nom:\n              \"Décret du 17 mars 1998 autorisant la mutation de la concession de mines d'hydrocarbures liquides ou gazeux dite « Concession de Courdemanges » (Marne)\",\n            jorf: null,\n            nor: null,\n            url: null,\n            uri: null,\n            fichier: null\n          }\n        ],\n        substances: [\n          {\n            id: 'hydx',\n            nom: 'hydrocarbures liquides ou gazeux',\n            symbole: null,\n            gerep: null,\n            description: null,\n            ordre: null,\n            connexe: null,\n            legales: [\n              {\n                id: 'hydx',\n                nom: 'hydrocarbures liquides ou gazeux',\n                domaineId: 'h',\n                description: \"A l'exeption de la tourbe\",\n                substanceLegaleCodeId: 'l111_1-1',\n                code: {\n                  id: 'l111_1-1',\n                  nom: 'L111-1, 1°',\n                  description:\n                    \"Des hydrocarbures et des combustibles fossiles, la tourbe exceptée, qu'ils soient sous forme solide, liquide ou gazeuse, du graphite, du diamant\",\n                  lien:\n                    'https://www.legifrance.gouv.fr/affichCodeArticle.do;?idArticle=LEGIARTI000036435815&cidTexte=LEGITEXT000023501962'\n                },\n                domaine: {\n                  id: 'h',\n                  nom: 'hydrocarbures liquides ou gazeux',\n                  ordre: 4\n                }\n              }\n            ]\n          }\n        ],\n        titresSubstances: [\n          {\n            titreEtapeId: 'h-cxx-courdemanges-1988-mut02-dex01',\n            substanceId: 'hydx',\n            connexe: null,\n            ordre: null\n          }\n        ],\n        titulaires: [\n          {\n            id: 'fr-000000003',\n            nom: 'Coparex international',\n            raisonSociale: null,\n            paysId: 'FR',\n            legalSiren: null,\n            legalEtranger: null,\n            legalForme: null,\n            voieNumero: null,\n            voieType: null,\n            voieNom: null,\n            adresseComplement: null,\n            codePostal: null,\n            ville: null,\n            cedex: null,\n            localite: null,\n            insee: null,\n            url: null,\n            email: null,\n            telephone: null,\n            utilisateurs: []\n          },\n          {\n            id: 'fr-395042054',\n            nom: 'Carr Production France',\n            raisonSociale: null,\n            paysId: 'FR',\n            legalSiren: '395042054',\n            legalEtranger: null,\n            legalForme: null,\n            voieNumero: null,\n            voieType: null,\n            voieNom: null,\n            adresseComplement: null,\n            codePostal: null,\n            ville: 'PARIS',\n            cedex: null,\n            localite: null,\n            insee: null,\n            url: null,\n            email: null,\n            telephone: null,\n            utilisateurs: []\n          }\n        ],\n        titresTitulaires: [\n          {\n            titreEtapeId: 'h-cxx-courdemanges-1988-mut02-dex01',\n            entrepriseId: 'fr-000000003'\n          },\n          {\n            titreEtapeId: 'h-cxx-courdemanges-1988-mut02-dex01',\n            entrepriseId: 'fr-395042054'\n          }\n        ],\n        amodiataires: [],\n        titresAmodiataires: [],\n        administrations: [],\n        titresAdministrations: [],\n        emprises: [],\n        titresEmprises: []\n      }\n    ]\n  },\n  {\n    id: 'h-cxx-courdemanges-1988-mut03',\n    titreId: 'h-cxx-courdemanges-1988',\n    typeId: 'mut',\n    statutId: 'acc',\n    ordre: 4,\n    annulationDemarcheId: null,\n    type: {\n      id: 'mut',\n      nom: 'mutation',\n      ordre: null,\n      duree: true,\n      points: true,\n      substances: null,\n      titulaires: true,\n      renouvelable: true,\n      exception: null\n    },\n    statut: {\n      id: 'acc',\n      nom: 'acceptée',\n      couleur: 'success'\n    },\n    phase: null,\n    etapes: [\n      {\n        id: 'h-cxx-courdemanges-1988-mut03-dpu01',\n        titreDemarcheId: 'h-cxx-courdemanges-1988-mut03',\n        typeId: 'dpu',\n        statutId: 'acc',\n        ordre: 2,\n        date: '2009-02-13T23:00:00.000Z',\n        dateDebut: null,\n        dateFin: null,\n        duree: null,\n        surface: null,\n        volume: null,\n        volumeUnite: null,\n        visas: null,\n        engagement: null,\n        engagementDevise: null,\n        sourceIndisponible: null,\n        statut: {\n          id: 'acc',\n          nom: 'acceptation',\n          couleur: 'success'\n        },\n        type: {\n          id: 'dpu',\n          nom: 'publication de décision au JORF',\n          acceptationAuto: null,\n          legalRef: null,\n          legalLien: null,\n          dateDebut: null,\n          dateFin: null\n        },\n        points: [],\n        documents: [\n          {\n            id: 'h-cxx-courdemanges-1988-mut03-dpu01-36369b20',\n            titreEtapeId: 'h-cxx-courdemanges-1988-mut03-dpu01',\n            type: 'Arrêté',\n            nom:\n              \"Arrêté du 28 janvier 2009 autorisant la mutation du permis exclusif de recherches de mines d'hydrocarbures liquides ou gazeux de Val-des-Marais et des concessions de Courdemanges, de Soudron, de Vert-la-Gravelle (Marne) et de Grandville (Aube) au profit de la société Lundin International\",\n            jorf: 'JORFTEXT000020251500',\n            nor: 'DEVE0903222A',\n            url:\n              'https://www.legifrance.gouv.fr/affichTexte.do?cidTexte=JORFTEXT000020251500',\n            uri:\n              'https://www.legifrance.gouv.fr/eli/arrete/2009/1/28/DEVE0903222A/jo/texte',\n            fichier: null\n          }\n        ],\n        substances: [],\n        titresSubstances: [],\n        titulaires: [],\n        titresTitulaires: [],\n        amodiataires: [],\n        titresAmodiataires: [],\n        administrations: [],\n        titresAdministrations: [],\n        emprises: [],\n        titresEmprises: []\n      },\n      {\n        id: 'h-cxx-courdemanges-1988-mut03-dex01',\n        titreDemarcheId: 'h-cxx-courdemanges-1988-mut03',\n        typeId: 'dex',\n        statutId: 'acc',\n        ordre: 1,\n        date: '2009-01-27T23:00:00.000Z',\n        dateDebut: null,\n        dateFin: null,\n        duree: null,\n        surface: null,\n        volume: null,\n        volumeUnite: null,\n        visas: null,\n        engagement: null,\n        engagementDevise: null,\n        sourceIndisponible: null,\n        statut: {\n          id: 'acc',\n          nom: 'acceptation',\n          couleur: 'success'\n        },\n        type: {\n          id: 'dex',\n          nom: 'décision expresse',\n          acceptationAuto: null,\n          legalRef: null,\n          legalLien: null,\n          dateDebut: null,\n          dateFin: null\n        },\n        points: [],\n        documents: [\n          {\n            id: 'h-cxx-courdemanges-1988-mut03-dex01-0bc694c5',\n            titreEtapeId: 'h-cxx-courdemanges-1988-mut03-dex01',\n            type: 'Arrêté',\n            nom:\n              \"Arrêté du 28 janvier 2009 autorisant la mutation du permis exclusif de recherches de mines d'hydrocarbures liquides ou gazeux de Val-des-Marais et des concessions de Courdemanges, de Soudron, de Vert-la-Gravelle (Marne) et de Grandville (Aube) au profit de la société Lundin International\",\n            jorf: null,\n            nor: null,\n            url: null,\n            uri: null,\n            fichier: null\n          }\n        ],\n        substances: [\n          {\n            id: 'hydx',\n            nom: 'hydrocarbures liquides ou gazeux',\n            symbole: null,\n            gerep: null,\n            description: null,\n            ordre: null,\n            connexe: null,\n            legales: [\n              {\n                id: 'hydx',\n                nom: 'hydrocarbures liquides ou gazeux',\n                domaineId: 'h',\n                description: \"A l'exeption de la tourbe\",\n                substanceLegaleCodeId: 'l111_1-1',\n                code: {\n                  id: 'l111_1-1',\n                  nom: 'L111-1, 1°',\n                  description:\n                    \"Des hydrocarbures et des combustibles fossiles, la tourbe exceptée, qu'ils soient sous forme solide, liquide ou gazeuse, du graphite, du diamant\",\n                  lien:\n                    'https://www.legifrance.gouv.fr/affichCodeArticle.do;?idArticle=LEGIARTI000036435815&cidTexte=LEGITEXT000023501962'\n                },\n                domaine: {\n                  id: 'h',\n                  nom: 'hydrocarbures liquides ou gazeux',\n                  ordre: 4\n                }\n              }\n            ]\n          }\n        ],\n        titresSubstances: [\n          {\n            titreEtapeId: 'h-cxx-courdemanges-1988-mut03-dex01',\n            substanceId: 'hydx',\n            connexe: null,\n            ordre: null\n          }\n        ],\n        titulaires: [\n          {\n            id: 'fr-572199164',\n            nom: 'IPC Petroleum France',\n            raisonSociale: null,\n            paysId: 'FR',\n            legalSiren: '572199164',\n            legalEtranger: null,\n            legalForme: null,\n            voieNumero: null,\n            voieType: null,\n            voieNom: null,\n            adresseComplement: null,\n            codePostal: null,\n            ville: 'REIMS',\n            cedex: null,\n            localite: null,\n            insee: null,\n            url: null,\n            email: null,\n            telephone: null,\n            utilisateurs: []\n          }\n        ],\n        titresTitulaires: [\n          {\n            titreEtapeId: 'h-cxx-courdemanges-1988-mut03-dex01',\n            entrepriseId: 'fr-572199164'\n          }\n        ],\n        amodiataires: [],\n        titresAmodiataires: [],\n        administrations: [],\n        titresAdministrations: [],\n        emprises: [],\n        titresEmprises: []\n      }\n    ]\n  },\n  {\n    id: 'h-cxx-courdemanges-1988-pro01',\n    titreId: 'h-cxx-courdemanges-1988',\n    typeId: 'pro',\n    statutId: 'acc',\n    ordre: 5,\n    annulationDemarcheId: null,\n    type: {\n      id: 'pro',\n      nom: 'prolongation',\n      ordre: 2,\n      duree: true,\n      points: true,\n      substances: null,\n      titulaires: null,\n      renouvelable: true,\n      exception: null\n    },\n    statut: {\n      id: 'acc',\n      nom: 'acceptée',\n      couleur: 'success'\n    },\n    phase: {\n      titreDemarcheId: 'h-cxx-courdemanges-1988-pro01',\n      statutId: 'val',\n      dateDebut: '2013-03-11T23:00:00.000Z',\n      dateFin: '2038-03-11T23:00:00.000Z',\n      statut: {\n        id: 'val',\n        nom: 'valide',\n        couleur: 'success'\n      }\n    },\n    etapes: [\n      {\n        id: 'h-cxx-courdemanges-1988-pro01-dpu01',\n        titreDemarcheId: 'h-cxx-courdemanges-1988-pro01',\n        typeId: 'dpu',\n        statutId: 'acc',\n        ordre: 2,\n        date: '2013-05-23T22:00:00.000Z',\n        dateDebut: null,\n        dateFin: null,\n        duree: null,\n        surface: null,\n        volume: null,\n        volumeUnite: null,\n        visas: null,\n        engagement: null,\n        engagementDevise: null,\n        sourceIndisponible: null,\n        statut: {\n          id: 'acc',\n          nom: 'acceptation',\n          couleur: 'success'\n        },\n        type: {\n          id: 'dpu',\n          nom: 'publication de décision au JORF',\n          acceptationAuto: null,\n          legalRef: null,\n          legalLien: null,\n          dateDebut: null,\n          dateFin: null\n        },\n        points: [],\n        documents: [\n          {\n            id: 'h-cxx-courdemanges-1988-pro01-dpu01-e7158dba',\n            titreEtapeId: 'h-cxx-courdemanges-1988-pro01-dpu01',\n            type: 'Décret',\n            nom:\n              \"Décret du 22 mai 2013 prolongeant la validité de la concession de mines d'hydrocarbures liquides ou gazeux dite « Concession de Courdemanges » à la société Lundin International SA (Marne)\",\n            jorf: 'JORFTEXT000027443282',\n            nor: 'DEVR1241761D',\n            url:\n              'https://www.legifrance.gouv.fr/affichTexte.do?cidTexte=JORFTEXT000027443282',\n            uri:\n              'https://www.legifrance.gouv.fr/eli/decret/2013/5/22/DEVR1241761D/jo/texte',\n            fichier: null\n          }\n        ],\n        substances: [],\n        titresSubstances: [],\n        titulaires: [],\n        titresTitulaires: [],\n        amodiataires: [],\n        titresAmodiataires: [],\n        administrations: [],\n        titresAdministrations: [],\n        emprises: [],\n        titresEmprises: []\n      },\n      {\n        id: 'h-cxx-courdemanges-1988-pro01-dex01',\n        titreDemarcheId: 'h-cxx-courdemanges-1988-pro01',\n        typeId: 'dex',\n        statutId: 'acc',\n        ordre: 1,\n        date: '2013-05-21T22:00:00.000Z',\n        dateDebut: null,\n        dateFin: '2038-03-11T23:00:00.000Z',\n        duree: 25,\n        surface: 19.9,\n        volume: null,\n        volumeUnite: null,\n        visas: null,\n        engagement: null,\n        engagementDevise: null,\n        sourceIndisponible: null,\n        statut: {\n          id: 'acc',\n          nom: 'acceptation',\n          couleur: 'success'\n        },\n        type: {\n          id: 'dex',\n          nom: 'décision expresse',\n          acceptationAuto: null,\n          legalRef: null,\n          legalLien: null,\n          dateDebut: null,\n          dateFin: null\n        },\n        points: [],\n        documents: [\n          {\n            id: 'h-cxx-courdemanges-1988-pro01-dex01-8ea8dbdc',\n            titreEtapeId: 'h-cxx-courdemanges-1988-pro01-dex01',\n            type: 'Décret',\n            nom:\n              \"Décret du 22 mai 2013 prolongeant la validité de la concession de mines d'hydrocarbures liquides ou gazeux dite « Concession de Courdemanges » à la société Lundin International SA (Marne)\",\n            jorf: null,\n            nor: null,\n            url: null,\n            uri: null,\n            fichier: null\n          }\n        ],\n        substances: [\n          {\n            id: 'hydx',\n            nom: 'hydrocarbures liquides ou gazeux',\n            symbole: null,\n            gerep: null,\n            description: null,\n            ordre: null,\n            connexe: null,\n            legales: [\n              {\n                id: 'hydx',\n                nom: 'hydrocarbures liquides ou gazeux',\n                domaineId: 'h',\n                description: \"A l'exeption de la tourbe\",\n                substanceLegaleCodeId: 'l111_1-1',\n                code: {\n                  id: 'l111_1-1',\n                  nom: 'L111-1, 1°',\n                  description:\n                    \"Des hydrocarbures et des combustibles fossiles, la tourbe exceptée, qu'ils soient sous forme solide, liquide ou gazeuse, du graphite, du diamant\",\n                  lien:\n                    'https://www.legifrance.gouv.fr/affichCodeArticle.do;?idArticle=LEGIARTI000036435815&cidTexte=LEGITEXT000023501962'\n                },\n                domaine: {\n                  id: 'h',\n                  nom: 'hydrocarbures liquides ou gazeux',\n                  ordre: 4\n                }\n              }\n            ]\n          }\n        ],\n        titresSubstances: [\n          {\n            titreEtapeId: 'h-cxx-courdemanges-1988-pro01-dex01',\n            substanceId: 'hydx',\n            connexe: null,\n            ordre: null\n          }\n        ],\n        titulaires: [\n          {\n            id: 'fr-572199164',\n            nom: 'IPC Petroleum France',\n            raisonSociale: null,\n            paysId: 'FR',\n            legalSiren: '572199164',\n            legalEtranger: null,\n            legalForme: null,\n            voieNumero: null,\n            voieType: null,\n            voieNom: null,\n            adresseComplement: null,\n            codePostal: null,\n            ville: 'REIMS',\n            cedex: null,\n            localite: null,\n            insee: null,\n            url: null,\n            email: null,\n            telephone: null,\n            utilisateurs: []\n          }\n        ],\n        titresTitulaires: [\n          {\n            titreEtapeId: 'h-cxx-courdemanges-1988-pro01-dex01',\n            entrepriseId: 'fr-572199164'\n          }\n        ],\n        amodiataires: [],\n        titresAmodiataires: [],\n        administrations: [],\n        titresAdministrations: [],\n        emprises: [],\n        titresEmprises: []\n      }\n    ]\n  }\n]\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tasks/_utils/__mocks__/titre-demarches.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 337,
    "kind": "file",
    "name": "src/tasks/_utils/titre-date-fin-find.js",
    "content": "import titreDemarcheDateFinAndDureeFind from './titre-demarche-date-fin-duree-find'\n\n/**\n * Trouve la date de fin d'un titre\n * @param {titreDemarche[]} titreDemarches la liste des démarches d'un titres\n * @return {String} la date de fin du titre sous forme yyyy-mm-dd\n */\n\nconst titreDateFinFind = titreDemarches => {\n  // la dernière démarche dont le statut est acceptée ou terminée\n  const titreDemarche = titreDemarches.find(titreDemarche =>\n    ['acc', 'ter'].includes(titreDemarche.statutId)\n  )\n  const dateFin =\n    titreDemarche &&\n    titreDemarcheDateFinAndDureeFind(titreDemarches, titreDemarche.ordre)\n      .dateFin\n\n  return dateFin\n}\n\nexport default titreDateFinFind\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tasks/_utils/titre-date-fin-find.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 338,
    "kind": "function",
    "name": "titreDateFinFind",
    "memberof": "src/tasks/_utils/titre-date-fin-find.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tasks/_utils/titre-date-fin-find.js~titreDateFinFind",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tasks/_utils/titre-date-fin-find.js",
    "importStyle": "titreDateFinFind",
    "description": "Trouve la date de fin d'un titre",
    "lineNumber": 9,
    "params": [
      {
        "nullable": null,
        "types": [
          "titreDemarche[]"
        ],
        "spread": false,
        "optional": false,
        "name": "titreDemarches",
        "description": "la liste des démarches d'un titres"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": "la date de fin du titre sous forme yyyy-mm-dd"
    }
  },
  {
    "__docId__": 339,
    "kind": "file",
    "name": "src/tasks/_utils/titre-demarche-date-fin-duree-find.js",
    "content": "import * as dateFormat from 'dateformat'\nimport titreEtapesAscSort from './titre-etapes-asc-sort'\nimport titreEtapesDescSort from './titre-etapes-desc-sort'\n\n// entrée:\n// - les démarches d'un titre\n// - l'ordre d'une démarche dont on cherche la date de fin et la durée\n// sortie\n// - la date de fin de la démarche\n// - la durée cumulée depuis la date de fin précédemment enregistré dans la bdd\nconst titreDemarcheDateFinAndDureeFind = (titreDemarches, ordre) =>\n  titreDemarches\n    // liste les démarches précédentes dont le statut est acceptée ou terminée\n    .filter(\n      titreDemarche =>\n        (titreDemarche.statutId === 'acc' ||\n          titreDemarche.statutId === 'ter') &&\n        ordre >= titreDemarche.ordre\n    )\n    // parcourt les démarches\n    .reduce(\n      ({ duree, dateFin }, titreDemarche) => {\n        // la date de fin est déjà définie -> retourne l'accumulateur tel quel\n        if (dateFin) {\n          return { duree, dateFin }\n        }\n\n        if (\n          // la démarche est un octroi\n          titreDemarche.typeId === 'oct'\n        ) {\n          return titreDemarcheOctroiDateFinFind(duree, titreDemarche)\n        }\n\n        if (\n          // la démarche est une abrogation, retrait ou renonciation\n          // si c'est une renonciation et que la démarche contient une étape avec des infos géo (points)\n          // alors c'est une renonciation partielle et elle n'est pas prise en compte\n          titreDemarche.typeId === 'abr' ||\n          titreDemarche.typeId === 'ret' ||\n          (titreDemarche.typeId === 'ren' &&\n            !titreDemarche.etapes.find(te => te.points.length))\n        ) {\n          // trouve la date de fin d'une démarche d'annulation\n          return titreDemarcheAnnulationDateFinFind(titreDemarche)\n        }\n\n        // trouve soit la date de fin\n        // soit la durée d'une démarche\n        return titreDemarcheNormaleDateFinAndDureeFind(\n          duree,\n          titreDemarche.etapes\n        )\n      },\n      // l'accumulateur contient initialement\n      // - la durée cumulée égale à 0\n      // - la date de fin (null)\n      { duree: 0, dateFin: null }\n    )\n\n// trouve la date de fin et la durée d'une démarche d'octroi\nconst titreDemarcheOctroiDateFinFind = (dureeAcc, titreDemarche) => {\n  // retourne la durée cumulée et la date de fin\n  // de la démarche d'octroi\n  const { duree, dateFin } = titreDemarcheNormaleDateFinAndDureeFind(\n    dureeAcc,\n    titreDemarche.etapes\n  )\n\n  const dateFinUpdatedFind = () => {\n    // si il n'y a ni date de fin, ni de durée cumulée,\n    // la date de fin par défaut est fixée au 31 décembre 2018\n    if (duree === 0) {\n      return '2018-12-31'\n    }\n\n    const titreEtapesDescSorted =\n      titreDemarche.etapes || titreEtapesDescSort(titreDemarche)\n\n    // chercher dans les dpu s'il y a une date de debut\n    const titreEtapeHasDateDebut = titreEtapesDescSorted.find(\n      te => ['dex', 'dpu', 'rpu'].includes(te.typeId) && te.dateDebut\n    )\n\n    if (titreEtapeHasDateDebut) {\n      return dateAddYears(titreEtapeHasDateDebut.dateDebut, duree)\n    }\n\n    // sinon, la date de fin est calculée\n    // en ajoutant la durée cumulée à la date de la première dpu ou ens\n    const titreEtapeDpuFirst = titreEtapesAscSort(titreDemarche).find(\n      titreEtape => titreEtape.typeId === 'dpu'\n    )\n\n    if (titreEtapeDpuFirst) {\n      return dateAddYears(titreEtapeDpuFirst.date, duree)\n    }\n\n    // si on ne trouve pas de dpu, la date de fin est calculée\n    // en ajoutant la date de la première dex\n    const titreEtapeDexFirst = titreEtapesAscSort(titreDemarche).find(\n      titreEtape => titreEtape.typeId === 'dex'\n    )\n\n    return titreEtapeDexFirst\n      ? dateAddYears(titreEtapeDexFirst.date, duree)\n      : null\n  }\n\n  // si la démarche contient une date de fin,\n  // sinon trouve une date de fin\n  const dateFinUpdated = dateFin || dateFinUpdatedFind()\n\n  return {\n    duree,\n    dateFin: dateFinUpdated\n  }\n}\n\n// trouve la date de fin d'une démarche d'annulation\nconst titreDemarcheAnnulationDateFinFind = titreDemarche => {\n  const dateFinFind = () => {\n    // la dernière étape dex qui contient une date de fin\n    const etapeDexHasDateFin = titreEtapesDescSort(titreDemarche)\n      .filter(te => te.typeId === 'dex')\n      .find(te => te.dateFin)\n\n    // si la démarche contient une date de fin\n    if (etapeDexHasDateFin) {\n      return dateFormat(etapeDexHasDateFin, 'yyyy-mm-dd')\n    }\n\n    // sinon,\n    // trouve la première étape de décision expresse (dex)\n    const etapeDex = titreEtapesAscSort(titreDemarche).find(\n      te => te.typeId === 'dex'\n    )\n\n    // la date de fin est la date de l'étape\n    return dateFormat(etapeDex.date, 'yyyy-mm-dd')\n  }\n\n  return {\n    duree: 0,\n    dateFin: dateFinFind()\n  }\n}\n\n// entrées:\n// - les étapes d'une démarche\n// - la durée cumulée\n// retourne\n// - dateFin: la date de fin de la démarche si définie, sinon null\n// - duree: la durée cumulée\nconst titreDemarcheNormaleDateFinAndDureeFind = (dureeAcc, titreEtapes) => {\n  titreEtapes = titreEtapesDescSort({ etapes: titreEtapes })\n\n  const titreEtapeHasDateFinOrDuree = titreEtapes\n    // filtre les étapes dont le type est décision express (dex)\n    // et decision de publication au JORF (dpu)\n    // et publication au recueil des actes administratifs de la préfecture (rpu)\n    .filter(titreEtape => ['dex', 'dpu', 'rpu'].includes(titreEtape.typeId))\n    // parcourt les étapes et retourne la première date de fin ou durée trouvée\n    .find(({ dateFin, duree }) => dateFin || duree)\n\n  if (!titreEtapeHasDateFinOrDuree) {\n    return { dateFin: null, duree: dureeAcc }\n  }\n\n  const { dateFin, duree } = titreEtapeHasDateFinOrDuree\n\n  // retourne la date de fin et\n  // ajoute la durée calculée à la durée cumulée\n  return {\n    duree: duree ? duree + dureeAcc : dureeAcc,\n    dateFin: dateFin ? dateAddYears(dateFin, dureeAcc) : null\n  }\n}\n\n// ajoute une durée en années à une date au format YYYY-MM-DD\nconst dateAddYears = (date, years) => {\n  const d = dateFormat(date, 'yyyy-mm-dd')\n  return `${Number(d.slice(0, 4)) + years}-${d.slice(5)}`\n}\n\nexport default titreDemarcheDateFinAndDureeFind\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tasks/_utils/titre-demarche-date-fin-duree-find.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 340,
    "kind": "function",
    "name": "titreDemarcheOctroiDateFinFind",
    "memberof": "src/tasks/_utils/titre-demarche-date-fin-duree-find.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tasks/_utils/titre-demarche-date-fin-duree-find.js~titreDemarcheOctroiDateFinFind",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tasks/_utils/titre-demarche-date-fin-duree-find.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 62,
    "undocument": true,
    "params": [
      {
        "name": "dureeAcc",
        "types": [
          "*"
        ]
      },
      {
        "name": "titreDemarche",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "{\"duree\": *, \"dateFin\": *}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 341,
    "kind": "function",
    "name": "titreDemarcheAnnulationDateFinFind",
    "memberof": "src/tasks/_utils/titre-demarche-date-fin-duree-find.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tasks/_utils/titre-demarche-date-fin-duree-find.js~titreDemarcheAnnulationDateFinFind",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tasks/_utils/titre-demarche-date-fin-duree-find.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 121,
    "undocument": true,
    "params": [
      {
        "name": "titreDemarche",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "{\"duree\": *, \"dateFin\": *}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 342,
    "kind": "function",
    "name": "titreDemarcheNormaleDateFinAndDureeFind",
    "memberof": "src/tasks/_utils/titre-demarche-date-fin-duree-find.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tasks/_utils/titre-demarche-date-fin-duree-find.js~titreDemarcheNormaleDateFinAndDureeFind",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tasks/_utils/titre-demarche-date-fin-duree-find.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 155,
    "undocument": true,
    "params": [
      {
        "name": "dureeAcc",
        "types": [
          "*"
        ]
      },
      {
        "name": "titreEtapes",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "{\"duree\": *, \"dateFin\": *}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 343,
    "kind": "function",
    "name": "dateAddYears",
    "memberof": "src/tasks/_utils/titre-demarche-date-fin-duree-find.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tasks/_utils/titre-demarche-date-fin-duree-find.js~dateAddYears",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tasks/_utils/titre-demarche-date-fin-duree-find.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 181,
    "undocument": true,
    "params": [
      {
        "name": "date",
        "types": [
          "*"
        ]
      },
      {
        "name": "years",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "string"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 344,
    "kind": "function",
    "name": "titreDemarcheDateFinAndDureeFind",
    "memberof": "src/tasks/_utils/titre-demarche-date-fin-duree-find.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tasks/_utils/titre-demarche-date-fin-duree-find.js~titreDemarcheDateFinAndDureeFind",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tasks/_utils/titre-demarche-date-fin-duree-find.js",
    "importStyle": "titreDemarcheDateFinAndDureeFind",
    "description": null,
    "lineNumber": 11,
    "undocument": true,
    "params": [
      {
        "name": "titreDemarches",
        "types": [
          "*"
        ]
      },
      {
        "name": "ordre",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 345,
    "kind": "file",
    "name": "src/tasks/_utils/titre-demarche-ordre-find.js",
    "content": "import titreDemarchesAscSort from './titre-demarches-asc-sort'\n\n// retourne l'ordre (index + 1) d'une démarche\nconst titreDemarcheOrdreFind = (titreDemarcheId, titreDemarches) => {\n  // index de la démarche parmi les démarches classées\n  const titreDemarcheIndex = titreDemarchesAscSort(titreDemarches).findIndex(\n    titreDemarche => titreDemarche.id === titreDemarcheId\n  )\n\n  return titreDemarcheIndex !== -1 ? titreDemarcheIndex + 1 : 0\n}\n\nexport default titreDemarcheOrdreFind\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tasks/_utils/titre-demarche-ordre-find.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 346,
    "kind": "function",
    "name": "titreDemarcheOrdreFind",
    "memberof": "src/tasks/_utils/titre-demarche-ordre-find.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tasks/_utils/titre-demarche-ordre-find.js~titreDemarcheOrdreFind",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tasks/_utils/titre-demarche-ordre-find.js",
    "importStyle": "titreDemarcheOrdreFind",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "params": [
      {
        "name": "titreDemarcheId",
        "types": [
          "*"
        ]
      },
      {
        "name": "titreDemarches",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 347,
    "kind": "file",
    "name": "src/tasks/_utils/titre-demarche-phases-filter.js",
    "content": "import titreEtapesAscSort from './titre-etapes-asc-sort'\n\n// si\n// - la démarche est un octroi ou une prolongation ou une prolongation 1\n// ou une prolongation 2 ou une prolongation exceptionnelle\n// - le statut de la démarche est acceptée\n// - la démarche a une étape de dpu\n// - le statut de l'étape de dpu est acceptée\n\nconst titreDemarchePhasesFilter = (titreDemarche, titreTypeId) => {\n  // retourne l'étape de dpu de la démarche si elle existe\n  // si il existe une dpu et une dpu rectificative, on prend en compte l'originale\n  const etapeDpuFirst = titreEtapesAscSort(titreDemarche).find(\n    titreEtape =>\n      titreEtape.typeId === 'dpu' ||\n      (titreTypeId === 'axm' && titreEtape.typeId === 'dex') ||\n      (titreTypeId === 'prx' && titreEtape.typeId === 'rpu')\n  )\n\n  return (\n    (titreDemarche.typeId === 'oct' ||\n      titreDemarche.typeId === 'pro' ||\n      titreDemarche.typeId === 'pr1' ||\n      titreDemarche.typeId === 'pr2' ||\n      titreDemarche.typeId === 'pre') &&\n    titreDemarche.statutId === 'acc' &&\n    etapeDpuFirst &&\n    etapeDpuFirst.statutId === 'acc'\n  )\n}\n\nexport default titreDemarchePhasesFilter\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tasks/_utils/titre-demarche-phases-filter.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 348,
    "kind": "function",
    "name": "titreDemarchePhasesFilter",
    "memberof": "src/tasks/_utils/titre-demarche-phases-filter.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tasks/_utils/titre-demarche-phases-filter.js~titreDemarchePhasesFilter",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tasks/_utils/titre-demarche-phases-filter.js",
    "importStyle": "titreDemarchePhasesFilter",
    "description": null,
    "lineNumber": 10,
    "undocument": true,
    "params": [
      {
        "name": "titreDemarche",
        "types": [
          "*"
        ]
      },
      {
        "name": "titreTypeId",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 349,
    "kind": "file",
    "name": "src/tasks/_utils/titre-demarche-statut-id-find.js",
    "content": "import titreEtapesDescSort from './titre-etapes-desc-sort'\n\nconst titreDemarcheStatutIdFind = (titreDemarche, titreTypeId) => {\n  // l'étape la plus récente\n  const titreEtapeRecent = titreEtapesDescSort(titreDemarche)[0]\n\n  //  1. la démarche fait l’objet d’une demande\n  //  - le nom de la démarche est égal à\n  //    octroi ou prolongation(1, 2 ou exceptionnelle)\n  //    ou renonciation ou fusion ou extension du périmètre\n  //    ou extension de substance ou mutation ou amodiation\n  //    ou résiliation d’amodiation\n  if (\n    [\n      'oct',\n      'pro',\n      'pr1',\n      'pr2',\n      'pre',\n      'ren',\n      'fus',\n      'exp',\n      'exs',\n      'mut',\n      'amo',\n      'res',\n      'ces'\n    ].includes(titreDemarche.typeId)\n  ) {\n    //  - le type de l’étape est publication au JO (dpu) ou décision implicite (dim)\n    //  - et le statut de l’étape est acceptée ou rejetée\n    if (\n      ['acc', 'rej'].includes(titreEtapeRecent.statutId) &&\n      (['dpu', 'dim'].includes(titreEtapeRecent.typeId) ||\n        (titreTypeId === 'axm' && ['dex'].includes(titreEtapeRecent.typeId)) ||\n        (titreTypeId === 'prx' && ['rpu'].includes(titreEtapeRecent.typeId)))\n    ) {\n      //  - le statut de la démarche est égal au statut de l’étape:\n      // accepté (acc) ou rejeté(rej)\n      return titreEtapeRecent.statutId\n    }\n\n    //  - le type de l’étape est enregistrement de la demande (men)\n    //  - la date de l'étape est inférieure à la date du jour\n    if (\n      titreEtapeRecent.typeId === 'men' &&\n      new Date(titreEtapeRecent.date) < new Date()\n    ) {\n      //  - le statut de la démarche est “en instruction”\n      return 'ins'\n    }\n\n    //  - le type de l’étape est retrait de la demande (ret)\n    if (titreEtapeRecent.typeId === 'ret') {\n      //  - le statut de la démarche est “retirée”\n      return 'ret'\n    }\n\n    //  - le type de l’étape est dépôt de la demande (mdp)\n    //  - il n’y a pas d’étape après\n    if (titreEtapeRecent.typeId === 'mdp') {\n      //  - le statut de la démarche est “déposée”\n      return 'dep'\n    }\n\n    //  - le type de l’étape est formalisation de la demande (mfr)\n    if (titreEtapeRecent.typeId === 'mfr') {\n      //  - le statut de la démarche est “en construction”\n      return 'eco'\n    }\n\n    //  - le type de l’étape est recevabilité de la demande (mre)\n    //  - et le statut de l’étape est défavorable (def)\n    if (\n      titreEtapeRecent.typeId === 'mre' &&\n      titreEtapeRecent.statutId === 'def'\n    ) {\n      //  - le statut de la démarche est classée sans suite (cls)\n      return 'cls'\n    }\n\n    //  - le type de l’étape est décision expresse (dex)\n    //  - et le statut de l’étape est rejetée (rej)\n    if (\n      titreEtapeRecent.typeId === 'dex' &&\n      titreEtapeRecent.statutId === 'rej'\n    ) {\n      //  - le statut de la démarche est rejetée (rej)\n      return 'rej'\n    }\n\n    // sinon le statut de la démarche est indéterminé\n    return 'ind'\n  }\n\n  //  2. la démarche ne fait pas l’objet d’une demande (unilatérale)\n  //  - le nom de la démarche est égal à retrait ou abrogation ou prorogation\n  if (['ret', 'abr', 'prr', 'dec'].includes(titreDemarche.typeId)) {\n    // - le type de l’étape est publication au JO\n    // - et le statut de l’étape est terminée\n    if (\n      titreEtapeRecent.typeId === 'dpu' &&\n      titreEtapeRecent.statutId === 'fai'\n    ) {\n      // - le statut de la démarche est terminée\n      return 'ter'\n    }\n\n    // sinon, le statut de la démarche est “initiée”\n    return 'ini'\n  }\n\n  //  3. sinon, le statut est indéterminé\n  return 'ind'\n}\n\nexport default titreDemarcheStatutIdFind\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tasks/_utils/titre-demarche-statut-id-find.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 350,
    "kind": "function",
    "name": "titreDemarcheStatutIdFind",
    "memberof": "src/tasks/_utils/titre-demarche-statut-id-find.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tasks/_utils/titre-demarche-statut-id-find.js~titreDemarcheStatutIdFind",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tasks/_utils/titre-demarche-statut-id-find.js",
    "importStyle": "titreDemarcheStatutIdFind",
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "params": [
      {
        "name": "titreDemarche",
        "types": [
          "*"
        ]
      },
      {
        "name": "titreTypeId",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 351,
    "kind": "file",
    "name": "src/tasks/_utils/titre-demarches-asc-sort.js",
    "content": "// classe les démarches selon la date de leur première étape\nimport titreEtapesAscSort from './titre-etapes-asc-sort'\n\nconst titreDemarchesAscSort = titreDemarches =>\n  titreDemarches.sort((a, b) => {\n    // date identique -> todo\n    // if (titreEtapesAscSort(a)[0].date - titreEtapesAscSort(b)[0].date === 0) {\n    //   console.log(a.id, b.id)\n    // }\n    return titreEtapesAscSort(a)[0].date - titreEtapesAscSort(b)[0].date\n  })\n\nexport default titreDemarchesAscSort\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tasks/_utils/titre-demarches-asc-sort.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 352,
    "kind": "function",
    "name": "titreDemarchesAscSort",
    "memberof": "src/tasks/_utils/titre-demarches-asc-sort.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tasks/_utils/titre-demarches-asc-sort.js~titreDemarchesAscSort",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tasks/_utils/titre-demarches-asc-sort.js",
    "importStyle": "titreDemarchesAscSort",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "params": [
      {
        "name": "titreDemarches",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 353,
    "kind": "file",
    "name": "src/tasks/_utils/titre-etapes-asc-sort.js",
    "content": "// classe les étapes selon leur ordre: 1, 2, 3, …\nconst titreEtapesAscSort = titreDemarche =>\n  titreDemarche.etapes.sort((a, b) => a.ordre - b.ordre)\n\nexport default titreEtapesAscSort\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tasks/_utils/titre-etapes-asc-sort.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 354,
    "kind": "function",
    "name": "titreEtapesAscSort",
    "memberof": "src/tasks/_utils/titre-etapes-asc-sort.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tasks/_utils/titre-etapes-asc-sort.js~titreEtapesAscSort",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tasks/_utils/titre-etapes-asc-sort.js",
    "importStyle": "titreEtapesAscSort",
    "description": null,
    "lineNumber": 2,
    "undocument": true,
    "params": [
      {
        "name": "titreDemarche",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 355,
    "kind": "file",
    "name": "src/tasks/_utils/titre-etapes-desc-sort.js",
    "content": "// classe les étapes selon leur ordre inverse: 3, 2, 1.\nconst titreEtapesSortDesc = td => td.etapes.sort((a, b) => b.ordre - a.ordre)\n\nexport default titreEtapesSortDesc\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tasks/_utils/titre-etapes-desc-sort.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 356,
    "kind": "function",
    "name": "titreEtapesSortDesc",
    "memberof": "src/tasks/_utils/titre-etapes-desc-sort.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tasks/_utils/titre-etapes-desc-sort.js~titreEtapesSortDesc",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tasks/_utils/titre-etapes-desc-sort.js",
    "importStyle": "titreEtapesSortDesc",
    "description": null,
    "lineNumber": 2,
    "undocument": true,
    "params": [
      {
        "name": "td",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 357,
    "kind": "file",
    "name": "src/tasks/_utils/titre-phases-find.js",
    "content": "import * as dateFormat from 'dateformat'\nimport titreDemarcheDateFinAndDureeFind from './titre-demarche-date-fin-duree-find'\nimport titreDemarchePhasesFilter from './titre-demarche-phases-filter'\nimport titreEtapesDescSort from './titre-etapes-desc-sort'\nimport titreEtapesAscSort from './titre-etapes-asc-sort'\n\n// retourne un tableau contenant les phases d'un titre\nconst titrePhasesFind = (titreDemarchesByTitre, titreTypeId) => {\n  // filtre les démarches qui donnent lieu à des phases\n  const titreDemarchesByTitreFiltered = titreDemarchesByTitre.filter(\n    titreDemarche => titreDemarchePhasesFilter(titreDemarche, titreTypeId)\n  )\n\n  return titreDemarchesByTitreFiltered.reduce(\n    (titrePhases, titreDemarche, index) => {\n      const dateFin = titrePhaseDateFinFind(\n        titreDemarchesByTitre,\n        titreDemarchesByTitreFiltered,\n        titreDemarche\n      )\n\n      const dateDebut = titrePhaseDateDebutFind(\n        titreDemarche,\n        titrePhases,\n        index,\n        titreTypeId\n      )\n\n      // si\n      // - la date du jour est plus récente que la date de fin\n      // le statut est valide\n      // sinon,\n      // - le statut est échu\n      const statutId =\n        dateFormat(new Date(), 'yyyy-mm-dd') > dateFin ? 'ech' : 'val'\n\n      return [\n        ...titrePhases,\n        {\n          titreDemarcheId: titreDemarche.id,\n          dateFin,\n          dateDebut,\n          statutId\n        }\n      ]\n    },\n    []\n  )\n}\n\nconst titrePhaseDateDebutFind = (\n  titreDemarche,\n  titrePhases,\n  index,\n  titreTypeId\n) => {\n  // retourne la phase précédente\n  const phasePrevious = titrePhases[index - 1]\n\n  // retourne une étape de dpu si celle-ci possède une date de début\n  const etapeDpuHasDateDebut = titreEtapesDescSort(titreDemarche)\n    .filter(\n      titreEtape =>\n        titreEtape.typeId === 'dpu' ||\n        (titreTypeId === 'axm' && titreEtape.typeId === 'dex') ||\n        (titreTypeId === 'prx' && titreEtape.typeId === 'rpu')\n    )\n    .find(te => te.dateDebut)\n\n  // si\n  // - la démarche est un octroi\n  // - cette démarche a une étape dpu qui possède une date de début\n  if (titreDemarche.typeId === 'oct' && etapeDpuHasDateDebut) {\n    // la date de début est égale à la date de début de la dpu\n    return dateFormat(etapeDpuHasDateDebut.dateDebut, 'yyyy-mm-dd')\n  }\n\n  // si il y a une phase précédente\n  if (phasePrevious) {\n    // la date de début est égale à la date de fin de l'étape précédente\n    return phasePrevious.dateFin\n  }\n\n  // sinon, la date de début est égale à la date de la première étape de dpu\n  const titreEtapeDpuFirst = titreEtapesAscSort(titreDemarche).find(\n    titreEtape =>\n      titreEtape.typeId === 'dpu' ||\n      (titreTypeId === 'axm' && titreEtape.typeId === 'dex') ||\n      (titreTypeId === 'prx' && titreEtape.typeId === 'rpu')\n  )\n\n  return titreEtapeDpuFirst && dateFormat(titreEtapeDpuFirst.date, 'yyyy-mm-dd')\n}\n\n// trouve la date de fin d'une phase\n// in:\n// - titreDemarchesByTitre: toutes les démarches du titre,\n//   utile pour trouver la date de fin en cas d'annulation\n// - titreDemarchesByTitreFiltered: uniquement les démarches\n//   d'un titre qui donnent lieu à des phases\n// - titreDemarche: la démarche dont on cherche la date de fin\n\nconst titrePhaseDateFinFind = (\n  titreDemarchesByTitre,\n  titreDemarchesByTitreFiltered,\n  titreDemarche\n) => {\n  // trouve une démarche d'annulation si elle existe\n  const titreDemarcheAnnulation = demarcheAnnulationFind(\n    titreDemarchesByTitre,\n    titreDemarche.annulationDemarcheId\n  )\n\n  // si il y a une démarche d'annulation\n  // retourne sa date de fin\n  if (titreDemarcheAnnulation !== null) {\n    return titreDemarcheDateFinAndDureeFind(\n      titreDemarchesByTitre.slice().reverse(),\n      titreDemarcheAnnulation.ordre\n    ).dateFin\n  }\n\n  return titreDemarcheDateFinAndDureeFind(\n    titreDemarchesByTitreFiltered.slice().reverse(),\n    titreDemarche.ordre\n  ).dateFin\n}\n\nconst demarcheAnnulationFind = (\n  titreDemarchesByTitre,\n  annulationDemarcheId\n) => {\n  if (!annulationDemarcheId) {\n    return null\n  }\n\n  return titreDemarchesByTitre.find(t => t.id === annulationDemarcheId)\n}\n\nexport default titrePhasesFind\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tasks/_utils/titre-phases-find.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 358,
    "kind": "function",
    "name": "titrePhaseDateDebutFind",
    "memberof": "src/tasks/_utils/titre-phases-find.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tasks/_utils/titre-phases-find.js~titrePhaseDateDebutFind",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tasks/_utils/titre-phases-find.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 51,
    "undocument": true,
    "params": [
      {
        "name": "titreDemarche",
        "types": [
          "*"
        ]
      },
      {
        "name": "titrePhases",
        "types": [
          "*"
        ]
      },
      {
        "name": "index",
        "types": [
          "*"
        ]
      },
      {
        "name": "titreTypeId",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 359,
    "kind": "function",
    "name": "titrePhaseDateFinFind",
    "memberof": "src/tasks/_utils/titre-phases-find.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tasks/_utils/titre-phases-find.js~titrePhaseDateFinFind",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tasks/_utils/titre-phases-find.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 103,
    "undocument": true,
    "params": [
      {
        "name": "titreDemarchesByTitre",
        "types": [
          "*"
        ]
      },
      {
        "name": "titreDemarchesByTitreFiltered",
        "types": [
          "*"
        ]
      },
      {
        "name": "titreDemarche",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 360,
    "kind": "function",
    "name": "demarcheAnnulationFind",
    "memberof": "src/tasks/_utils/titre-phases-find.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tasks/_utils/titre-phases-find.js~demarcheAnnulationFind",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tasks/_utils/titre-phases-find.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 129,
    "undocument": true,
    "params": [
      {
        "name": "titreDemarchesByTitre",
        "types": [
          "*"
        ]
      },
      {
        "name": "annulationDemarcheId",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 361,
    "kind": "function",
    "name": "titrePhasesFind",
    "memberof": "src/tasks/_utils/titre-phases-find.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tasks/_utils/titre-phases-find.js~titrePhasesFind",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tasks/_utils/titre-phases-find.js",
    "importStyle": "titrePhasesFind",
    "description": null,
    "lineNumber": 8,
    "undocument": true,
    "params": [
      {
        "name": "titreDemarchesByTitre",
        "types": [
          "*"
        ]
      },
      {
        "name": "titreTypeId",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 362,
    "kind": "file",
    "name": "src/tasks/_utils/titre-prop-etape-id-find.js",
    "content": "// retourne l'id de la dernière étape acceptée\n// de la dernière démarche acceptée\n// pour laquelle la propriété existe\n\nconst titrePropEtapeIdFind = (titreDemarches, prop) =>\n  // filtre les démarches acceptée, terminée ou en instruction\n  titreDemarches\n    .filter(titreDemarche =>\n      ['acc', 'ter', 'ins'].includes(titreDemarche.statutId)\n    )\n    // parcourt les démarches\n    .reduce((etapeId, titreDemarche) => {\n      // Si la démarche est en instruction,\n      // on ne prend en compte que l'octroi (demande initiale)\n      if (\n        etapeId ||\n        (titreDemarche.statutId === 'ins' && titreDemarche.typeId !== 'oct')\n      ) {\n        return etapeId\n      }\n\n      // filtre les étapes acceptation, fait ou favorable\n      const etape = titreDemarche.etapes\n        .filter(\n          titreEtape =>\n            ['acc', 'fai', 'fav'].includes(titreEtape.statutId) &&\n            (['dpu', 'dex', 'rpu'].includes(titreEtape.typeId) ||\n              // Si l'étape est une formalisation de la demande,\n              // on ne prend en compte que pour un octroi (demande initiale)\n              (titreEtape.typeId === 'mfr' && titreDemarche.typeId === 'oct'))\n        )\n        // trouve une étape qui contient la propriété\n        .find(\n          titreEtape =>\n            (titreEtape[prop] &&\n              Array.isArray(titreEtape[prop]) &&\n              titreEtape[prop].length) ||\n            (titreEtape[prop] && !Array.isArray(titreEtape[prop]))\n        )\n\n      // si l'étape existe, retourne son id\n      // sinon retourne `null`\n      return (etape && etape.id) || (!etape && null)\n    }, null)\n\nexport default titrePropEtapeIdFind\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tasks/_utils/titre-prop-etape-id-find.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 363,
    "kind": "function",
    "name": "titrePropEtapeIdFind",
    "memberof": "src/tasks/_utils/titre-prop-etape-id-find.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tasks/_utils/titre-prop-etape-id-find.js~titrePropEtapeIdFind",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tasks/_utils/titre-prop-etape-id-find.js",
    "importStyle": "titrePropEtapeIdFind",
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "params": [
      {
        "name": "titreDemarches",
        "types": [
          "*"
        ]
      },
      {
        "name": "prop",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 364,
    "kind": "file",
    "name": "src/tasks/_utils/titre-statut-id-find.js",
    "content": "import * as dateFormat from 'dateformat'\nimport titreDateFinFind from './titre-date-fin-find'\n\nconst titreStatutIdFind = titre => {\n  const today = dateFormat(new Date(), 'yyyy-mm-dd')\n\n  // si il y a une seule démarche (octroi)\n  if (\n    titre.demarches.length === 1 &&\n    titre.demarches[0].typeId === 'oct' &&\n    ['ins', 'dep', 'rej', 'cls', 'ret'].includes(titre.demarches[0].statutId)\n  ) {\n    // le statut de la démarche est en instruction ou déposée\n    if (['ins', 'dep'].includes(titre.demarches[0].statutId)) {\n      // le statut du titre est demande initiale\n      return 'dmi'\n    }\n\n    // le statut de la démarche est rejetée ou classée sans suite ou retirée\n    if (['rej', 'cls', 'ret'].includes(titre.demarches[0].statutId)) {\n      // le statut du titre est demande classée\n      return 'dmc'\n    }\n\n    return 'ind'\n  }\n\n  // une démarche a le statut en instruction\n  if (titre.demarches.find(d => d.statutId === 'ins')) {\n    // le statut du titre est modification en instance\n    return 'mod'\n  }\n\n  // la date du jour est inférieure à la date d’échéance\n  if (today < titreDateFinFind(titre.demarches)) {\n    // le statut du titre est valide\n    return 'val'\n  }\n\n  // le statut du titre est échu\n  return 'ech'\n}\n\nexport default titreStatutIdFind\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tasks/_utils/titre-statut-id-find.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 365,
    "kind": "function",
    "name": "titreStatutIdFind",
    "memberof": "src/tasks/_utils/titre-statut-id-find.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tasks/_utils/titre-statut-id-find.js~titreStatutIdFind",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tasks/_utils/titre-statut-id-find.js",
    "importStyle": "titreStatutIdFind",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "params": [
      {
        "name": "titre",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 366,
    "kind": "file",
    "name": "src/tasks/daily/index.js",
    "content": "import 'dotenv/config'\nimport '../../database/index'\n\nimport { titresGet } from '../../database/queries/titres'\nimport { titresDemarchesGet } from '../../database/queries/titres-demarches'\nimport { titresPhasesGet } from '../../database/queries/titres-phases'\nimport { titresEtapesGet } from '../../database/queries/titres-etapes'\n\nimport titresEtapesOrdreUpdate from './titres-etapes-ordre-update'\nimport titresDemarchesStatutIdUpdate from './titres-demarches-statut-ids-update'\nimport titresDemarchesOrdreUpdate from './titres-demarches-ordre-update'\nimport titresStatutIdsUpdate from './titres-statut-ids-update'\nimport titresPhasesUpdate from './titres-phases-update'\nimport titresPropsEtapeIdUpdate from './titres-props-etape-id-update'\n\nconst run = async () => {\n  // 1.\n  // détermine l'ordre des étapes\n  // en fonction de leur date\n  let titresEtapes = await titresEtapesGet({})\n  const titresEtapesOrdre = await titresEtapesOrdreUpdate(titresEtapes)\n\n  // 2.\n  // détermine le statut des démarches\n  // en fonction de ses étapes (type, ordre, statut)\n  let titres = await titresGet({})\n  let titresDemarches = await titresDemarchesGet({})\n  const titresDemarchesStatutId = await titresDemarchesStatutIdUpdate(\n    titresDemarches,\n    titres\n  )\n\n  // 3.\n  // détermine l'ordre des démarche\n  // en fonction de la date de leur première étape\n  titresDemarches = await titresDemarchesGet({})\n  const titresDemarchesOrdre = await titresDemarchesOrdreUpdate(titresDemarches)\n\n  // 4.\n  // détermine le statut des titres\n  // en fonction des démarches et de la date du jour\n  titres = await titresGet({})\n  const titresStatutIds = await titresStatutIdsUpdate(titres)\n\n  // 5.\n  // détermine les phases\n  // en fonction des démarches et de la date du jour\n  titres = await titresGet({})\n  titresDemarches = await titresDemarchesGet({})\n  let titresPhases = await titresPhasesGet()\n  const titresPhasesRes = await titresPhasesUpdate(\n    titres,\n    titresDemarches,\n    titresPhases\n  )\n\n  // 6.\n  // détermine les phases\n  // en fonction des démarches et de la date du jour\n  titres = await titresGet({})\n  const titresPropsEtapeId = await titresPropsEtapeIdUpdate(titres)\n\n  // logs\n  console.log(titresEtapesOrdre)\n  console.log(titresDemarchesStatutId)\n  console.log(titresDemarchesOrdre)\n  console.log(titresStatutIds)\n  console.log(titresPhasesRes)\n  console.log(titresPropsEtapeId)\n\n  console.log('Tâches quotidiennes executées')\n  process.exit()\n}\n\nrun()\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tasks/daily/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 367,
    "kind": "function",
    "name": "run",
    "memberof": "src/tasks/daily/index.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/tasks/daily/index.js~run",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tasks/daily/index.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 16,
    "undocument": true,
    "params": [],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 368,
    "kind": "file",
    "name": "src/tasks/daily/titres-demarches-ordre-update.js",
    "content": "import { titreDemarchesOrdreUpdate } from '../titre-demarches'\n\nconst titresDemarchesOrdreUpdate = async titresDemarches => {\n  const titresDemarchesByTitre = titresDemarchesByTitreGroup(titresDemarches)\n  const titresDemarchesUpdated = Object.keys(titresDemarchesByTitre).reduce(\n    (res, titreId) => {\n      const titreDemarchesOrdreUpdated = titreDemarchesOrdreUpdate(\n        titresDemarchesByTitre[titreId]\n      )\n\n      return [...res, ...titreDemarchesOrdreUpdated]\n    },\n    []\n  )\n\n  await Promise.all(titresDemarchesUpdated)\n\n  return `Mise à jour: ${titresDemarchesUpdated.length} ordres de démarches.`\n}\n\nconst titresDemarchesByTitreGroup = titresDemarches =>\n  titresDemarches.reduce((res, titreDemarche) => {\n    res[titreDemarche.titreId] = res[titreDemarche.titreId]\n      ? [...res[titreDemarche.titreId], titreDemarche]\n      : [titreDemarche]\n\n    return res\n  }, {})\n\nexport default titresDemarchesOrdreUpdate\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tasks/daily/titres-demarches-ordre-update.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 369,
    "kind": "function",
    "name": "titresDemarchesByTitreGroup",
    "memberof": "src/tasks/daily/titres-demarches-ordre-update.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tasks/daily/titres-demarches-ordre-update.js~titresDemarchesByTitreGroup",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tasks/daily/titres-demarches-ordre-update.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 21,
    "undocument": true,
    "params": [
      {
        "name": "titresDemarches",
        "types": [
          "*"
        ]
      }
    ],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 370,
    "kind": "function",
    "name": "titresDemarchesOrdreUpdate",
    "memberof": "src/tasks/daily/titres-demarches-ordre-update.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/tasks/daily/titres-demarches-ordre-update.js~titresDemarchesOrdreUpdate",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tasks/daily/titres-demarches-ordre-update.js",
    "importStyle": "titresDemarchesOrdreUpdate",
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "params": [
      {
        "name": "titresDemarches",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 371,
    "kind": "file",
    "name": "src/tasks/daily/titres-demarches-statut-ids-update.js",
    "content": "import { titreDemarcheStatutIdUpdate } from '../titre-demarches'\nimport titreDemarcheStatutIdFind from '../_utils/titre-demarche-statut-id-find'\n\n// met à jour le statut des démarches\nconst titresDemarchesUpdate = async (titresDemarches, titres) => {\n  const titresDemarchesUpdated = titresDemarches.reduce(\n    (arr, titreDemarche) => {\n      const titreTypeId = titres.find(t => t.id === titreDemarche.titreId)\n        .typeId\n      const statutId = titreDemarcheStatutIdFind(titreDemarche, titreTypeId)\n\n      const titreDemarcheUpdated = titreDemarcheStatutIdUpdate(\n        titreDemarche,\n        statutId\n      )\n\n      return titreDemarcheUpdated ? [...arr, titreDemarcheUpdated] : arr\n    },\n    []\n  )\n\n  await Promise.all(titresDemarchesUpdated)\n\n  return `Mise à jour: ${titresDemarchesUpdated.length} statuts de démarches.`\n}\n\nexport default titresDemarchesUpdate\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tasks/daily/titres-demarches-statut-ids-update.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 372,
    "kind": "function",
    "name": "titresDemarchesUpdate",
    "memberof": "src/tasks/daily/titres-demarches-statut-ids-update.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/tasks/daily/titres-demarches-statut-ids-update.js~titresDemarchesUpdate",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tasks/daily/titres-demarches-statut-ids-update.js",
    "importStyle": "titresDemarchesUpdate",
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "params": [
      {
        "name": "titresDemarches",
        "types": [
          "*"
        ]
      },
      {
        "name": "titres",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 373,
    "kind": "file",
    "name": "src/tasks/daily/titres-etapes-ordre-update.js",
    "content": "import { titreEtapesOrdreUpdate } from '../titre-etapes'\n\nconst titresEtapesOrdreUpdate = async titresEtapes => {\n  const titreEtapesByDemarches = titreEtapesByDemarchesGroup(titresEtapes)\n\n  const titresEtapesUpdated = Object.keys(titreEtapesByDemarches).reduce(\n    (arr, titreDemarche) => [\n      ...arr,\n      ...titreEtapesOrdreUpdate(titreEtapesByDemarches[titreDemarche])\n    ],\n    []\n  )\n\n  await Promise.all(titresEtapesUpdated)\n\n  return `Mise à jour: ${titresEtapesUpdated.length} ordres d'étapes.`\n}\n\n// retourne les étapes classées par démarche\nconst titreEtapesByDemarchesGroup = titresEtapes =>\n  titresEtapes.reduce((titreEtapesByDemarches, titreEtape) => {\n    titreEtapesByDemarches[titreEtape.titreDemarcheId] = titreEtapesByDemarches[\n      titreEtape.titreDemarcheId\n    ]\n      ? [...titreEtapesByDemarches[titreEtape.titreDemarcheId], titreEtape]\n      : [titreEtape]\n    return titreEtapesByDemarches\n  }, {})\n\nexport default titresEtapesOrdreUpdate\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tasks/daily/titres-etapes-ordre-update.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 374,
    "kind": "function",
    "name": "titreEtapesByDemarchesGroup",
    "memberof": "src/tasks/daily/titres-etapes-ordre-update.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tasks/daily/titres-etapes-ordre-update.js~titreEtapesByDemarchesGroup",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tasks/daily/titres-etapes-ordre-update.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 20,
    "undocument": true,
    "params": [
      {
        "name": "titresEtapes",
        "types": [
          "*"
        ]
      }
    ],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 375,
    "kind": "function",
    "name": "titresEtapesOrdreUpdate",
    "memberof": "src/tasks/daily/titres-etapes-ordre-update.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/tasks/daily/titres-etapes-ordre-update.js~titresEtapesOrdreUpdate",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tasks/daily/titres-etapes-ordre-update.js",
    "importStyle": "titresEtapesOrdreUpdate",
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "params": [
      {
        "name": "titresEtapes",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 376,
    "kind": "file",
    "name": "src/tasks/daily/titres-phases-update.js",
    "content": "import { titrePhaseUpdate, titrePhaseDelete } from '../titre-phases'\n\nimport titrePhasesFind from '../_utils/titre-phases-find'\n\nconst titresPhasesUpdate = async (titres, titresDemarches, titresPhasesOld) => {\n  // créé un objet la liste des titres { [titreId]: titre.typeId, … }\n  const titreTypeIdsList = titres.reduce((res, titre) => {\n    res[titre.id] = titre.typeId\n    return res\n  }, {})\n\n  // regroupe les démarches par titre\n  const titresDemarchesGroupedByTitres = titreDemarchesByTitreGroup(\n    titresDemarches\n  )\n\n  // retourne un tableau avec les phases\n  // crées à partir des démarches\n  const titresPhases = Object.keys(titresDemarchesGroupedByTitres).reduce(\n    (res, titreId) => [\n      ...res,\n      ...titrePhasesFind(\n        titresDemarchesGroupedByTitres[titreId],\n        titreTypeIdsList[titreId]\n      )\n    ],\n    []\n  )\n\n  // retourne un tableau de requêtes pour\n  // - créer les nouvelles phases\n  // - modifier les phases existantes\n  const titresPhasesUpdated = titresPhases.reduce(\n    (res, titrePhase) => titrePhaseUpdate(res, titrePhase, titresPhasesOld),\n    []\n  )\n\n  // retourne un tableau de requêtes pour\n  // - supprimer les phases qui n'existent plus\n  const titrePhasesDeleted = titresPhasesOld.reduce(\n    (res, titrePhaseOld) => titrePhaseDelete(res, titrePhaseOld, titresPhases),\n    []\n  )\n\n  await Promise.all([...titresPhasesUpdated, ...titrePhasesDeleted])\n\n  return `Mise à jour: ${titresPhasesUpdated.length} phases de titres.`\n}\n\nconst titreDemarchesByTitreGroup = titreDemarches =>\n  titreDemarches.reduce((titreDemarchesByTitres, titreDemarche) => {\n    titreDemarchesByTitres[titreDemarche.titreId] = titreDemarchesByTitres[\n      titreDemarche.titreId\n    ]\n      ? [...titreDemarchesByTitres[titreDemarche.titreId], titreDemarche]\n      : [titreDemarche]\n    return titreDemarchesByTitres\n  }, {})\n\nexport default titresPhasesUpdate\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tasks/daily/titres-phases-update.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 377,
    "kind": "function",
    "name": "titreDemarchesByTitreGroup",
    "memberof": "src/tasks/daily/titres-phases-update.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tasks/daily/titres-phases-update.js~titreDemarchesByTitreGroup",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tasks/daily/titres-phases-update.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 50,
    "undocument": true,
    "params": [
      {
        "name": "titreDemarches",
        "types": [
          "*"
        ]
      }
    ],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 378,
    "kind": "function",
    "name": "titresPhasesUpdate",
    "memberof": "src/tasks/daily/titres-phases-update.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/tasks/daily/titres-phases-update.js~titresPhasesUpdate",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tasks/daily/titres-phases-update.js",
    "importStyle": "titresPhasesUpdate",
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "params": [
      {
        "name": "titres",
        "types": [
          "*"
        ]
      },
      {
        "name": "titresDemarches",
        "types": [
          "*"
        ]
      },
      {
        "name": "titresPhasesOld",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 379,
    "kind": "file",
    "name": "src/tasks/daily/titres-props-etape-id-update.js",
    "content": "import { titrePropsUpdate, calculatedProps } from '../titres'\n\nconst titresPropsEtapeIdsUpdate = async titres => {\n  const titreUpdateRequests = titres.reduce((arr, titre) => {\n    const titrePropsUpdateRequests = calculatedProps.reduce((res, prop) => {\n      const titrePropsUpdated = titrePropsUpdate(titre, prop)\n\n      return titrePropsUpdated ? [...res, titrePropsUpdated] : res\n    }, [])\n\n    return [...arr, ...titrePropsUpdateRequests]\n  }, [])\n\n  await Promise.all(titreUpdateRequests)\n\n  return `Mise à jour: ${titreUpdateRequests.length} propriétés de titres.`\n}\n\nexport default titresPropsEtapeIdsUpdate\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tasks/daily/titres-props-etape-id-update.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 380,
    "kind": "function",
    "name": "titresPropsEtapeIdsUpdate",
    "memberof": "src/tasks/daily/titres-props-etape-id-update.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/tasks/daily/titres-props-etape-id-update.js~titresPropsEtapeIdsUpdate",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tasks/daily/titres-props-etape-id-update.js",
    "importStyle": "titresPropsEtapeIdsUpdate",
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "params": [
      {
        "name": "titres",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 381,
    "kind": "file",
    "name": "src/tasks/daily/titres-statut-ids-update.js",
    "content": "import { titreStatutIdUpdate } from '../titres'\n\nimport titreStatutIdFind from '../_utils/titre-statut-id-find'\n\nconst titresStatutIdsUpdate = async titres => {\n  const titresUpdated = titres.reduce((arr, titre) => {\n    const statutId = titreStatutIdFind(titre)\n    const titreUpdated = titreStatutIdUpdate(titre, statutId)\n\n    return titreUpdated ? [...arr, titreUpdated] : arr\n  }, [])\n\n  await Promise.all(titresUpdated)\n\n  return `Mise à jour: ${titresUpdated.length} statuts de titres.`\n}\nexport default titresStatutIdsUpdate\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tasks/daily/titres-statut-ids-update.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 382,
    "kind": "function",
    "name": "titresStatutIdsUpdate",
    "memberof": "src/tasks/daily/titres-statut-ids-update.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/tasks/daily/titres-statut-ids-update.js~titresStatutIdsUpdate",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tasks/daily/titres-statut-ids-update.js",
    "importStyle": "titresStatutIdsUpdate",
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "params": [
      {
        "name": "titres",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 383,
    "kind": "file",
    "name": "src/tasks/etape-update/index.js",
    "content": "import 'dotenv/config'\nimport '../../database/index'\nimport { titreGet } from '../../database/queries/titres'\nimport { titreDemarcheGet } from '../../database/queries/titres-demarches'\nimport { titreEtapeGet } from '../../database/queries/titres-etapes'\n\nimport titreEtapesOrdreUpdate from './titre-etapes-ordre-update'\nimport titreDemarcheStatutIdUpdate from './titre-demarche-statut-id-update'\nimport titreDemarchesOrdreUpdate from './titre-demarches-ordre-update'\nimport titreStatutIdsUpdate from './titre-statut-id-update'\nimport titrePhasesUpdate from './titre-phases-update'\nimport titrePropsEtapeIdUpdate from './titre-props-etape-id-update'\n\nconst run = async titreEtape => {\n  // détermine l'ordre des étapes\n  // en fonction de leur date\n\n  const titreEtapeOld = await titreEtapeGet(titreEtape.id)\n  const titreDemarcheId = titreEtapeOld.titreDemarcheId\n  let titreDemarche = await titreDemarcheGet(titreDemarcheId)\n  const titreId = titreDemarche.titreId\n  const titreEtapesOrdre = await titreEtapesOrdreUpdate(titreDemarche)\n\n  // détermine le statut de la démarche\n  // en fonction de ses étapes (type, ordre, statut)\n\n  titreDemarche = await titreDemarcheGet(titreDemarcheId)\n  let titre = await titreGet(titreId)\n  const titreTypeId = titre.typeId\n  const titreDemarcheStatutId = await titreDemarcheStatutIdUpdate(\n    titreDemarche,\n    titreTypeId\n  )\n\n  // détermine l'ordre des démarches\n  // en fonction de la date de leur première étape\n  titre = await titreGet(titreId)\n  const titreDemarchesOrdre = await titreDemarchesOrdreUpdate(titre.demarches)\n\n  // détermine le statut des titres\n  // en fonction des démarches et de la date du jour\n  titre = await titreGet(titreId)\n  const titreStatutIds = await titreStatutIdsUpdate(titre)\n\n  // détermine les phases\n  // en fonction des démarches et de la date du jour\n  titre = await titreGet(titreId)\n  const titresPhases = await titrePhasesUpdate(titre)\n\n  // détermine les phases\n  // en fonction des démarches et de la date du jour\n  titre = await titreGet(titreId)\n  const titresPropsEtapeId = await titrePropsEtapeIdUpdate(titre)\n\n  console.log(titreEtapesOrdre)\n  console.log(titreDemarcheStatutId)\n  console.log(titreDemarchesOrdre)\n  console.log(titreStatutIds)\n  console.log(titresPhases)\n  console.log(titresPropsEtapeId)\n\n  console.log('Étape mise à jour')\n}\n\nexport default run\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tasks/etape-update/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 384,
    "kind": "function",
    "name": "run",
    "memberof": "src/tasks/etape-update/index.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/tasks/etape-update/index.js~run",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tasks/etape-update/index.js",
    "importStyle": "run",
    "description": null,
    "lineNumber": 14,
    "undocument": true,
    "params": [
      {
        "name": "titreEtape",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 385,
    "kind": "file",
    "name": "src/tasks/etape-update/titre-demarche-statut-id-update.js",
    "content": "import { titreDemarcheStatutIdUpdate } from '../titre-demarches'\nimport titreDemarcheStatutIdFind from '../_utils/titre-demarche-statut-id-find'\n\n// met à jour le statut des démarches\nconst titresDemarchesUpdate = async (titreDemarche, titreTypeId) => {\n  const statutId = titreDemarcheStatutIdFind(titreDemarche, titreTypeId)\n\n  const titreDemarcheUpdated = titreDemarcheStatutIdUpdate(\n    titreDemarche,\n    statutId\n  )\n\n  if (titreDemarcheUpdated) {\n    await titreDemarcheUpdated\n  }\n\n  return `Mise à jour: ${titreDemarcheUpdated ? '1' : '0'} statut de démarches.`\n}\n\nmodule.exports = titresDemarchesUpdate\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tasks/etape-update/titre-demarche-statut-id-update.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 386,
    "kind": "function",
    "name": "titresDemarchesUpdate",
    "memberof": "src/tasks/etape-update/titre-demarche-statut-id-update.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/tasks/etape-update/titre-demarche-statut-id-update.js~titresDemarchesUpdate",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tasks/etape-update/titre-demarche-statut-id-update.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "params": [
      {
        "name": "titreDemarche",
        "types": [
          "*"
        ]
      },
      {
        "name": "titreTypeId",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "string"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 387,
    "kind": "file",
    "name": "src/tasks/etape-update/titre-demarches-ordre-update.js",
    "content": "import { titreDemarchesOrdreUpdate } from '../titre-demarches'\n\nconst titresDemarchesOrdreUpdate = async titresDemarchesByTitre => {\n  const titreDemarchesOrdreUpdated = titreDemarchesOrdreUpdate(\n    titresDemarchesByTitre\n  )\n\n  await Promise.all(titreDemarchesOrdreUpdated)\n\n  return `Mise à jour: ${\n    titreDemarchesOrdreUpdated.length\n  } ordres de démarches.`\n}\n\nmodule.exports = titresDemarchesOrdreUpdate\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tasks/etape-update/titre-demarches-ordre-update.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 388,
    "kind": "function",
    "name": "titresDemarchesOrdreUpdate",
    "memberof": "src/tasks/etape-update/titre-demarches-ordre-update.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/tasks/etape-update/titre-demarches-ordre-update.js~titresDemarchesOrdreUpdate",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tasks/etape-update/titre-demarches-ordre-update.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "params": [
      {
        "name": "titresDemarchesByTitre",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "string"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 389,
    "kind": "file",
    "name": "src/tasks/etape-update/titre-etapes-ordre-update.js",
    "content": "import { titreEtapesOrdreUpdate } from '../titre-etapes'\n\nconst titresEtapesOrdreUpdate = async titreDemarche => {\n  const titresEtapesUpdated = titreEtapesOrdreUpdate(titreDemarche.etapes)\n\n  await Promise.all(titresEtapesUpdated)\n\n  return `Mise à jour: ${titresEtapesUpdated.length} ordres d'étapes.`\n}\n\nmodule.exports = titresEtapesOrdreUpdate\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tasks/etape-update/titre-etapes-ordre-update.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 390,
    "kind": "function",
    "name": "titresEtapesOrdreUpdate",
    "memberof": "src/tasks/etape-update/titre-etapes-ordre-update.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/tasks/etape-update/titre-etapes-ordre-update.js~titresEtapesOrdreUpdate",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tasks/etape-update/titre-etapes-ordre-update.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "params": [
      {
        "name": "titreDemarche",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "string"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 391,
    "kind": "file",
    "name": "src/tasks/etape-update/titre-phases-update.js",
    "content": "import { titrePhaseUpdate, titrePhaseDelete } from '../titre-phases'\nimport titrePhasesFind from '../_utils/titre-phases-find'\n\nconst titresPhasesUpdate = async titre => {\n  const titreTypeId = titre.typeId\n  // retourne les démarches enregistrées en base\n\n  // retourne les phases enregistrées en base\n  const titresPhasesOld = titre.demarches.reduce(\n    (res, td) => (td.phase ? [...res, td.phase] : res),\n    []\n  )\n\n  // retourne un tableau avec les phases\n  // crées à partir des démarches\n  const titresPhases = titrePhasesFind(titre.demarches, titreTypeId)\n\n  // retourne un tableau de requêtes pour\n  // - créer les nouvelles phases\n  // - modifier les phases existantes\n  const titresPhasesUpdated = titresPhases.reduce(\n    (res, titrePhase) => titrePhaseUpdate(res, titrePhase, titresPhasesOld),\n    []\n  )\n\n  // retourne un tableau de requêtes pour\n  // - supprimer les phases qui n'existent plus\n  const titrePhasesDeleted = titresPhasesOld.reduce(\n    (res, titrePhaseOld) => titrePhaseDelete(res, titrePhaseOld, titresPhases),\n    []\n  )\n\n  await Promise.all([...titresPhasesUpdated, ...titrePhasesDeleted])\n\n  return `Mise à jour: ${titresPhasesUpdated.length} phases de titres.`\n}\n\nmodule.exports = titresPhasesUpdate\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tasks/etape-update/titre-phases-update.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 392,
    "kind": "function",
    "name": "titresPhasesUpdate",
    "memberof": "src/tasks/etape-update/titre-phases-update.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/tasks/etape-update/titre-phases-update.js~titresPhasesUpdate",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tasks/etape-update/titre-phases-update.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "params": [
      {
        "name": "titre",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "string"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 393,
    "kind": "file",
    "name": "src/tasks/etape-update/titre-props-etape-id-update.js",
    "content": "import { titrePropsUpdate, calculatedProps } from '../titres'\n\nconst titresPropsEtapeIdsUpdate = async titre => {\n  const titrePropsUpdateRequests = calculatedProps.reduce((res, prop) => {\n    const titrePropsUpdated = titrePropsUpdate(titre, prop)\n\n    return titrePropsUpdated ? [...res, titrePropsUpdated] : res\n  }, [])\n\n  await Promise.all(titrePropsUpdateRequests)\n\n  return `Mise à jour: ${titrePropsUpdateRequests.length} propriétés de titres.`\n}\n\nmodule.exports = titresPropsEtapeIdsUpdate\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tasks/etape-update/titre-props-etape-id-update.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 394,
    "kind": "function",
    "name": "titresPropsEtapeIdsUpdate",
    "memberof": "src/tasks/etape-update/titre-props-etape-id-update.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/tasks/etape-update/titre-props-etape-id-update.js~titresPropsEtapeIdsUpdate",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tasks/etape-update/titre-props-etape-id-update.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "params": [
      {
        "name": "titre",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "string"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 395,
    "kind": "file",
    "name": "src/tasks/etape-update/titre-statut-id-update.js",
    "content": "import { titreStatutIdUpdate } from '../titres'\n\nimport titreStatutIdFind from '../_utils/titre-statut-id-find'\n\nconst titreStatutUpdate = async titre => {\n  const statutId = titreStatutIdFind(titre)\n  const titreUpdated = titreStatutIdUpdate(titre, statutId)\n\n  if (titreUpdated) {\n    await titreUpdated\n  }\n\n  return `Mise à jour: ${titreUpdated ? '1' : '0'} statuts de titres.`\n}\n\nmodule.exports = titreStatutUpdate\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tasks/etape-update/titre-statut-id-update.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 396,
    "kind": "function",
    "name": "titreStatutUpdate",
    "memberof": "src/tasks/etape-update/titre-statut-id-update.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/tasks/etape-update/titre-statut-id-update.js~titreStatutUpdate",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tasks/etape-update/titre-statut-id-update.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "params": [
      {
        "name": "titre",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "string"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 397,
    "kind": "file",
    "name": "src/tasks/index.js",
    "content": "/**\n * @typedef {Object} titreDemarche\n * @property {!String} id id de la démarche\n * @property {!string} titreId id du titre minier\n * @property {!string} typeId id du type de la démarche\n * @property {!string} statutId id du statut de la démarche\n * @property {number} ordre ordre chronologique de la démarche au sein du titre\n * @property {boolean} annulationDemarcheId si la démarche est une annulation, cette id identifie la démarche annulée\n */\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tasks/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 398,
    "kind": "typedef",
    "name": "titreDemarche",
    "memberof": "src/tasks/index.js",
    "static": true,
    "longname": "src/tasks/index.js~titreDemarche",
    "access": "public",
    "description": "",
    "properties": [
      {
        "nullable": false,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "id",
        "description": "id de la démarche"
      },
      {
        "nullable": false,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "titreId",
        "description": "id du titre minier"
      },
      {
        "nullable": false,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "typeId",
        "description": "id du type de la démarche"
      },
      {
        "nullable": false,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "statutId",
        "description": "id du statut de la démarche"
      },
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": false,
        "name": "ordre",
        "description": "ordre chronologique de la démarche au sein du titre"
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "annulationDemarcheId",
        "description": "si la démarche est une annulation, cette id identifie la démarche annulée"
      }
    ],
    "type": {
      "types": [
        "Object"
      ],
      "optional": false,
      "name": "titreDemarche"
    }
  },
  {
    "__docId__": 399,
    "kind": "file",
    "name": "src/tasks/titre-demarches.js",
    "content": "import {\n  titreDemarcheStatutIdUpdate as queryTitreDemarcheStatutIdUpdate,\n  titreDemarcheOrdreUpdate as queryTitreDemarcheOrdreUpdate\n} from '../database/queries/titres-demarches'\n\nimport titreDemarchesAscSort from './_utils/titre-demarches-asc-sort'\n\n// met à jour le statut d'une démarche\nconst titreDemarcheStatutIdUpdate = (titreDemarche, statutId) =>\n  // filtre uniquement les démarches dont le statut a changé\n  statutId !== titreDemarche.statutId &&\n  queryTitreDemarcheStatutIdUpdate({\n    id: titreDemarche.id,\n    statutId\n  }).then(u => {\n    console.log(\n      `Mise à jour: démarche ${titreDemarche.id}, statutId ${statutId}`\n    )\n    return u\n  })\n\n// met à jour la propriété 'ordre' de toutes les démarches d'un titre\nconst titreDemarchesOrdreUpdate = titreDemarchesByTitre =>\n  titreDemarchesAscSort(titreDemarchesByTitre)\n    // to-do: faire un reduce au lieu de map-filter-map\n    .map((titreDemarche, index) => {\n      titreDemarche.ordreUpdated = index + 1\n      return titreDemarche\n    })\n    .filter(titreDemarche => titreDemarche.ordreUpdated !== titreDemarche.ordre)\n    .map(titreDemarche => {\n      return queryTitreDemarcheOrdreUpdate({\n        id: titreDemarche.id,\n        ordre: titreDemarche.ordreUpdated\n      }).then(u => {\n        console.log(\n          `Mise à jour: démarche ${titreDemarche.id}, ordre ${\n            titreDemarche.ordreUpdated\n          }`\n        )\n        return u\n      })\n    })\n\nexport { titreDemarcheStatutIdUpdate, titreDemarchesOrdreUpdate }\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tasks/titre-demarches.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 400,
    "kind": "function",
    "name": "titreDemarcheStatutIdUpdate",
    "memberof": "src/tasks/titre-demarches.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tasks/titre-demarches.js~titreDemarcheStatutIdUpdate",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tasks/titre-demarches.js",
    "importStyle": "{titreDemarcheStatutIdUpdate}",
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "params": [
      {
        "name": "titreDemarche",
        "types": [
          "*"
        ]
      },
      {
        "name": "statutId",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 401,
    "kind": "function",
    "name": "titreDemarchesOrdreUpdate",
    "memberof": "src/tasks/titre-demarches.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tasks/titre-demarches.js~titreDemarchesOrdreUpdate",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tasks/titre-demarches.js",
    "importStyle": "{titreDemarchesOrdreUpdate}",
    "description": null,
    "lineNumber": 23,
    "undocument": true,
    "params": [
      {
        "name": "titreDemarchesByTitre",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 402,
    "kind": "file",
    "name": "src/tasks/titre-etapes.js",
    "content": "import { titreEtapeUpdate as queryTitreEtapeUpdate } from '../database/queries/titres-etapes'\n\nconst titreEtapesOrdreUpdate = titreEtapesByDemarche =>\n  titreEtapesByDemarche\n    .sort((a, b) => a.date - b.date)\n    .map((titreEtape, index) => {\n      titreEtape.ordreNew = index + 1\n      return titreEtape\n    })\n    .filter(titreEtape => titreEtape.ordreNew !== titreEtape.ordre)\n    .map(titreEtape => {\n      const props = {\n        ordre: titreEtape.ordreNew\n      }\n\n      queryTitreEtapeUpdate({ id: titreEtape.id, props }).then(u => {\n        console.log(\n          `Mise à jour: étape ${titreEtape.id}, ${JSON.stringify(props)}`\n        )\n        return u\n      })\n    })\n\nexport { titreEtapesOrdreUpdate }\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tasks/titre-etapes.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 403,
    "kind": "function",
    "name": "titreEtapesOrdreUpdate",
    "memberof": "src/tasks/titre-etapes.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tasks/titre-etapes.js~titreEtapesOrdreUpdate",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tasks/titre-etapes.js",
    "importStyle": "{titreEtapesOrdreUpdate}",
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "params": [
      {
        "name": "titreEtapesByDemarche",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 404,
    "kind": "file",
    "name": "src/tasks/titre-phases.js",
    "content": "import * as dateFormat from 'dateformat'\n\nimport {\n  titrePhaseUpdate as queryTitrePhaseUpdate,\n  titrePhaseDelete as queryTitrePhaseDelete\n} from '../database/queries/titres-phases'\n\nconst titrePhaseUpdate = (res, titrePhase, titresPhasesOld) => {\n  const titrePhaseOld = titrePhaseEqualFind(\n    titrePhase.titreDemarcheId,\n    titresPhasesOld\n  )\n  const titrePhasePropsChanged = titrePhaseOld\n    ? titrePhasePropsChangedFind(titrePhase, titrePhaseOld)\n    : null\n\n  let titrePhaseUpdated\n\n  if (\n    // si la phase n'existe pas\n    !titrePhaseOld\n  ) {\n    titrePhaseUpdated = queryTitrePhaseUpdate({ titrePhase }).then(u => {\n      console.log(`Création: phase ${titrePhase.titreDemarcheId}`)\n\n      return u\n    })\n  } else if (\n    // si la phase existe et est modifiée\n    titrePhasePropsChanged\n  ) {\n    // console.log(titrePhasePropsChanged)\n    titrePhaseUpdated = queryTitrePhaseUpdate({ titrePhase }).then(u => {\n      console.log(\n        `Mise à jour: phase ${titrePhase.titreDemarcheId}, ${JSON.stringify(\n          titrePhasePropsChanged\n        )}`\n      )\n\n      return u\n    })\n  }\n\n  return titrePhaseUpdated ? [...res, titrePhaseUpdated] : res\n}\n\nconst titrePhaseDelete = (res, titrePhaseOld, titresPhases) => {\n  const titrePhase = titrePhaseEqualFind(\n    titrePhaseOld.titreDemarcheId,\n    titresPhases\n  )\n\n  let titrePhaseDeleted\n\n  if (!titrePhase) {\n    titrePhaseDeleted = queryTitrePhaseDelete({\n      titreDemarcheId: titrePhaseOld.titreDemarcheId\n    }).then(u => {\n      console.log(`Suppression: phase ${titrePhaseOld.titreDemarcheId}`)\n\n      return u\n    })\n  }\n  return titrePhaseDeleted ? [...res, titrePhaseDeleted] : res\n}\n\n// retourne une phase parmi les titrePhases en fonction de son id\nconst titrePhaseEqualFind = (titreDemarcheId, titrePhases) =>\n  titrePhases.find(tp => tp.titreDemarcheId === titreDemarcheId)\n\n// retourne les propriétés de la phase existante\n// qui sont différentes de la nouvelle phase\nconst titrePhasePropsChangedFind = (titrePhase, titrePhaseOld) =>\n  Object.keys(titrePhase).reduce((res, key) => {\n    if (titrePhaseOld[key] instanceof Date) {\n      titrePhaseOld[key] = dateFormat(titrePhaseOld[key], 'yyyy-mm-dd')\n    }\n\n    const mod = { [key]: [titrePhaseOld[key], titrePhase[key]] }\n\n    return titrePhase[key] === titrePhaseOld[key]\n      ? res\n      : res\n      ? Object.assign(res, mod)\n      : mod\n  }, null)\n\nexport { titrePhaseUpdate, titrePhaseDelete }\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tasks/titre-phases.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 405,
    "kind": "function",
    "name": "titrePhaseEqualFind",
    "memberof": "src/tasks/titre-phases.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tasks/titre-phases.js~titrePhaseEqualFind",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tasks/titre-phases.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 68,
    "undocument": true,
    "params": [
      {
        "name": "titreDemarcheId",
        "types": [
          "*"
        ]
      },
      {
        "name": "titrePhases",
        "types": [
          "*"
        ]
      }
    ],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 406,
    "kind": "function",
    "name": "titrePhasePropsChangedFind",
    "memberof": "src/tasks/titre-phases.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tasks/titre-phases.js~titrePhasePropsChangedFind",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tasks/titre-phases.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 73,
    "undocument": true,
    "params": [
      {
        "name": "titrePhase",
        "types": [
          "*"
        ]
      },
      {
        "name": "titrePhaseOld",
        "types": [
          "*"
        ]
      }
    ],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 407,
    "kind": "function",
    "name": "titrePhaseUpdate",
    "memberof": "src/tasks/titre-phases.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tasks/titre-phases.js~titrePhaseUpdate",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tasks/titre-phases.js",
    "importStyle": "{titrePhaseUpdate}",
    "description": null,
    "lineNumber": 8,
    "undocument": true,
    "params": [
      {
        "name": "res",
        "types": [
          "*"
        ]
      },
      {
        "name": "titrePhase",
        "types": [
          "*"
        ]
      },
      {
        "name": "titresPhasesOld",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 408,
    "kind": "function",
    "name": "titrePhaseDelete",
    "memberof": "src/tasks/titre-phases.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tasks/titre-phases.js~titrePhaseDelete",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tasks/titre-phases.js",
    "importStyle": "{titrePhaseDelete}",
    "description": null,
    "lineNumber": 47,
    "undocument": true,
    "params": [
      {
        "name": "res",
        "types": [
          "*"
        ]
      },
      {
        "name": "titrePhaseOld",
        "types": [
          "*"
        ]
      },
      {
        "name": "titresPhases",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 409,
    "kind": "file",
    "name": "src/tasks/titres-without-points-list.js",
    "content": "import 'dotenv/config'\nimport '../../database/index'\n\nimport { titresGet } from '../database/queries/titres'\n\nconst titresWithoutPointsList = async () => {\n  const titres = await titresGet({ domaineIds: ['g'] })\n\n  const list = titres.filter(\n    titre =>\n      titre.demarches.every(demarche =>\n        demarche.etapes.every(etape => etape.points.length === 0)\n      ) && titre.statutId === 'val'\n  )\n\n  return list.map(titre => titre.id)\n}\n\nconst run = async () => {\n  const res = await titresWithoutPointsList()\n  console.log(res)\n  console.log('Done')\n\n  process.exit()\n}\n\nrun()\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tasks/titres-without-points-list.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 410,
    "kind": "function",
    "name": "titresWithoutPointsList",
    "memberof": "src/tasks/titres-without-points-list.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/tasks/titres-without-points-list.js~titresWithoutPointsList",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tasks/titres-without-points-list.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 6,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 411,
    "kind": "function",
    "name": "run",
    "memberof": "src/tasks/titres-without-points-list.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/tasks/titres-without-points-list.js~run",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tasks/titres-without-points-list.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 19,
    "undocument": true,
    "params": [],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 412,
    "kind": "file",
    "name": "src/tasks/titres.js",
    "content": "import { titrePropsUpdate as queryTitrePropsUpdate } from '../database/queries/titres'\nimport titrePropEtapeIdFind from './_utils/titre-prop-etape-id-find'\n\nconst calculatedProps = [\n  'points',\n  'titulaires',\n  'amodiataires',\n  'administrations',\n  'surface',\n  'volume',\n  'substances'\n]\n\nconst titreStatutIdUpdate = (titre, statutId) =>\n  statutId !== titre.statutId &&\n  queryTitrePropsUpdate({\n    id: titre.id,\n    props: { statutId }\n  }).then(u => {\n    console.log(`Mise à jour: titre ${titre.id}, statutId ${statutId}`)\n    return u\n  })\n\nconst titrePropsUpdate = (titre, prop) => {\n  const propEtapeIdName = `${prop}TitreEtapeId`\n  const etapeId = titrePropEtapeIdFind(titre.demarches, prop)\n\n  return (\n    etapeId !== titre[propEtapeIdName] &&\n    queryTitrePropsUpdate({\n      id: titre.id,\n      props: { [propEtapeIdName]: etapeId }\n    }).then(u => {\n      console.log(`Mise à jour: titre ${titre.id}, ${prop}, ${etapeId}`)\n      return u\n    })\n  )\n}\n\nexport { calculatedProps, titreStatutIdUpdate, titrePropsUpdate }\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tasks/titres.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 413,
    "kind": "variable",
    "name": "calculatedProps",
    "memberof": "src/tasks/titres.js",
    "static": true,
    "longname": "src/tasks/titres.js~calculatedProps",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tasks/titres.js",
    "importStyle": "{calculatedProps}",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "type": {
      "types": [
        "string[]"
      ]
    }
  },
  {
    "__docId__": 414,
    "kind": "function",
    "name": "titreStatutIdUpdate",
    "memberof": "src/tasks/titres.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tasks/titres.js~titreStatutIdUpdate",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tasks/titres.js",
    "importStyle": "{titreStatutIdUpdate}",
    "description": null,
    "lineNumber": 14,
    "undocument": true,
    "params": [
      {
        "name": "titre",
        "types": [
          "*"
        ]
      },
      {
        "name": "statutId",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 415,
    "kind": "function",
    "name": "titrePropsUpdate",
    "memberof": "src/tasks/titres.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tasks/titres.js~titrePropsUpdate",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tasks/titres.js",
    "importStyle": "{titrePropsUpdate}",
    "description": null,
    "lineNumber": 24,
    "undocument": true,
    "params": [
      {
        "name": "titre",
        "types": [
          "*"
        ]
      },
      {
        "name": "prop",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 416,
    "kind": "file",
    "name": "src/tasks/utilisateur-add.js",
    "content": "import 'dotenv/config'\nimport '../../database/index'\nimport * as bcrypt from 'bcrypt'\n\nimport { utilisateurAdd } from '../database/queries/utilisateurs'\n\nconst password = process.env.ADMIN_PASSWORD\n\nconst utilisateur = {\n  id: process.env.ADMIN_ID,\n  email: process.env.ADMIN_EMAIL,\n  permissionId: 'super'\n}\n\nconst run = async () => {\n  utilisateur.motDePasse = await bcrypt.hash(password, 10)\n  await utilisateurAdd(utilisateur)\n  console.log('Utilisateur créé')\n  process.exit()\n}\n\nrun()\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tasks/utilisateur-add.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 417,
    "kind": "variable",
    "name": "password",
    "memberof": "src/tasks/utilisateur-add.js",
    "static": true,
    "longname": "src/tasks/utilisateur-add.js~password",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tasks/utilisateur-add.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 418,
    "kind": "variable",
    "name": "utilisateur",
    "memberof": "src/tasks/utilisateur-add.js",
    "static": true,
    "longname": "src/tasks/utilisateur-add.js~utilisateur",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tasks/utilisateur-add.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "type": {
      "types": [
        "{\"id\": *, \"email\": *, \"permissionId\": string}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 419,
    "kind": "function",
    "name": "run",
    "memberof": "src/tasks/utilisateur-add.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/tasks/utilisateur-add.js~run",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tasks/utilisateur-add.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 15,
    "undocument": true,
    "params": [],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 420,
    "kind": "file",
    "name": "src/tasks/utilisateur-remove.js",
    "content": "import 'dotenv/config'\nimport '../../database/index'\n\nimport { utilisateurRemove } from '../database/queries/utilisateurs'\n\nconst id = process.env.ADMIN_ID\n\nconst run = async () => {\n  const utilisateur = await utilisateurRemove(id)\n  if (utilisateur) {\n    console.log('Utilisateur supprimé')\n  } else {\n    console.log('Aucun utilisateur supprimé')\n  }\n  process.exit()\n}\n\nrun()\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tasks/utilisateur-remove.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 421,
    "kind": "variable",
    "name": "id",
    "memberof": "src/tasks/utilisateur-remove.js",
    "static": true,
    "longname": "src/tasks/utilisateur-remove.js~id",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tasks/utilisateur-remove.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 6,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 422,
    "kind": "function",
    "name": "run",
    "memberof": "src/tasks/utilisateur-remove.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/tasks/utilisateur-remove.js~run",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tasks/utilisateur-remove.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 8,
    "undocument": true,
    "params": [],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 423,
    "kind": "file",
    "name": "src/tools/dev/database/demarches-by-titre.js",
    "content": "import 'dotenv/config'\nimport '../../database/index'\n\nimport fileCreate from '../../import/_utils/file-create.js'\n\nimport { titresDemarchesGet } from '../../../database/queries/titres-demarches'\n\nasync function main() {\n  const res = await titresDemarchesGet({\n    titresIds: ['h-cxx-courdemanges-1988'],\n    demarchesIds: undefined\n  })\n\n  await fileCreate('test.json', JSON.stringify(res, null, 2))\n\n  console.log(res)\n\n  process.exit()\n}\n\nmain()\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tools/dev/database/demarches-by-titre.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 424,
    "kind": "function",
    "name": "main",
    "memberof": "src/tools/dev/database/demarches-by-titre.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/tools/dev/database/demarches-by-titre.js~main",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/dev/database/demarches-by-titre.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 8,
    "undocument": true,
    "params": [],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 425,
    "kind": "file",
    "name": "src/tools/dev/database/demarches-types.js",
    "content": "import 'dotenv/config'\nimport '../../database/index'\n\nimport fileCreate from '../../import/_utils/file-create.js'\n\nimport { demarchesTypesGet } from '../../../database/queries/metas'\n\nasync function main() {\n  const res = await demarchesTypesGet()\n\n  await fileCreate('test.json', JSON.stringify(res, null, 2))\n\n  console.log(res)\n\n  process.exit()\n}\n\nmain()\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tools/dev/database/demarches-types.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 426,
    "kind": "function",
    "name": "main",
    "memberof": "src/tools/dev/database/demarches-types.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/tools/dev/database/demarches-types.js~main",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/dev/database/demarches-types.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 8,
    "undocument": true,
    "params": [],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 427,
    "kind": "file",
    "name": "src/tools/dev/database/demarches-with-no-points.js",
    "content": "import 'dotenv/config'\nimport '../../database/index'\n\nimport { titresDemarchesGet } from '../../../database/queries/titres-demarches'\n\nasync function main() {\n  let res = await titresDemarchesGet({ demarchesIds: ['abr', 'ren', 'ret'] })\n\n  res = res.filter(({ typeId, etapes }) => {\n    if (typeId === 'ren') {\n      return !etapes.find(te => te.points.length)\n    }\n    return true\n  })\n\n  console.log(res.map(({ id, statutId }) => ({ id, statutId })))\n\n  process.exit()\n}\n\nmain()\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tools/dev/database/demarches-with-no-points.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 428,
    "kind": "function",
    "name": "main",
    "memberof": "src/tools/dev/database/demarches-with-no-points.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/tools/dev/database/demarches-with-no-points.js~main",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/dev/database/demarches-with-no-points.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 6,
    "undocument": true,
    "params": [],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 429,
    "kind": "file",
    "name": "src/tools/dev/database/titres.js",
    "content": "import 'dotenv/config'\nimport '../../database/index'\n\nimport { titresGet } from '../../../database/queries/titres-demarches'\n\nasync function main() {\n  const res = await titresGet({\n    typeIds: [\n      'apx',\n      'arc',\n      'arg',\n      'axm',\n      'cxx',\n      'prh',\n      'prx',\n      'pxc',\n      'pxg',\n      'pxh',\n      'pxm'\n    ],\n    domaineIds: ['c', 'g', 'h', 'm', 'w'],\n    statutIds: ['dmi', 'mod', 'val'],\n    substances: null,\n    noms: null,\n    entreprises: null,\n    references: null\n  })\n\n  console.log(res)\n\n  process.exit()\n}\n\nmain()\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tools/dev/database/titres.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 430,
    "kind": "function",
    "name": "main",
    "memberof": "src/tools/dev/database/titres.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/tools/dev/database/titres.js~main",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/dev/database/titres.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 6,
    "undocument": true,
    "params": [],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 431,
    "kind": "file",
    "name": "src/tools/dev/database/utilisateurs-by-titre.js",
    "content": "import 'dotenv/config'\nimport '../../database/index'\n\nimport { utilisateursGet } from '../../../database/queries/utilisateurs'\nimport { titreGet } from '../../../database/queries/titres'\n\nasync function main() {\n  const titre = await titreGet('m-pxm-esperance-1993')\n\n  const entrepriseIds = titre.titulaires.map(t => t.id)\n\n  console.log('titre.titulaires', titre.titulaires)\n  console.log('entrepriseIds', entrepriseIds)\n\n  const utilisateurs = await utilisateursGet({\n    entrepriseIds,\n    noms: undefined,\n    administrationIds: undefined,\n    permissionIds: undefined\n  })\n\n  console.log('utilisateurs', utilisateurs)\n\n  process.exit()\n}\n\nmain()\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tools/dev/database/utilisateurs-by-titre.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 432,
    "kind": "function",
    "name": "main",
    "memberof": "src/tools/dev/database/utilisateurs-by-titre.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/tools/dev/database/utilisateurs-by-titre.js~main",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/dev/database/utilisateurs-by-titre.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "params": [],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 433,
    "kind": "file",
    "name": "src/tools/dev/graphql-dsl-to-query-convert.js",
    "content": "import * as fetch from 'node-fetch'\nimport { introspectionQuery } from 'graphql'\nimport * as fs from 'fs'\nconst url = `http://localhost:4000`\n\nfetch(url, {\n  method: 'POST',\n  headers: { 'Content-Type': 'application/json' },\n  body: JSON.stringify({ query: introspectionQuery })\n})\n  .then(res => res.json())\n  .then(res =>\n    fs.writeFileSync(\n      'docs/graphql/schema.json',\n      JSON.stringify(res.data, null, 2)\n    )\n  )\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tools/dev/graphql-dsl-to-query-convert.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 434,
    "kind": "variable",
    "name": "url",
    "memberof": "src/tools/dev/graphql-dsl-to-query-convert.js",
    "static": true,
    "longname": "src/tools/dev/graphql-dsl-to-query-convert.js~url",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/dev/graphql-dsl-to-query-convert.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "type": {
      "types": [
        "string"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 435,
    "kind": "file",
    "name": "src/tools/dev/json/error-find.js",
    "content": "const entreprisesR = require('../sources/repertoire-entreprises-r.json')\nconst entreprisesC = require('../sources/repertoire-entreprises-c.json')\nconst entreprisesF = require('../sources/repertoire-entreprises-f.json')\nconst entreprisesG = require('../sources/repertoire-entreprises-g.json')\nconst entreprisesH = require('../sources/repertoire-entreprises-h.json')\nconst entreprisesM = require('../sources/repertoire-entreprises-m.json')\nconst entreprisesM973 = require('../sources/repertoire-entreprises-m973.json')\nconst entreprisesS = require('../sources/repertoire-entreprises-s.json')\nconst entreprisesW = require('../sources/repertoire-entreprises-w.json')\nconst titulairesR = require('../sources/titres-r-titulaires.json')\nconst titulairesC = require('../sources/titres-c-titulaires.json')\nconst titulairesF = require('../sources/titres-f-titulaires.json')\nconst titulairesG = require('../sources/titres-g-titulaires.json')\nconst titulairesH = require('../sources/titres-h-titulaires.json')\nconst titulairesM = require('../sources/titres-m-titulaires.json')\nconst titulairesM973 = require('../sources/titres-m973-titulaires.json')\nconst titulairesS = require('../sources/titres-s-titulaires.json')\nconst titulairesW = require('../sources/titres-w-titulaires.json')\n\nconst entreprises = [\n  ...entreprisesC,\n  ...entreprisesF,\n  ...entreprisesG,\n  ...entreprisesH,\n  ...entreprisesM,\n  ...entreprisesM973,\n  ...entreprisesR,\n  ...entreprisesS,\n  ...entreprisesW\n]\n\nconst titulaires = [\n  ...titulairesR,\n  ...titulairesC,\n  ...titulairesF,\n  ...titulairesG,\n  ...titulairesH,\n  ...titulairesM,\n  ...titulairesM973,\n  ...titulairesS,\n  ...titulairesW\n]\n\n// demarches.forEach(d => {\n//   const ti = titres.find(t => t.id === d.titre_id)\n//   if (!ti) console.log(d.titre_id)\n// })\n\ntitulaires.forEach(t => {\n  const d = entreprises.find(e => e.id === t.entreprise_id)\n  if (!d) {\n    console.log(t.titre_etape_id, t.entreprise_id)\n  }\n})\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tools/dev/json/error-find.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 436,
    "kind": "variable",
    "name": "entreprisesR",
    "memberof": "src/tools/dev/json/error-find.js",
    "static": true,
    "longname": "src/tools/dev/json/error-find.js~entreprisesR",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/dev/json/error-find.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 1,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 437,
    "kind": "variable",
    "name": "entreprisesC",
    "memberof": "src/tools/dev/json/error-find.js",
    "static": true,
    "longname": "src/tools/dev/json/error-find.js~entreprisesC",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/dev/json/error-find.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 2,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 438,
    "kind": "variable",
    "name": "entreprisesF",
    "memberof": "src/tools/dev/json/error-find.js",
    "static": true,
    "longname": "src/tools/dev/json/error-find.js~entreprisesF",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/dev/json/error-find.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 439,
    "kind": "variable",
    "name": "entreprisesG",
    "memberof": "src/tools/dev/json/error-find.js",
    "static": true,
    "longname": "src/tools/dev/json/error-find.js~entreprisesG",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/dev/json/error-find.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 440,
    "kind": "variable",
    "name": "entreprisesH",
    "memberof": "src/tools/dev/json/error-find.js",
    "static": true,
    "longname": "src/tools/dev/json/error-find.js~entreprisesH",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/dev/json/error-find.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 441,
    "kind": "variable",
    "name": "entreprisesM",
    "memberof": "src/tools/dev/json/error-find.js",
    "static": true,
    "longname": "src/tools/dev/json/error-find.js~entreprisesM",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/dev/json/error-find.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 6,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 442,
    "kind": "variable",
    "name": "entreprisesM973",
    "memberof": "src/tools/dev/json/error-find.js",
    "static": true,
    "longname": "src/tools/dev/json/error-find.js~entreprisesM973",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/dev/json/error-find.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 443,
    "kind": "variable",
    "name": "entreprisesS",
    "memberof": "src/tools/dev/json/error-find.js",
    "static": true,
    "longname": "src/tools/dev/json/error-find.js~entreprisesS",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/dev/json/error-find.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 8,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 444,
    "kind": "variable",
    "name": "entreprisesW",
    "memberof": "src/tools/dev/json/error-find.js",
    "static": true,
    "longname": "src/tools/dev/json/error-find.js~entreprisesW",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/dev/json/error-find.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 445,
    "kind": "variable",
    "name": "titulairesR",
    "memberof": "src/tools/dev/json/error-find.js",
    "static": true,
    "longname": "src/tools/dev/json/error-find.js~titulairesR",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/dev/json/error-find.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 10,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 446,
    "kind": "variable",
    "name": "titulairesC",
    "memberof": "src/tools/dev/json/error-find.js",
    "static": true,
    "longname": "src/tools/dev/json/error-find.js~titulairesC",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/dev/json/error-find.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 11,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 447,
    "kind": "variable",
    "name": "titulairesF",
    "memberof": "src/tools/dev/json/error-find.js",
    "static": true,
    "longname": "src/tools/dev/json/error-find.js~titulairesF",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/dev/json/error-find.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 12,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 448,
    "kind": "variable",
    "name": "titulairesG",
    "memberof": "src/tools/dev/json/error-find.js",
    "static": true,
    "longname": "src/tools/dev/json/error-find.js~titulairesG",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/dev/json/error-find.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 13,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 449,
    "kind": "variable",
    "name": "titulairesH",
    "memberof": "src/tools/dev/json/error-find.js",
    "static": true,
    "longname": "src/tools/dev/json/error-find.js~titulairesH",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/dev/json/error-find.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 14,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 450,
    "kind": "variable",
    "name": "titulairesM",
    "memberof": "src/tools/dev/json/error-find.js",
    "static": true,
    "longname": "src/tools/dev/json/error-find.js~titulairesM",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/dev/json/error-find.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 15,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 451,
    "kind": "variable",
    "name": "titulairesM973",
    "memberof": "src/tools/dev/json/error-find.js",
    "static": true,
    "longname": "src/tools/dev/json/error-find.js~titulairesM973",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/dev/json/error-find.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 16,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 452,
    "kind": "variable",
    "name": "titulairesS",
    "memberof": "src/tools/dev/json/error-find.js",
    "static": true,
    "longname": "src/tools/dev/json/error-find.js~titulairesS",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/dev/json/error-find.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 17,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 453,
    "kind": "variable",
    "name": "titulairesW",
    "memberof": "src/tools/dev/json/error-find.js",
    "static": true,
    "longname": "src/tools/dev/json/error-find.js~titulairesW",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/dev/json/error-find.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 18,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 454,
    "kind": "variable",
    "name": "entreprises",
    "memberof": "src/tools/dev/json/error-find.js",
    "static": true,
    "longname": "src/tools/dev/json/error-find.js~entreprises",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/dev/json/error-find.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 20,
    "undocument": true,
    "type": {
      "types": [
        "undefined[]"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 455,
    "kind": "variable",
    "name": "titulaires",
    "memberof": "src/tools/dev/json/error-find.js",
    "static": true,
    "longname": "src/tools/dev/json/error-find.js~titulaires",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/dev/json/error-find.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 32,
    "undocument": true,
    "type": {
      "types": [
        "undefined[]"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 456,
    "kind": "file",
    "name": "src/tools/export/_utils/db-process.js",
    "content": "import jsonToSpreadsheet from './json-to-spreadsheet'\nimport credentials from '../credentials'\n\nconst dbProcess = async definition => {\n  const content = await definition.fetch\n  await jsonToSpreadsheet(\n    definition.spreadsheetId,\n    credentials,\n    definition.tables,\n    content\n  )\n  return `Export: ${content.length} ${definition.name}`\n}\n\nexport default dbProcess\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tools/export/_utils/db-process.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 457,
    "kind": "function",
    "name": "dbProcess",
    "memberof": "src/tools/export/_utils/db-process.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/tools/export/_utils/db-process.js~dbProcess",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tools/export/_utils/db-process.js",
    "importStyle": "dbProcess",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "params": [
      {
        "name": "definition",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 458,
    "kind": "file",
    "name": "src/tools/export/_utils/google-spreadsheet-promisify.js",
    "content": "const gssUseServiceAccountAuth = (gss, credentials) =>\n  new Promise((resolve, reject) =>\n    gss.useServiceAccountAuth(credentials, (err, res) => {\n      if (err) {\n        console.log('Erreur useServiceAccountAuth:', err)\n        reject(err)\n      } else {\n        console.log('authentification: succès')\n        resolve(res)\n      }\n    })\n  )\n\nconst gssGetInfo = gss =>\n  new Promise((resolve, reject) =>\n    gss.getInfo((err, res) => {\n      if (err) {\n        console.log('Erreur getInfo:', err)\n        reject(err)\n      } else {\n        console.log('spreadsheet:', res.title)\n        resolve(res)\n      }\n    })\n  )\n\nconst worksheetRemove = (gss, worksheet) =>\n  new Promise((resolve, reject) => {\n    gss.removeWorksheet(worksheet.id, (err, res) => {\n      if (err) {\n        console.log('Erreur removeWorksheet:', err)\n        reject(err)\n      } else {\n        console.log(`worksheet supprimée: ${worksheet.title}`)\n        resolve(res)\n      }\n    })\n  })\n\nconst worksheetAdd = (gss, worksheet) =>\n  new Promise((resolve, reject) =>\n    gss.addWorksheet(worksheet, (err, res) => {\n      if (err) {\n        console.log('Erreur addWorksheet:', err)\n        reject(err)\n      } else {\n        console.log(`worksheet ajoutée: ${worksheet.title}`)\n        resolve(res)\n      }\n    })\n  )\n\nconst rowAdd = (gss, worksheetId, row) =>\n  new Promise((resolve, reject) =>\n    gss.addRow(worksheetId, row, (err, res) => {\n      if (err) {\n        console.log('Erreur addRow:', err)\n        reject(err)\n      } else {\n        console.log(`row ajouté: ${row[Object.keys(row)[0]]}`)\n        resolve(res)\n      }\n    })\n  )\n\nconst rowsGet = (gss, worksheetId, options) =>\n  new Promise((resolve, reject) =>\n    gss.getRows(worksheetId, options, (err, res) => {\n      if (err) {\n        console.log('Erreur getRows:', err)\n        reject(err)\n      } else {\n        resolve(res)\n      }\n    })\n  )\n\nconst rowDelete = row =>\n  new Promise((resolve, reject) =>\n    row.del((err, res) => {\n      if (err) {\n        console.log('Erreur rowSave:', err)\n        reject(err)\n      } else {\n        resolve(res)\n      }\n    })\n  )\n\nconst cellsGet = (gss, worksheetId, options) =>\n  new Promise((resolve, reject) =>\n    gss.getCells(worksheetId, options, (err, res) => {\n      if (err) {\n        console.log('Erreur getCells:', err)\n        reject(err)\n      } else {\n        resolve(res)\n      }\n    })\n  )\n\nconst cellSet = (cell, value) =>\n  new Promise((resolve, reject) =>\n    cell.setValue(value, (err, res) => {\n      if (err) {\n        console.log('Erreur cell.setValue:', err)\n        reject(err)\n      } else {\n        resolve(res)\n      }\n    })\n  )\n\nexport {\n  gssUseServiceAccountAuth,\n  gssGetInfo,\n  worksheetRemove,\n  worksheetAdd,\n  rowAdd,\n  rowsGet,\n  rowDelete,\n  cellsGet,\n  cellSet\n}\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tools/export/_utils/google-spreadsheet-promisify.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 459,
    "kind": "function",
    "name": "gssUseServiceAccountAuth",
    "memberof": "src/tools/export/_utils/google-spreadsheet-promisify.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tools/export/_utils/google-spreadsheet-promisify.js~gssUseServiceAccountAuth",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tools/export/_utils/google-spreadsheet-promisify.js",
    "importStyle": "{gssUseServiceAccountAuth}",
    "description": null,
    "lineNumber": 1,
    "undocument": true,
    "params": [
      {
        "name": "gss",
        "types": [
          "*"
        ]
      },
      {
        "name": "credentials",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 460,
    "kind": "function",
    "name": "gssGetInfo",
    "memberof": "src/tools/export/_utils/google-spreadsheet-promisify.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tools/export/_utils/google-spreadsheet-promisify.js~gssGetInfo",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tools/export/_utils/google-spreadsheet-promisify.js",
    "importStyle": "{gssGetInfo}",
    "description": null,
    "lineNumber": 14,
    "undocument": true,
    "params": [
      {
        "name": "gss",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 461,
    "kind": "function",
    "name": "worksheetRemove",
    "memberof": "src/tools/export/_utils/google-spreadsheet-promisify.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tools/export/_utils/google-spreadsheet-promisify.js~worksheetRemove",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tools/export/_utils/google-spreadsheet-promisify.js",
    "importStyle": "{worksheetRemove}",
    "description": null,
    "lineNumber": 27,
    "undocument": true,
    "params": [
      {
        "name": "gss",
        "types": [
          "*"
        ]
      },
      {
        "name": "worksheet",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 462,
    "kind": "function",
    "name": "worksheetAdd",
    "memberof": "src/tools/export/_utils/google-spreadsheet-promisify.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tools/export/_utils/google-spreadsheet-promisify.js~worksheetAdd",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tools/export/_utils/google-spreadsheet-promisify.js",
    "importStyle": "{worksheetAdd}",
    "description": null,
    "lineNumber": 40,
    "undocument": true,
    "params": [
      {
        "name": "gss",
        "types": [
          "*"
        ]
      },
      {
        "name": "worksheet",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 463,
    "kind": "function",
    "name": "rowAdd",
    "memberof": "src/tools/export/_utils/google-spreadsheet-promisify.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tools/export/_utils/google-spreadsheet-promisify.js~rowAdd",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tools/export/_utils/google-spreadsheet-promisify.js",
    "importStyle": "{rowAdd}",
    "description": null,
    "lineNumber": 53,
    "undocument": true,
    "params": [
      {
        "name": "gss",
        "types": [
          "*"
        ]
      },
      {
        "name": "worksheetId",
        "types": [
          "*"
        ]
      },
      {
        "name": "row",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 464,
    "kind": "function",
    "name": "rowsGet",
    "memberof": "src/tools/export/_utils/google-spreadsheet-promisify.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tools/export/_utils/google-spreadsheet-promisify.js~rowsGet",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tools/export/_utils/google-spreadsheet-promisify.js",
    "importStyle": "{rowsGet}",
    "description": null,
    "lineNumber": 66,
    "undocument": true,
    "params": [
      {
        "name": "gss",
        "types": [
          "*"
        ]
      },
      {
        "name": "worksheetId",
        "types": [
          "*"
        ]
      },
      {
        "name": "options",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 465,
    "kind": "function",
    "name": "rowDelete",
    "memberof": "src/tools/export/_utils/google-spreadsheet-promisify.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tools/export/_utils/google-spreadsheet-promisify.js~rowDelete",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tools/export/_utils/google-spreadsheet-promisify.js",
    "importStyle": "{rowDelete}",
    "description": null,
    "lineNumber": 78,
    "undocument": true,
    "params": [
      {
        "name": "row",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 466,
    "kind": "function",
    "name": "cellsGet",
    "memberof": "src/tools/export/_utils/google-spreadsheet-promisify.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tools/export/_utils/google-spreadsheet-promisify.js~cellsGet",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tools/export/_utils/google-spreadsheet-promisify.js",
    "importStyle": "{cellsGet}",
    "description": null,
    "lineNumber": 90,
    "undocument": true,
    "params": [
      {
        "name": "gss",
        "types": [
          "*"
        ]
      },
      {
        "name": "worksheetId",
        "types": [
          "*"
        ]
      },
      {
        "name": "options",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 467,
    "kind": "function",
    "name": "cellSet",
    "memberof": "src/tools/export/_utils/google-spreadsheet-promisify.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tools/export/_utils/google-spreadsheet-promisify.js~cellSet",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tools/export/_utils/google-spreadsheet-promisify.js",
    "importStyle": "{cellSet}",
    "description": null,
    "lineNumber": 102,
    "undocument": true,
    "params": [
      {
        "name": "cell",
        "types": [
          "*"
        ]
      },
      {
        "name": "value",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 468,
    "kind": "file",
    "name": "src/tools/export/_utils/json-to-spreadsheet.js",
    "content": "import * as PQueue from 'p-queue'\nimport * as GoogleSpreadsheet from 'google-spreadsheet'\nimport * as decamelize from 'decamelize'\nimport rowFormat from './row-format'\n\nimport {\n  gssUseServiceAccountAuth,\n  gssGetInfo,\n  worksheetRemove,\n  worksheetAdd,\n  rowAdd,\n  cellsGet,\n  cellSet\n} from './google-spreadsheet-promisify'\n\nconst jsonToSpreadsheet = async (\n  spreadsheetId,\n  credentials,\n  tables,\n  content\n) => {\n  // instancie le constructeur\n  const gss = new GoogleSpreadsheet(spreadsheetId)\n\n  // authentification dans google\n  await gssUseServiceAccountAuth(gss, credentials)\n\n  // obtiens les infos sur la spreadsheet\n  const infos = await gssGetInfo(gss)\n\n  // si l'onglet 'tmp' n'existe pas, le créer\n  if (!infos.worksheets.find(w => w.title === 'tmp')) {\n    await worksheetAdd(gss, { title: 'tmp' })\n  }\n\n  // retourne un tableau des onglets à supprimer\n  const worksheetsRemove = infos.worksheets.filter(w => w.title !== 'tmp')\n\n  // retourne un tableau avec les requêtes pour supprimer les onglets\n  const worksheetRemovePromises = worksheetsRemove.map(w =>\n    worksheetRemove(gss, w)\n  )\n\n  // supprime les onglets\n  await Promise.all(worksheetRemovePromises)\n\n  // retourne un tableau avec les requêtes pour ajouter les nouveaux onglets\n  const worksheetsPromises = tables.map(({ name, columns }) => () =>\n    worksheetAdd(gss, {\n      title: decamelize(name),\n      // id est un mot clé reservé par l'API google\n      // pour contourner cette limitation, on converti id en Id\n      // on le convertira à nouveau en id ensuite\n      headers: columns.map(h => (h === 'id' ? 'Id' : decamelize(h))),\n      colCount: columns.length,\n      rowCount: 1\n    })\n  )\n\n  // on utilise une queue plutôt que Promise.all\n  // pour que les onglets soient créés dans l'ordre\n  const worksheetQueue = new PQueue({ concurrency: 1 })\n  const worksheets = await worksheetQueue.addAll(worksheetsPromises)\n\n  // est ce que l'onglet tmp existe ?\n  const worksheetTmpRemove = infos.worksheets.find(w => w.title === 'tmp')\n\n  // si l'onglet 'tmp' existe, on le supprime\n  if (worksheetTmpRemove) {\n    await worksheetRemove(gss, worksheetTmpRemove)\n  }\n\n  // pour chaque table,\n  tables.forEach(table => {\n    // renseigne l'id des worksheets créées\n    const worksheet = worksheets.find(w => w.title === decamelize(table.name))\n    table.worksheetId = worksheet && worksheet.id\n\n    // retourne les rows mis au format\n    table.rows = rowsCreate(content, table.parents).map(row =>\n      rowFormat(row, table.columns, table.callbacks)\n    )\n  })\n\n  // retourne un tableau avec les requêtes pour ajouter les nouveaux rows\n  const rowPromises = tables.reduce(\n    (promises, table) => [\n      ...promises,\n      ...table.rows.map(row => () => rowAdd(gss, table.worksheetId, row))\n    ],\n    []\n  )\n\n  // utilise une queue plutôt que Promise.all\n  // pour éviter de saturer l'API google\n  const rowsQueue = new PQueue({ concurrency: 15 })\n  await rowsQueue.addAll(rowPromises)\n\n  // converti le champs Id en id\n  const tablesWithId = tables.filter(w => w.columns.find(h => h === 'id'))\n\n  await Promise.all(\n    tablesWithId.map(async table => {\n      const cells = await cellsGet(gss, table.worksheetId, {\n        'min-row': 1,\n        'max-row': 1,\n        'min-col': 1,\n        'max-col': 1\n      })\n\n      await cellSet(cells[0], 'id')\n    })\n  )\n}\n\n// fonction récursive qui parcourt les 'elements' (p.e.: 'titres')\n// en descendant la chaîne de 'parents' (p.e.: ['demarches', 'etapes', 'points'])\n// et retourne un tableau avec les éléments à convertir en 'rows'\n// ceux dont le nom correspond à la dernière entrée parmi les parents\n// (p.e.: des 'points')\n// in:\n// - elements: un tableau avec les éléments extraits de la bdd\n// - parents: un tableau avec le nom des ancêtres ['grandParents', 'parents', 'elements']\n// out\n// - un tableau avec les éléments à convertir en 'rows'\nconst rowsCreate = (elements, parents) =>\n  // si il existe au moins un parent\n  parents && parents.length\n    ? // parcourt la liste d'éléments\n      elements.reduce(\n        (rows, element) =>\n          // si il existe un element dont le nom correspond au premier parent\n          element[parents[0]]\n            ? // recursion sur rowsCreate avec cet élément\n              // et la liste de parents moins le premier\n              [...rows, ...rowsCreate(element[parents[0]], parents.slice(1))]\n            : // sinon, retourne le résultat\n              rows,\n        []\n      )\n    : // si il n'y a pas de parent\n    // si elements est un tableau\n    Array.isArray(elements)\n    ? // le retourne tel quel\n      elements\n    : // sinon, l'insère dans un tableau\n      [elements]\n\nexport default jsonToSpreadsheet\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tools/export/_utils/json-to-spreadsheet.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 469,
    "kind": "function",
    "name": "rowsCreate",
    "memberof": "src/tools/export/_utils/json-to-spreadsheet.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tools/export/_utils/json-to-spreadsheet.js~rowsCreate",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/export/_utils/json-to-spreadsheet.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 126,
    "undocument": true,
    "params": [
      {
        "name": "elements",
        "types": [
          "*"
        ]
      },
      {
        "name": "parents",
        "types": [
          "*"
        ]
      }
    ],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 470,
    "kind": "function",
    "name": "jsonToSpreadsheet",
    "memberof": "src/tools/export/_utils/json-to-spreadsheet.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/tools/export/_utils/json-to-spreadsheet.js~jsonToSpreadsheet",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tools/export/_utils/json-to-spreadsheet.js",
    "importStyle": "jsonToSpreadsheet",
    "description": null,
    "lineNumber": 16,
    "undocument": true,
    "params": [
      {
        "name": "spreadsheetId",
        "types": [
          "*"
        ]
      },
      {
        "name": "credentials",
        "types": [
          "*"
        ]
      },
      {
        "name": "tables",
        "types": [
          "*"
        ]
      },
      {
        "name": "content",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 471,
    "kind": "file",
    "name": "src/tools/export/_utils/row-format.js",
    "content": "// formate un objet 'element' sous forme de 'row'\nimport * as decamelize from 'decamelize'\n\n// in\n// - element: un objet json extrait de la base de données source\n// - columns: les colonnes de la spreadsheet cible\n// - callbacks: un tableau avec les fonctions de transformation des données de certaines colonnes\n// out\n// - un objet 'row' avec les données formatées par colonnes\n//   prêt à être inséré dans une spreadsheet\n\nconst rowFormat = (element, columns, callbacks) =>\n  columns.reduce(\n    (row, column) =>\n      element[column]\n        ? Object.assign(row, {\n            // id est un mot clé réservé par google\n            // pour contourner cette limitation, on converti id en Id\n            [column === 'id' ? 'Id' : decamelize(column)]:\n              callbacks && Object.keys(callbacks).find(cb => cb === column)\n                ? callbacks[column](element[column])\n                : element[column]\n          })\n        : row,\n    {}\n  )\n\nexport default rowFormat\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tools/export/_utils/row-format.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 472,
    "kind": "function",
    "name": "rowFormat",
    "memberof": "src/tools/export/_utils/row-format.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tools/export/_utils/row-format.js~rowFormat",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tools/export/_utils/row-format.js",
    "importStyle": "rowFormat",
    "description": null,
    "lineNumber": 12,
    "undocument": true,
    "params": [
      {
        "name": "element",
        "types": [
          "*"
        ]
      },
      {
        "name": "columns",
        "types": [
          "*"
        ]
      },
      {
        "name": "callbacks",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 473,
    "kind": "file",
    "name": "src/tools/export/_utils/spreadsheet-row-add.js",
    "content": "import * as GoogleSpreadsheet from 'google-spreadsheet'\nimport rowFormat from './row-format'\n\nimport {\n  gssUseServiceAccountAuth,\n  rowAdd\n} from './google-spreadsheet-promisify'\n\nconst spreadsheetRowAdd = async (\n  spreadsheetId,\n  credentials,\n  table,\n  content\n) => {\n  // instancie le constructeur\n  const gss = new GoogleSpreadsheet(spreadsheetId)\n\n  // authentification dans google\n  await gssUseServiceAccountAuth(gss, credentials)\n\n  const row = rowFormat(content, table.columns, table.callbacks)\n\n  await rowAdd(gss, 1, row)\n}\n\nexport default spreadsheetRowAdd\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tools/export/_utils/spreadsheet-row-add.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 474,
    "kind": "function",
    "name": "spreadsheetRowAdd",
    "memberof": "src/tools/export/_utils/spreadsheet-row-add.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/tools/export/_utils/spreadsheet-row-add.js~spreadsheetRowAdd",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tools/export/_utils/spreadsheet-row-add.js",
    "importStyle": "spreadsheetRowAdd",
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "params": [
      {
        "name": "spreadsheetId",
        "types": [
          "*"
        ]
      },
      {
        "name": "credentials",
        "types": [
          "*"
        ]
      },
      {
        "name": "table",
        "types": [
          "*"
        ]
      },
      {
        "name": "content",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 475,
    "kind": "file",
    "name": "src/tools/export/_utils/spreadsheet-row-update.js",
    "content": "import * as GoogleSpreadsheet from 'google-spreadsheet'\nimport rowFormat from './row-format'\n\nimport {\n  gssUseServiceAccountAuth,\n  rowsGet,\n  rowDelete,\n  rowAdd\n} from './google-spreadsheet-promisify'\n\nconst spreadsheetRowUpdate = async (\n  spreadsheetId,\n  credentials,\n  table,\n  content\n) => {\n  // instancie le constructeur\n  const gss = new GoogleSpreadsheet(spreadsheetId)\n\n  // authentification dans google\n  await gssUseServiceAccountAuth(gss, credentials)\n\n  const row = rowFormat(content, table.columns, table.callbacks)\n\n  const rows = await rowsGet(gss, 1, { query: `(id=${content.id})` })\n\n  if (rows[0]) {\n    await rowDelete(rows[0])\n  }\n\n  await rowAdd(gss, 1, row)\n}\n\nexport default spreadsheetRowUpdate\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tools/export/_utils/spreadsheet-row-update.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 476,
    "kind": "function",
    "name": "spreadsheetRowUpdate",
    "memberof": "src/tools/export/_utils/spreadsheet-row-update.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/tools/export/_utils/spreadsheet-row-update.js~spreadsheetRowUpdate",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tools/export/_utils/spreadsheet-row-update.js",
    "importStyle": "spreadsheetRowUpdate",
    "description": null,
    "lineNumber": 11,
    "undocument": true,
    "params": [
      {
        "name": "spreadsheetId",
        "types": [
          "*"
        ]
      },
      {
        "name": "credentials",
        "types": [
          "*"
        ]
      },
      {
        "name": "table",
        "types": [
          "*"
        ]
      },
      {
        "name": "content",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 477,
    "kind": "file",
    "name": "src/tools/export/credentials.js",
    "content": "export default {\n  type: 'service_account',\n  project_id: process.env.GOOGLE_PROJECT_ID,\n  private_key_id: process.env.GOOGLE_PRIVATE_KEY_ID,\n  private_key: process.env.GOOGLE_PRIVATE_KEY,\n  client_email: process.env.GOOGLE_CLIENT_EMAIL,\n  client_id: process.env.GOOGLE_CLIENT_ID,\n  auth_uri: 'https://accounts.google.com/o/oauth2/auth',\n  token_uri: 'https://accounts.google.com/o/oauth2/token',\n  auth_provider_x509_cert_url: 'https://www.googleapis.com/oauth2/v1/certs',\n  client_x509_cert_url: process.env.GOOGLE_CLIENT_X509_CERT_URL\n}\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tools/export/credentials.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 478,
    "kind": "file",
    "name": "src/tools/export/definitions.js",
    "content": "import { titresGet } from '../../database/queries/titres'\nimport { utilisateursGet } from '../../database/queries/utilisateurs'\nimport { titresTravauxRapportsGet } from '../../database/queries/titres-travaux'\n\nimport titresTables from './tables/titres'\nimport utilisateursTables from './tables/utilisateurs'\nimport titresTravauxRapportsTables from './tables/titres-travaux'\n\nconst titresCSpreadsheetId = process.env.GOOGLE_SPREADSHEET_ID_EXPORT_TITRES_C\nconst titresFSpreadsheetId = process.env.GOOGLE_SPREADSHEET_ID_EXPORT_TITRES_F\nconst titresGSpreadsheetId = process.env.GOOGLE_SPREADSHEET_ID_EXPORT_TITRES_G\nconst titresHSpreadsheetId = process.env.GOOGLE_SPREADSHEET_ID_EXPORT_TITRES_H\nconst titresMSpreadsheetId = process.env.GOOGLE_SPREADSHEET_ID_EXPORT_TITRES_M\nconst titresRSpreadsheetId = process.env.GOOGLE_SPREADSHEET_ID_EXPORT_TITRES_R\nconst titresSSpreadsheetId = process.env.GOOGLE_SPREADSHEET_ID_EXPORT_TITRES_S\nconst titresWSpreadsheetId = process.env.GOOGLE_SPREADSHEET_ID_EXPORT_TITRES_W\nconst utilisateursSpreadsheetId =\n  process.env.GOOGLE_SPREADSHEET_ID_EXPORT_UTILISATEURS\nconst titresTravauxRapportsSpreadsheetId =\n  process.env.GOOGLE_SPREADSHEET_ID_EXPORT_TITRES_TRAVAUX_RAPPORTS\n// const metasSpreadsheetId = process.env.GOOGLE_SPREADSHEET_ID_EXPORT_METAS\n// const entreprisesSpreadsheetId =\n//   process.env.GOOGLE_SPREADSHEET_ID_EXPORT_ENTREPRISES\n// const administrationsSpreadsheetId =\n//   process.env.GOOGLE_SPREADSHEET_ID_EXPORT_ADMINISTRATIONS\n// const substancesSpreadsheetId =\n//   process.env.GOOGLE_SPREADSHEET_ID_EXPORT_SUBSTANCES\n\nconst titresFetch = domaineId =>\n  titresGet({\n    typeIds: undefined,\n    domaineIds: [domaineId],\n    statutIds: undefined,\n    substances: undefined,\n    noms: undefined\n  })\n\nconst utilisateursFetch = () =>\n  utilisateursGet({\n    noms: undefined,\n    entrepriseIds: undefined,\n    administrationIds: undefined,\n    permissionIds: undefined\n  })\n\nconst titresTravauxRapportsFetch = () => titresTravauxRapportsGet()\n\nconst definitions = [\n  {\n    name: 'utilisateurs',\n    spreadsheetId: utilisateursSpreadsheetId,\n    fetch: utilisateursFetch(),\n    tables: utilisateursTables\n  },\n  {\n    name: 'titres-c',\n    spreadsheetId: titresCSpreadsheetId,\n    fetch: titresFetch('c'),\n    tables: titresTables\n  },\n  {\n    name: 'titres-f',\n    spreadsheetId: titresFSpreadsheetId,\n    fetch: titresFetch('f'),\n    tables: titresTables\n  },\n  {\n    name: 'titres-g',\n    spreadsheetId: titresGSpreadsheetId,\n    fetch: titresFetch('g'),\n    tables: titresTables\n  },\n  {\n    name: 'titres-h',\n    spreadsheetId: titresHSpreadsheetId,\n    fetch: titresFetch('h'),\n    tables: titresTables\n  },\n  {\n    name: 'titres-m',\n    spreadsheetId: titresMSpreadsheetId,\n    fetch: titresFetch('m'),\n    tables: titresTables\n  },\n  {\n    name: 'titres-r',\n    spreadsheetId: titresRSpreadsheetId,\n    fetch: titresFetch('r'),\n    tables: titresTables\n  },\n  {\n    name: 'titres-s',\n    spreadsheetId: titresSSpreadsheetId,\n    fetch: titresFetch('s'),\n    tables: titresTables\n  },\n  {\n    name: 'titres-w',\n    spreadsheetId: titresWSpreadsheetId,\n    fetch: titresFetch('w'),\n    tables: titresTables\n  },\n  {\n    name: 'titres-travaux-rapports',\n    spreadsheetId: titresTravauxRapportsSpreadsheetId,\n    fetch: titresTravauxRapportsFetch(),\n    tables: titresTravauxRapportsTables\n  }\n]\n\nexport default definitions\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tools/export/definitions.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 479,
    "kind": "variable",
    "name": "titresCSpreadsheetId",
    "memberof": "src/tools/export/definitions.js",
    "static": true,
    "longname": "src/tools/export/definitions.js~titresCSpreadsheetId",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/export/definitions.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 480,
    "kind": "variable",
    "name": "titresFSpreadsheetId",
    "memberof": "src/tools/export/definitions.js",
    "static": true,
    "longname": "src/tools/export/definitions.js~titresFSpreadsheetId",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/export/definitions.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 10,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 481,
    "kind": "variable",
    "name": "titresGSpreadsheetId",
    "memberof": "src/tools/export/definitions.js",
    "static": true,
    "longname": "src/tools/export/definitions.js~titresGSpreadsheetId",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/export/definitions.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 11,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 482,
    "kind": "variable",
    "name": "titresHSpreadsheetId",
    "memberof": "src/tools/export/definitions.js",
    "static": true,
    "longname": "src/tools/export/definitions.js~titresHSpreadsheetId",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/export/definitions.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 12,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 483,
    "kind": "variable",
    "name": "titresMSpreadsheetId",
    "memberof": "src/tools/export/definitions.js",
    "static": true,
    "longname": "src/tools/export/definitions.js~titresMSpreadsheetId",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/export/definitions.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 13,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 484,
    "kind": "variable",
    "name": "titresRSpreadsheetId",
    "memberof": "src/tools/export/definitions.js",
    "static": true,
    "longname": "src/tools/export/definitions.js~titresRSpreadsheetId",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/export/definitions.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 14,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 485,
    "kind": "variable",
    "name": "titresSSpreadsheetId",
    "memberof": "src/tools/export/definitions.js",
    "static": true,
    "longname": "src/tools/export/definitions.js~titresSSpreadsheetId",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/export/definitions.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 15,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 486,
    "kind": "variable",
    "name": "titresWSpreadsheetId",
    "memberof": "src/tools/export/definitions.js",
    "static": true,
    "longname": "src/tools/export/definitions.js~titresWSpreadsheetId",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/export/definitions.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 16,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 487,
    "kind": "variable",
    "name": "utilisateursSpreadsheetId",
    "memberof": "src/tools/export/definitions.js",
    "static": true,
    "longname": "src/tools/export/definitions.js~utilisateursSpreadsheetId",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/export/definitions.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 17,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 488,
    "kind": "variable",
    "name": "titresTravauxRapportsSpreadsheetId",
    "memberof": "src/tools/export/definitions.js",
    "static": true,
    "longname": "src/tools/export/definitions.js~titresTravauxRapportsSpreadsheetId",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/export/definitions.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 19,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 489,
    "kind": "function",
    "name": "titresFetch",
    "memberof": "src/tools/export/definitions.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tools/export/definitions.js~titresFetch",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/export/definitions.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 29,
    "undocument": true,
    "params": [
      {
        "name": "domaineId",
        "types": [
          "*"
        ]
      }
    ],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 490,
    "kind": "function",
    "name": "utilisateursFetch",
    "memberof": "src/tools/export/definitions.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tools/export/definitions.js~utilisateursFetch",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/export/definitions.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 38,
    "undocument": true,
    "params": [],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 491,
    "kind": "function",
    "name": "titresTravauxRapportsFetch",
    "memberof": "src/tools/export/definitions.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tools/export/definitions.js~titresTravauxRapportsFetch",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/export/definitions.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 46,
    "undocument": true,
    "params": [],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 492,
    "kind": "variable",
    "name": "definitions",
    "memberof": "src/tools/export/definitions.js",
    "static": true,
    "longname": "src/tools/export/definitions.js~definitions",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tools/export/definitions.js",
    "importStyle": "definitions",
    "description": null,
    "lineNumber": 48,
    "undocument": true,
    "type": {
      "types": [
        "undefined[]"
      ]
    }
  },
  {
    "__docId__": 493,
    "kind": "file",
    "name": "src/tools/export/index.js",
    "content": "import 'dotenv/config'\nimport '../../database/index'\n\nimport * as PQueue from 'p-queue'\nimport dbProcess from './_utils/db-process'\nimport definitions from './definitions'\n\nconst run = async () => {\n  // on utilise une queue plutôt que Promise.all\n  // pour ne pas surcharger l'API de google\n  const spreadSheetsPromises = definitions.map(definition => () =>\n    dbProcess(definition)\n  )\n  const spreadSheetsQueue = new PQueue({ concurrency: 1 })\n  await spreadSheetsQueue.addAll(spreadSheetsPromises)\n}\n\nrun()\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tools/export/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 494,
    "kind": "function",
    "name": "run",
    "memberof": "src/tools/export/index.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/tools/export/index.js~run",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/export/index.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 8,
    "undocument": true,
    "params": [],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 495,
    "kind": "file",
    "name": "src/tools/export/tables/titres-travaux.js",
    "content": "// liste des tables\n// la colonne id si elle existe doit être en première position\n// car c'est un mot clé réservé par l'API google\n// (cf: _utils/json-to-spreadsheet.js)\nconst tables = [\n  {\n    name: 'titresTravauxRapports',\n    columns: ['id', 'titreId', 'date', 'confirmation', 'contenu'],\n    callbacks: {\n      contenu: v => JSON.stringify(v)\n    }\n  }\n]\n\nexport default tables\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tools/export/tables/titres-travaux.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 496,
    "kind": "variable",
    "name": "tables",
    "memberof": "src/tools/export/tables/titres-travaux.js",
    "static": true,
    "longname": "src/tools/export/tables/titres-travaux.js~tables",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tools/export/tables/titres-travaux.js",
    "importStyle": "tables",
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "type": {
      "types": [
        "undefined[]"
      ]
    }
  },
  {
    "__docId__": 497,
    "kind": "file",
    "name": "src/tools/export/tables/titres.js",
    "content": "import * as dateFormat from 'dateformat'\n\n// liste des tables\n// la colonne id si elle existe doit être en première position\n// car c'est un mot clé réservé par l'API google\n// (cf: _utils/json-to-spreadsheet.js)\nconst tables = [\n  {\n    name: 'titres',\n    columns: ['id', 'nom', 'typeId', 'domaineId', 'statutId', 'references'],\n    callbacks: {\n      references: v => JSON.stringify(v)\n    }\n  },\n  {\n    name: 'titresDemarches',\n    columns: ['id', 'typeId', 'titreId', 'statutId', 'ordre'],\n    parents: ['demarches']\n  },\n  {\n    name: 'titresPhases',\n    columns: ['titreDemarcheId', 'statutId', 'dateDebut', 'dateFin'],\n    parents: ['demarches', 'phase'],\n    callbacks: {\n      dateDebut: v => dateFormat(v, 'yyyy-mm-dd'),\n      dateFin: v => dateFormat(v, 'yyyy-mm-dd')\n    }\n  },\n  {\n    name: 'titresEtapes',\n    columns: [\n      'id',\n      'titreDemarcheId',\n      'typeId',\n      'statutId',\n      'ordre',\n      'date',\n      'dateDebut',\n      'duree',\n      'dateFin',\n      'surface',\n      'visas',\n      'engagement',\n      'engagementDevise',\n      'sourceIndisponible'\n    ],\n    parents: ['demarches', 'etapes'],\n    callbacks: {\n      dateDebut: v => dateFormat(v, 'yyyy-mm-dd'),\n      dateFin: v => dateFormat(v, 'yyyy-mm-dd'),\n      date: v => dateFormat(v, 'yyyy-mm-dd'),\n      visas: v => JSON.stringify(v)\n    }\n  },\n  {\n    name: 'titresPoints',\n    columns: [\n      'id',\n      'titreEtapeId',\n      'coordonnees',\n      'groupe',\n      'contour',\n      'point',\n      'nom',\n      'description',\n      'securite'\n    ],\n    parents: ['demarches', 'etapes', 'points'],\n    callbacks: {\n      coordonnees: v => `${v.x}, ${v.y}`\n    }\n  },\n  {\n    name: 'titresPointsReferences',\n    columns: ['id', 'titrePointId', 'systeme', 'coordonnees'],\n    parents: ['demarches', 'etapes', 'points', 'references'],\n    callbacks: {\n      coordonnees: v => `${v.x}, ${v.y}`\n    }\n  },\n  {\n    name: 'titresDocuments',\n    columns: [\n      'id',\n      'titreEtapeId',\n      'type',\n      'jorf',\n      'nor',\n      'nom',\n      'url',\n      'uri',\n      'fichier'\n    ],\n    parents: ['demarches', 'etapes', 'documents']\n  },\n  {\n    name: 'titresSubstances',\n    columns: ['titreEtapeId', 'substanceId', 'connexe', 'ordre'],\n    parents: ['demarches', 'etapes', 'titresSubstances']\n  },\n  {\n    name: 'titresTitulaires',\n    columns: ['titreEtapeId', 'entrepriseId'],\n    parents: ['demarches', 'etapes', 'titresTitulaires']\n  },\n  {\n    name: 'titresAmodiataires',\n    columns: ['titreEtapeId', 'entrepriseId'],\n    parents: ['demarches', 'etapes', 'titresAmodiataires']\n  },\n  {\n    name: 'titresUtilisateurs',\n    columns: ['titreEtapeId', 'utilisateurId'],\n    parents: ['demarches', 'etapes', 'titresUtilisateurs']\n  },\n  {\n    name: 'titresEmprises',\n    columns: ['titreEtapeId', 'empriseId'],\n    parents: ['demarches', 'etapes', 'titresEmprises']\n  },\n  {\n    name: 'titresErreurs',\n    columns: [\n      'titreEtapeId',\n      'date',\n      'dateDebut',\n      'dateFin',\n      'duree',\n      'surface',\n      'points',\n      'substances',\n      'titulaires',\n      'amodiataires',\n      'administrations'\n    ],\n    parents: ['demarches', 'etapes', 'erreurs']\n  }\n]\n\nexport default tables\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tools/export/tables/titres.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 498,
    "kind": "variable",
    "name": "tables",
    "memberof": "src/tools/export/tables/titres.js",
    "static": true,
    "longname": "src/tools/export/tables/titres.js~tables",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tools/export/tables/titres.js",
    "importStyle": "tables",
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "type": {
      "types": [
        "undefined[]"
      ]
    }
  },
  {
    "__docId__": 499,
    "kind": "file",
    "name": "src/tools/export/tables/utilisateurs.js",
    "content": "const utilisateursTables = [\n  {\n    name: 'utilisateurs',\n    columns: [\n      'id',\n      'email',\n      'motDePasse',\n      'nom',\n      'prenom',\n      'administrationId',\n      'entrepriseId',\n      'telephoneFixe',\n      'telephoneMobile',\n      'permissionId',\n      'preferences'\n    ],\n    callbacks: {\n      preferences: v => JSON.stringify(v)\n    }\n  }\n]\n\nexport default utilisateursTables\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tools/export/tables/utilisateurs.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 500,
    "kind": "variable",
    "name": "utilisateursTables",
    "memberof": "src/tools/export/tables/utilisateurs.js",
    "static": true,
    "longname": "src/tools/export/tables/utilisateurs.js~utilisateursTables",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tools/export/tables/utilisateurs.js",
    "importStyle": "utilisateursTables",
    "description": null,
    "lineNumber": 1,
    "undocument": true,
    "type": {
      "types": [
        "undefined[]"
      ]
    }
  },
  {
    "__docId__": 501,
    "kind": "file",
    "name": "src/tools/export/titre-travaux-rapport.js",
    "content": "import credentials from './credentials'\nimport spreadsheetRowAdd from './_utils/spreadsheet-row-add'\nimport spreadsheetRowUpdate from './_utils/spreadsheet-row-update'\nimport tables from './tables/titres-travaux'\n\nconst titreTravauxRapportRowAdd = async content => {\n  const spreadsheetId =\n    process.env.GOOGLE_SPREADSHEET_ID_EXPORT_TITRES_TRAVAUX_RAPPORTS\n\n  await spreadsheetRowAdd(spreadsheetId, credentials, tables[0], content)\n}\n\nconst titreTravauxRapportRowUpdate = async content => {\n  const spreadsheetId =\n    process.env.GOOGLE_SPREADSHEET_ID_EXPORT_TITRES_TRAVAUX_RAPPORTS\n\n  try {\n    await spreadsheetRowUpdate(spreadsheetId, credentials, tables[0], content)\n  } catch (e) {\n    console.log(\"erreur lors de l'ajout d'une ligne dans la spreasheet\", e)\n  }\n}\n\nexport { titreTravauxRapportRowAdd, titreTravauxRapportRowUpdate }\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tools/export/titre-travaux-rapport.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 502,
    "kind": "function",
    "name": "titreTravauxRapportRowAdd",
    "memberof": "src/tools/export/titre-travaux-rapport.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/tools/export/titre-travaux-rapport.js~titreTravauxRapportRowAdd",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tools/export/titre-travaux-rapport.js",
    "importStyle": "{titreTravauxRapportRowAdd}",
    "description": null,
    "lineNumber": 6,
    "undocument": true,
    "params": [
      {
        "name": "content",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 503,
    "kind": "function",
    "name": "titreTravauxRapportRowUpdate",
    "memberof": "src/tools/export/titre-travaux-rapport.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/tools/export/titre-travaux-rapport.js~titreTravauxRapportRowUpdate",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tools/export/titre-travaux-rapport.js",
    "importStyle": "{titreTravauxRapportRowUpdate}",
    "description": null,
    "lineNumber": 13,
    "undocument": true,
    "params": [
      {
        "name": "content",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 504,
    "kind": "file",
    "name": "src/tools/export/titres-travaux-rapports.js",
    "content": "import 'dotenv/config'\nimport '../../database/index'\nimport dbProcess from './_utils/db-process'\nimport definitions from './definitions'\n\nconst titresTravauxRapportsDefinition = definitions.find(\n  definition => definition.name === 'titres-travaux-rapports'\n)\n\nconst run = async () => {\n  const res = await dbProcess(titresTravauxRapportsDefinition)\n  console.log(res)\n  process.exit()\n}\n\nrun()\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tools/export/titres-travaux-rapports.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 505,
    "kind": "variable",
    "name": "titresTravauxRapportsDefinition",
    "memberof": "src/tools/export/titres-travaux-rapports.js",
    "static": true,
    "longname": "src/tools/export/titres-travaux-rapports.js~titresTravauxRapportsDefinition",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/export/titres-travaux-rapports.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 6,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 506,
    "kind": "function",
    "name": "run",
    "memberof": "src/tools/export/titres-travaux-rapports.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/tools/export/titres-travaux-rapports.js~run",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/export/titres-travaux-rapports.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 10,
    "undocument": true,
    "params": [],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 507,
    "kind": "file",
    "name": "src/tools/export/utilisateurs.js",
    "content": "import 'dotenv/config'\nimport '../../database/index'\nimport dbProcess from './_utils/db-process'\nimport definitions from './definitions'\n\nconst utilisateursDefinition = definitions.find(\n  definition => definition.name === 'utilisateurs'\n)\n\nconst run = async () => {\n  const res = await dbProcess(utilisateursDefinition)\n  console.log(res)\n  process.exit()\n}\n\nrun()\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tools/export/utilisateurs.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 508,
    "kind": "variable",
    "name": "utilisateursDefinition",
    "memberof": "src/tools/export/utilisateurs.js",
    "static": true,
    "longname": "src/tools/export/utilisateurs.js~utilisateursDefinition",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/export/utilisateurs.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 6,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 509,
    "kind": "function",
    "name": "run",
    "memberof": "src/tools/export/utilisateurs.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/tools/export/utilisateurs.js~run",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/export/utilisateurs.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 10,
    "undocument": true,
    "params": [],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 510,
    "kind": "file",
    "name": "src/tools/geo/index.js",
    "content": "// converti les coordoonnées géo\n\nimport * as proj4 from 'proj4'\n\nproj4.defs(\n  'EPSG:2972',\n  '+proj=utm +zone=22 +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +units=m +no_defs'\n)\n\nproj4('EPSG:2972', 'EPSG:4326', [coord1, coord2])\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tools/geo/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 511,
    "kind": "file",
    "name": "src/tools/import/_utils/_spreadsheet-to-json.js",
    "content": "import * as googleSpreadSheetToJson from 'google-spreadsheet-to-json'\nimport credentials from '../credentials.js'\nimport fileCreate from './file-create.js'\n\nconst spreadsheetToJson = async (filePath, spreadsheetId, worksheet, cb) => {\n  try {\n    console.log(`Spreadsheet: ${filePath}`)\n    let json = await googleSpreadSheetToJson({\n      spreadsheetId,\n      credentials,\n      worksheet\n    })\n\n    if (cb) {\n      json = cb(json)\n    }\n\n    const fileContent = JSON.stringify(json, null, 2)\n\n    await fileCreate(filePath, fileContent)\n  } catch (err) {\n    console.log(err)\n  }\n}\n\nexport default spreadsheetToJson\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tools/import/_utils/_spreadsheet-to-json.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 512,
    "kind": "function",
    "name": "spreadsheetToJson",
    "memberof": "src/tools/import/_utils/_spreadsheet-to-json.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/tools/import/_utils/_spreadsheet-to-json.js~spreadsheetToJson",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tools/import/_utils/_spreadsheet-to-json.js",
    "importStyle": "spreadsheetToJson",
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "params": [
      {
        "name": "filePath",
        "types": [
          "*"
        ]
      },
      {
        "name": "spreadsheetId",
        "types": [
          "*"
        ]
      },
      {
        "name": "worksheet",
        "types": [
          "*"
        ]
      },
      {
        "name": "cb",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 513,
    "kind": "file",
    "name": "src/tools/import/_utils/file-create.js",
    "content": "import { writeFile } from 'fs-extra'\n\nconst fileCreate = async (name, content) => {\n  try {\n    await writeFile(name, content, 'utf8')\n    console.log('File:', name)\n  } catch (err) {\n    console.log('File: error', err)\n  }\n}\n\nexport default fileCreate\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tools/import/_utils/file-create.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 514,
    "kind": "function",
    "name": "fileCreate",
    "memberof": "src/tools/import/_utils/file-create.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/tools/import/_utils/file-create.js~fileCreate",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tools/import/_utils/file-create.js",
    "importStyle": "fileCreate",
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "params": [
      {
        "name": "name",
        "types": [
          "*"
        ]
      },
      {
        "name": "content",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 515,
    "kind": "file",
    "name": "src/tools/import/_utils/file-path-create.js",
    "content": "import * as path from 'path'\n\nconst filePathCreate = fileName =>\n  `./sources/${fileName.replace(/_/g, '-')}.json`\n\nexport default filePathCreate\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tools/import/_utils/file-path-create.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 516,
    "kind": "function",
    "name": "filePathCreate",
    "memberof": "src/tools/import/_utils/file-path-create.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tools/import/_utils/file-path-create.js~filePathCreate",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tools/import/_utils/file-path-create.js",
    "importStyle": "filePathCreate",
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "params": [
      {
        "name": "fileName",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 517,
    "kind": "file",
    "name": "src/tools/import/credentials.js",
    "content": "export default {\n  type: 'service_account',\n  project_id: process.env.GOOGLE_PROJECT_ID,\n  private_key_id: process.env.GOOGLE_PRIVATE_KEY_ID,\n  private_key: process.env.GOOGLE_PRIVATE_KEY,\n  client_email: process.env.GOOGLE_CLIENT_EMAIL,\n  client_id: process.env.GOOGLE_CLIENT_ID,\n  auth_uri: 'https://accounts.google.com/o/oauth2/auth',\n  token_uri: 'https://accounts.google.com/o/oauth2/token',\n  auth_provider_x509_cert_url: 'https://www.googleapis.com/oauth2/v1/certs',\n  client_x509_cert_url: process.env.GOOGLE_CLIENT_X509_CERT_URL\n}\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tools/import/credentials.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 518,
    "kind": "file",
    "name": "src/tools/import/index.js",
    "content": "import 'dotenv/config'\nimport * as PQueue from 'p-queue'\nimport spreadsheetToJson from './_utils/_spreadsheet-to-json'\nimport filePathCreate from './_utils/file-path-create'\nimport fileCreate from './_utils/file-create.js'\n\nimport spreadsheets from './spreadsheets'\n\nconst run = async () => {\n  // on utilise une queue plutôt que Promise.all\n  // pour ne pas surcharger l'API de google\n  const spreadSheetsPromises = spreadsheets.map(s => () =>\n    spreadsheetsProcess(s)\n  )\n  const spreadSheetsQueue = new PQueue({ concurrency: 1 })\n  await spreadSheetsQueue.addAll(spreadSheetsPromises)\n}\n\nconst spreadsheetsProcess = async spreadsheet =>\n  Promise.all([\n    ...spreadsheet.tables.map(table =>\n      spreadsheet.id\n        ? // si l'id de la spreadsheet est renseignée\n          spreadsheetToJson(\n            filePathCreate(\n              spreadsheet.prefixFileName\n                ? `${spreadsheet.name}-${table.name}`\n                : table.name\n            ),\n            spreadsheet.id,\n            table.name,\n            table.cb\n          )\n        : // si l'id est absente on créé un fichier vide\n          fileCreate(\n            filePathCreate(\n              spreadsheet.prefixFileName\n                ? `${spreadsheet.name}-${table.name}`\n                : table.name\n            ),\n            JSON.stringify([], null, 2)\n          )\n    )\n  ])\n\nrun()\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tools/import/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 519,
    "kind": "function",
    "name": "run",
    "memberof": "src/tools/import/index.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/tools/import/index.js~run",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/import/index.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "params": [],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 520,
    "kind": "function",
    "name": "spreadsheetsProcess",
    "memberof": "src/tools/import/index.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/tools/import/index.js~spreadsheetsProcess",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/import/index.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 19,
    "undocument": true,
    "params": [
      {
        "name": "spreadsheet",
        "types": [
          "*"
        ]
      }
    ],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 521,
    "kind": "file",
    "name": "src/tools/import/spreadsheets.js",
    "content": "const titresCSpreadsheetId = process.env.GOOGLE_SPREADSHEET_ID_TITRES_C\nconst titresFSpreadsheetId = process.env.GOOGLE_SPREADSHEET_ID_TITRES_F\nconst titresGSpreadsheetId = process.env.GOOGLE_SPREADSHEET_ID_TITRES_G\nconst titresHSpreadsheetId = process.env.GOOGLE_SPREADSHEET_ID_TITRES_H\nconst titresMSpreadsheetId = process.env.GOOGLE_SPREADSHEET_ID_TITRES_M\nconst titresM973SpreadsheetId = process.env.GOOGLE_SPREADSHEET_ID_TITRES_M973\nconst titresRSpreadsheetId = process.env.GOOGLE_SPREADSHEET_ID_TITRES_R\nconst titresSSpreadsheetId = process.env.GOOGLE_SPREADSHEET_ID_TITRES_S\nconst titresWSpreadsheetId = process.env.GOOGLE_SPREADSHEET_ID_TITRES_W\nconst metasSpreadsheetId = process.env.GOOGLE_SPREADSHEET_ID_METAS\nconst entreprisesSpreadsheetId = process.env.GOOGLE_SPREADSHEET_ID_ENTREPRISES\nconst utilisateursSpreadsheetId = process.env.GOOGLE_SPREADSHEET_ID_UTILISATEURS\nconst permissionsSpreadsheetId = process.env.GOOGLE_SPREADSHEET_ID_PERMISSIONS\nconst administrationsSpreadsheetId =\n  process.env.GOOGLE_SPREADSHEET_ID_ADMINISTRATIONS\nconst substancesSpreadsheetId = process.env.GOOGLE_SPREADSHEET_ID_SUBSTANCES\nconst titresTravauxRapportsSpreadsheetId =\n  process.env.GOOGLE_SPREADSHEET_ID_TITRES_TRAVAUX_RAPPORTS\n\nconst jsonParse = value => json =>\n  json.map(j =>\n    Object.keys(j).reduce((res, cur) => {\n      res[cur] = cur === value ? JSON.parse(j[cur]) : j[cur]\n      return res\n    }, {})\n  )\n\nconst titresTables = [\n  { name: 'titres', cb: jsonParse('references') },\n  { name: 'titres_demarches' },\n  { name: 'titres_etapes', cb: jsonParse('visas') },\n  { name: 'titres_points' },\n  { name: 'titres_points_references' },\n  { name: 'titres_documents' },\n  { name: 'titres_substances' },\n  { name: 'titres_titulaires' },\n  { name: 'titres_amodiataires' },\n  { name: 'titres_emprises' },\n  { name: 'titres_erreurs' }\n]\n\nconst spreadSheets = [\n  {\n    name: 'titres-c',\n    id: titresCSpreadsheetId,\n    tables: titresTables,\n    prefixFileName: true\n  },\n  {\n    name: 'titres-f',\n    id: titresFSpreadsheetId,\n    tables: titresTables,\n    prefixFileName: true\n  },\n  {\n    name: 'titres-g',\n    id: titresGSpreadsheetId,\n    tables: titresTables,\n    prefixFileName: true\n  },\n  {\n    name: 'titres-h',\n    id: titresHSpreadsheetId,\n    tables: titresTables,\n    prefixFileName: true\n  },\n  {\n    name: 'titres-m',\n    id: titresMSpreadsheetId,\n    tables: titresTables,\n    prefixFileName: true\n  },\n  {\n    name: 'titres-m973',\n    id: titresM973SpreadsheetId,\n    tables: titresTables,\n    prefixFileName: true\n  },\n  {\n    name: 'titres-r',\n    id: titresRSpreadsheetId,\n    tables: titresTables,\n    prefixFileName: true\n  },\n  {\n    name: 'titres-s',\n    id: titresSSpreadsheetId,\n    tables: titresTables,\n    prefixFileName: true\n  },\n  {\n    name: 'titres-w',\n    id: titresWSpreadsheetId,\n    tables: titresTables,\n    prefixFileName: true\n  },\n  {\n    name: 'metas',\n    id: metasSpreadsheetId,\n    tables: [\n      { name: 'domaines' },\n      { name: 'types' },\n      { name: 'domaines__types' },\n      { name: 'statuts' },\n      { name: 'demarches_types' },\n      { name: 'demarches_statuts' },\n      { name: 'demarches_types__types' },\n      { name: 'demarches_types__demarches_statuts' },\n      { name: 'phases_statuts' },\n      { name: 'etapes_types' },\n      { name: 'etapes_statuts' },\n      { name: 'etapes_types__etapes_statuts' },\n      { name: 'demarches_types__etapes_types' },\n      { name: 'emprises' }\n    ]\n  },\n  {\n    name: 'entreprises',\n    id: entreprisesSpreadsheetId,\n    tables: [\n      { name: 'c' },\n      { name: 'f' },\n      { name: 'g' },\n      { name: 'h' },\n      { name: 'm' },\n      { name: 'm973' },\n      { name: 'r' },\n      { name: 's' },\n      { name: 'w' }\n    ],\n    prefixFileName: true\n  },\n  {\n    name: 'utilisateurs',\n    id: utilisateursSpreadsheetId,\n    tables: [{ name: 'utilisateurs', cb: jsonParse('preferences') }]\n  },\n  {\n    name: 'utilisateurs',\n    id: permissionsSpreadsheetId,\n    tables: [{ name: 'permissions' }]\n  },\n  {\n    name: 'administrations',\n    id: administrationsSpreadsheetId,\n    tables: [{ name: 'administrations' }]\n  },\n  {\n    name: 'substances',\n    id: substancesSpreadsheetId,\n    tables: [\n      { name: 'substances' },\n      { name: 'substances_legales' },\n      { name: 'substances_legales_codes' },\n      { name: 'substances__substances_legales' }\n    ]\n  },\n  {\n    name: 'titresTravauxRapports',\n    id: titresTravauxRapportsSpreadsheetId,\n    tables: [{ name: 'titres_travaux_rapports', cb: jsonParse('contenu') }]\n  }\n]\n\nexport default spreadSheets\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tools/import/spreadsheets.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 522,
    "kind": "variable",
    "name": "titresCSpreadsheetId",
    "memberof": "src/tools/import/spreadsheets.js",
    "static": true,
    "longname": "src/tools/import/spreadsheets.js~titresCSpreadsheetId",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/import/spreadsheets.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 1,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 523,
    "kind": "variable",
    "name": "titresFSpreadsheetId",
    "memberof": "src/tools/import/spreadsheets.js",
    "static": true,
    "longname": "src/tools/import/spreadsheets.js~titresFSpreadsheetId",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/import/spreadsheets.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 2,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 524,
    "kind": "variable",
    "name": "titresGSpreadsheetId",
    "memberof": "src/tools/import/spreadsheets.js",
    "static": true,
    "longname": "src/tools/import/spreadsheets.js~titresGSpreadsheetId",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/import/spreadsheets.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 525,
    "kind": "variable",
    "name": "titresHSpreadsheetId",
    "memberof": "src/tools/import/spreadsheets.js",
    "static": true,
    "longname": "src/tools/import/spreadsheets.js~titresHSpreadsheetId",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/import/spreadsheets.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 526,
    "kind": "variable",
    "name": "titresMSpreadsheetId",
    "memberof": "src/tools/import/spreadsheets.js",
    "static": true,
    "longname": "src/tools/import/spreadsheets.js~titresMSpreadsheetId",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/import/spreadsheets.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 527,
    "kind": "variable",
    "name": "titresM973SpreadsheetId",
    "memberof": "src/tools/import/spreadsheets.js",
    "static": true,
    "longname": "src/tools/import/spreadsheets.js~titresM973SpreadsheetId",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/import/spreadsheets.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 6,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 528,
    "kind": "variable",
    "name": "titresRSpreadsheetId",
    "memberof": "src/tools/import/spreadsheets.js",
    "static": true,
    "longname": "src/tools/import/spreadsheets.js~titresRSpreadsheetId",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/import/spreadsheets.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 529,
    "kind": "variable",
    "name": "titresSSpreadsheetId",
    "memberof": "src/tools/import/spreadsheets.js",
    "static": true,
    "longname": "src/tools/import/spreadsheets.js~titresSSpreadsheetId",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/import/spreadsheets.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 8,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 530,
    "kind": "variable",
    "name": "titresWSpreadsheetId",
    "memberof": "src/tools/import/spreadsheets.js",
    "static": true,
    "longname": "src/tools/import/spreadsheets.js~titresWSpreadsheetId",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/import/spreadsheets.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 531,
    "kind": "variable",
    "name": "metasSpreadsheetId",
    "memberof": "src/tools/import/spreadsheets.js",
    "static": true,
    "longname": "src/tools/import/spreadsheets.js~metasSpreadsheetId",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/import/spreadsheets.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 10,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 532,
    "kind": "variable",
    "name": "entreprisesSpreadsheetId",
    "memberof": "src/tools/import/spreadsheets.js",
    "static": true,
    "longname": "src/tools/import/spreadsheets.js~entreprisesSpreadsheetId",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/import/spreadsheets.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 11,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 533,
    "kind": "variable",
    "name": "utilisateursSpreadsheetId",
    "memberof": "src/tools/import/spreadsheets.js",
    "static": true,
    "longname": "src/tools/import/spreadsheets.js~utilisateursSpreadsheetId",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/import/spreadsheets.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 12,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 534,
    "kind": "variable",
    "name": "permissionsSpreadsheetId",
    "memberof": "src/tools/import/spreadsheets.js",
    "static": true,
    "longname": "src/tools/import/spreadsheets.js~permissionsSpreadsheetId",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/import/spreadsheets.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 13,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 535,
    "kind": "variable",
    "name": "administrationsSpreadsheetId",
    "memberof": "src/tools/import/spreadsheets.js",
    "static": true,
    "longname": "src/tools/import/spreadsheets.js~administrationsSpreadsheetId",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/import/spreadsheets.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 14,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 536,
    "kind": "variable",
    "name": "substancesSpreadsheetId",
    "memberof": "src/tools/import/spreadsheets.js",
    "static": true,
    "longname": "src/tools/import/spreadsheets.js~substancesSpreadsheetId",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/import/spreadsheets.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 16,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 537,
    "kind": "variable",
    "name": "titresTravauxRapportsSpreadsheetId",
    "memberof": "src/tools/import/spreadsheets.js",
    "static": true,
    "longname": "src/tools/import/spreadsheets.js~titresTravauxRapportsSpreadsheetId",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/import/spreadsheets.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 17,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 538,
    "kind": "function",
    "name": "jsonParse",
    "memberof": "src/tools/import/spreadsheets.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tools/import/spreadsheets.js~jsonParse",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/import/spreadsheets.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 20,
    "undocument": true,
    "params": [
      {
        "name": "value",
        "types": [
          "*"
        ]
      }
    ],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 539,
    "kind": "variable",
    "name": "titresTables",
    "memberof": "src/tools/import/spreadsheets.js",
    "static": true,
    "longname": "src/tools/import/spreadsheets.js~titresTables",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/import/spreadsheets.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 28,
    "undocument": true,
    "type": {
      "types": [
        "undefined[]"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 540,
    "kind": "variable",
    "name": "spreadSheets",
    "memberof": "src/tools/import/spreadsheets.js",
    "static": true,
    "longname": "src/tools/import/spreadsheets.js~spreadSheets",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tools/import/spreadsheets.js",
    "importStyle": "spreadSheets",
    "description": null,
    "lineNumber": 42,
    "undocument": true,
    "type": {
      "types": [
        "undefined[]"
      ]
    }
  },
  {
    "__docId__": 541,
    "kind": "file",
    "name": "src/tools/index.js",
    "content": "const dupRemove = (key, ...arrays) =>\n  arrays.reduce(\n    (result, array) =>\n      array.reduce(\n        (res, el) =>\n          res.find(e => el[key] && e[key] === el[key]) ? res : [...res, el],\n        result\n      ),\n    []\n  )\n\nconst dupFind = (key, ...arrays) =>\n  arrays.reduce(\n    (result, array) =>\n      result.filter(el => array.find(e => e[key] && e[key] === el[key])),\n    arrays.pop()\n  )\n\nexport { dupRemove, dupFind }\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tools/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 542,
    "kind": "function",
    "name": "dupRemove",
    "memberof": "src/tools/index.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tools/index.js~dupRemove",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tools/index.js",
    "importStyle": "{dupRemove}",
    "description": null,
    "lineNumber": 1,
    "undocument": true,
    "params": [
      {
        "name": "key",
        "types": [
          "*"
        ]
      },
      {
        "name": "arrays",
        "types": [
          "...*"
        ],
        "spread": true
      }
    ],
    "return": null
  },
  {
    "__docId__": 543,
    "kind": "function",
    "name": "dupFind",
    "memberof": "src/tools/index.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/tools/index.js~dupFind",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tools/index.js",
    "importStyle": "{dupFind}",
    "description": null,
    "lineNumber": 12,
    "undocument": true,
    "params": [
      {
        "name": "key",
        "types": [
          "*"
        ]
      },
      {
        "name": "arrays",
        "types": [
          "...*"
        ],
        "spread": true
      }
    ],
    "return": null
  },
  {
    "__docId__": 544,
    "kind": "file",
    "name": "src/tools/mailer/batch.js",
    "content": "import mailer from './index'\n\nconst emailsBatch = async (emails, subject, html) => {\n  try {\n    emails.forEach(email => {\n      mailer(email, subject, html)\n    })\n  } catch (e) {\n    console.log(\"erreur lors de l'envoi de batch email\")\n  }\n}\n\nexport default emailsBatch\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tools/mailer/batch.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 545,
    "kind": "function",
    "name": "emailsBatch",
    "memberof": "src/tools/mailer/batch.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/tools/mailer/batch.js~emailsBatch",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tools/mailer/batch.js",
    "importStyle": "emailsBatch",
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "params": [
      {
        "name": "emails",
        "types": [
          "*"
        ]
      },
      {
        "name": "subject",
        "types": [
          "*"
        ]
      },
      {
        "name": "html",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 546,
    "kind": "file",
    "name": "src/tools/mailer/index.js",
    "content": "import * as nodemailer from 'nodemailer'\nimport * as nodemailerHtmlToText from 'nodemailer-html-to-text'\n// const smtpTransport from 'nodemailer-smtp-transport')\n\n// const smtpTransportConfig = smtpTransport({\n//   service: process.env.EMAIL_SERVICE,\n//   auth: {\n//     user: process.env.EMAIL_USER,\n//     pass: process.env.EMAIL_PASSWORD\n//   }\n// })\n\nconst smtpTransportConfig = `smtps://${process.env.EMAIL_API_KEY}:${\n  process.env.EMAIL_API_PASSWORD\n}@${process.env.EMAIL_SMTP_SERVER}`\n\nconst from = process.env.EMAIL_USER\n\nconst transport = nodemailer.createTransport(smtpTransportConfig)\n\n// https://www.npmjs.com/package/html-to-text\n// const htmlToTextOptions = {}\n\ntransport.use('compile', nodemailerHtmlToText.htmlToText())\n\nconst mailer = async (to, subject, html) => {\n  const mail = { from, to, subject, html }\n\n  // si on est pas sur le serveur de prod\n  // l'adresse email du destinataire est remplacée\n  if (\n    !process.env.NODE_ENV ||\n    process.env.NODE_ENV !== 'production' ||\n    process.env.ENV !== 'prod' ||\n    !process.env.ENV\n  ) {\n    mail.subject = `\n${mail.subject} | env: ${process.env.ENV} | node: ${process.env.NODE_ENV} | \ndest: ${mail.to}`\n    mail.to = process.env.ADMIN_EMAIL\n  }\n\n  try {\n    const res = await transport.sendMail(mail)\n    console.log(`Message sent: ${mail.to}, ${mail.subject}, ${res.response}`)\n    transport.close()\n  } catch (e) {\n    console.log(e)\n  }\n}\n\nexport default mailer\n",
    "static": true,
    "longname": "/Volumes/fr-work/Sites/camino-api/src/tools/mailer/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 547,
    "kind": "variable",
    "name": "smtpTransportConfig",
    "memberof": "src/tools/mailer/index.js",
    "static": true,
    "longname": "src/tools/mailer/index.js~smtpTransportConfig",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/mailer/index.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 13,
    "undocument": true,
    "type": {
      "types": [
        "string"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 548,
    "kind": "variable",
    "name": "from",
    "memberof": "src/tools/mailer/index.js",
    "static": true,
    "longname": "src/tools/mailer/index.js~from",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/mailer/index.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 17,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 549,
    "kind": "variable",
    "name": "transport",
    "memberof": "src/tools/mailer/index.js",
    "static": true,
    "longname": "src/tools/mailer/index.js~transport",
    "access": "public",
    "export": false,
    "importPath": "camino-api/src/tools/mailer/index.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 19,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 550,
    "kind": "function",
    "name": "mailer",
    "memberof": "src/tools/mailer/index.js",
    "generator": false,
    "async": true,
    "static": true,
    "longname": "src/tools/mailer/index.js~mailer",
    "access": "public",
    "export": true,
    "importPath": "camino-api/src/tools/mailer/index.js",
    "importStyle": "mailer",
    "description": null,
    "lineNumber": 26,
    "undocument": true,
    "params": [
      {
        "name": "to",
        "types": [
          "*"
        ]
      },
      {
        "name": "subject",
        "types": [
          "*"
        ]
      },
      {
        "name": "html",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "kind": "index",
    "content": "# Camino API\n\n[![Build Status](https://travis-ci.org/MTES-MCT/camino-api.svg?branch=master)](https://travis-ci.org/MTES-MCT/camino-api)\n\n> API GraphQL de [Camino](http://camino.beta.gouv.fr/): [api.camino.beta.gouv.fr](https://api.camino.beta.gouv.fr)\n\n---\n\n## Technologies\n\n- [Node.js](https://nodejs.org/)\n- [Express.js](http://expressjs.com)\n- [PostgreSQL](https://www.postgresql.org/)\n- [Express-GraphQL](https://github.com/graphql/express-graphql)\n- [Knex.js](https://knexjs.org/)\n- [Objection.js](http://vincit.github.io/objection.js/)\n- [Eslint](https://eslint.org/)\n- [Prettier](https://prettier.io/)\n- [Standardjs](https://standardjs.com/)\n- [Docker](https://www.docker.com/)\n\n---\n\n## Environnement\n\nPour que l'application fonctionne, sont requis:\n\n- Node.js (v.10 ou plus) et npm\n- Une base de données PostgreSQL (v.10 ou plus)\n\n---\n\n## Configuration et imports des données\n\n- Créer une base de données `camino`.\n- Renommer le fichier `.env.example` en `.env` et le compléter.\n\n```bash\n# installe les dépendances\nnpm install\n\n# importe les données au format .json\n# depuis google spreadsheets vers './tools/sources'\nnpm run import\n\n# crée les tables dans la base de données\n# et importe les données depuis './tools/sources'\nnpm run migrate\n\n# met à jour les données\nnpm run daily\n```\n\n---\n\n## Développement\n\n```bash\n# démarre le serveur avec nodemon\nnpm run dev\n```\n\n---\n\n## Tests\n\n```bash\n# lance les tests\nnpm run test\n```\n\n---\n\n## Docker\n\n### Environnement de développement\n\nPour développer sans installer PostgreSQL localement.\n\n```bash\n# démarre l'application et la base de données dans des conteneurs Docker\n# en mode `development`\n# accessible à http://localhost:NODE_PORT\ndocker-compose -f ./docker-compose.localhost.yml up --build\n```\n\n### Environnement de test\n\nPour tester l'application en local dans un environnement de production\n\nPré-requis:\n\n- une installation locale active de https://github.com/jwilder/nginx-proxy\n- un certificat ssl auto-signé\n- [instructions](https://medium.com/@francoisromain/set-a-local-web-development-environment-with-custom-urls-and-https-3fbe91d2eaf0)\n\n```bash\n# démarre l'application et la base de données dans des containers Docker\n# en mode `production`\n# accessible à https://api.camino.local\ndocker-compose -f ./docker-compose.local.yml up --build\n```\n\n### Environnement de production\n\nPré-requis:\n\n- une installation active de https://github.com/jwilder/nginx-proxy\n- [instructions](https://medium.com/@francoisromain/host-multiple-websites-with-https-inside-docker-containers-on-a-single-server-18467484ab95)\n\n```bash\n# démarre l'application et la base de données dans des containers Docker\n# en mode `production`\n# accessible à http://api.camino.beta.gouv.fr\ndocker-compose -f ./docker-compose.prod.yml up -d --build\n```\n\n---\n\n## Structure des fichiers\n\n```bash\n.\n├── index.js                    # `point d'entrée`\n│\n├── api                         # `API graphql`\n│   ├── resolvers               # `liens entre l'API et la base de données`\n│   ├── schemas                 # `description des nœuds de l'API`\n│   └── types                   # `types graphQl customs`\n│\n├── config                      #\n│   ├── index.js                # `variables globales`\n│   └── knex.js                 # `connexion à la base de données`\n│\n├── database                    # `base de données PostgresQL`\n│   ├── models                  # `modèles de la base de données (knex.js / objection.js)`\n│   └── queries                 # `requêtes à la base de données (knex.js / objection.js)`\n│\n├── docs                        # `documentation et exemples`\n│\n├── tasks                       # `logique métier`\n│   ├── _utils                  # `scripts de mise à jour de la base de données`\n│   ├── daily                   # `scripts quotidiens (npm run daily)`\n│   └── etape-update            # `script effectués lors de la mise à jour d'une étape`\n│\n└── tools                       # `outils`\n    ├── export                  # `exportation de la base de données vers des spreadsheets (npm run export)`\n    ├── import                  # `import de spreadsheets vers des fichiers json dans /sources (npm run import)`\n    ├── knex                    # `scripts de création et d'import de la base de données (npm run migrate)`\n    │   ├── migrations          # `création de la base de données`\n    │   └── seeds               # `import depuis les fichier /sources vers la base de données`\n    ├── mailer                  # `utilitaire d'envoi d'email (Nodemailer)`\n    ├── sources                 # `données sources sous forme de fichiers json`\n    └── utils                   #\n\n```\n\n---\n\n## PostgreSQL\n\n![camino database schema](manual/db/camino-db.png)\n\n---\n\n## Contribution\n\nVoir [contributing.md](contributing.md) (en anglais) pour plus d'infos.\n\n---\n\n## Crédits\n\n### Production\n\n- [La Fabrique Numérique, Ministère de la transition écologique et solidaire](https://www.ecologique-solidaire.gouv.fr/inauguration-fabrique-numerique-lincubateur-des-ministeres-charges-lecologie-et-des-territoires)\n\n### Équipe\n\n- Guillaume Levieux, intrapreneur\n- Joeffrey Arruyer, coach\n- [François Romain](http://francoisromain.com), développeur\n\n---\n\n## Licence\n\nCamino API, le cadastre minier numérique ouvert\n\n[AGPL 3 ou plus récent](https://spdx.org/licenses/AGPL-3.0-or-later.html)\n",
    "longname": "/Volumes/fr-work/Sites/camino-api/README.md",
    "name": "./README.md",
    "static": true,
    "access": "public"
  },
  {
    "kind": "packageJSON",
    "content": "{\n  \"name\": \"camino-api\",\n  \"version\": \"0.8.0\",\n  \"description\": \"Camino api\",\n  \"license\": \"AGPL-3.0-or-later\",\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/MTES-MCT/camino-api.git\"\n  },\n  \"author\": {\n    \"name\": \"François Romain\",\n    \"email\": \"francoisromain@gmail.com\",\n    \"url\": \"https://francoisromain.com\"\n  },\n  \"homepage\": \"https://github.com/MTES-MCT/camino-api\",\n  \"main\": \"index.js\",\n  \"scripts\": {\n    \"build\": \"npx tsc\",\n    \"dev\": \"nodemon --watch 'src/**' --exec 'ts-node' src/index.js\",\n    \"w-build\": \"cross-env NODE_ENV=production node build/webpack.prod.js\",\n    \"w-dev\": \"cross-env NODE_ENV=development node build/webpack.dev.js\",\n    \"import\": \"mkdir -p sources && node ./dist/tools/import/index.js\",\n    \"export\": \"node ./dist/tools/export/index.js\",\n    \"export:users\": \"node ./dist/tools/export/utilisateurs.js\",\n    \"export:rapports\": \"node ./dist/tools/export/titres-travaux-rapports.js\",\n    \"migrate:rollback\": \"npx knex --knexfile=./knex/config-cli.js migrate:rollback\",\n    \"migrate:latest\": \"npx knex --knexfile=./knex/config-cli.js migrate:latest\",\n    \"seed:run\": \"npx npx knex --knexfile=./knex/config-cli.js seed:run\",\n    \"migrate\": \"npm run migrate:rollback && npm run migrate:latest && npm run seed:run\",\n    \"migrate-api\": \"node ./knex/index.js\",\n    \"daily\": \"node ./dist/tasks/daily/index.js\",\n    \"start\": \"npm run build && node ./dist/index.js\",\n    \"graphql:schema\": \"node ./tools/utils/graphql-dsl-to-query-convert.js\",\n    \"test\": \"jest --verbose\",\n    \"commit\": \"npx git-cz\",\n    \"release\": \"standard-version && git push --follow-tags origin master && conventional-github-releaser\",\n    \"doc\": \"rm -rf docs && npx esdoc\"\n  },\n  \"dependencies\": {\n    \"@sentry/types\": \"^4.5.3\",\n    \"@types/bcrypt\": \"^3.0.0\",\n    \"@types/chalk\": \"^2.2.0\",\n    \"@types/compression\": \"0.0.36\",\n    \"@types/cors\": \"^2.8.4\",\n    \"@types/crypto-random-string\": \"^1.0.0\",\n    \"@types/dateformat\": \"^3.0.0\",\n    \"@types/express\": \"^4.16.1\",\n    \"@types/express-graphql\": \"^0.6.2\",\n    \"@types/express-jwt\": \"0.0.41\",\n    \"@types/graphql\": \"^14.0.5\",\n    \"@types/jsonwebtoken\": \"^8.3.0\",\n    \"@types/knex\": \"^0.15.1\",\n    \"@types/node\": \"^10.12.20\",\n    \"@sentry/node\": \"^4.5.3\",\n    \"awesome-typescript-loader\": \"^5.2.1\",\n    \"bcrypt\": \"^3.0.3\",\n    \"chalk\": \"^2.4.2\",\n    \"compression\": \"^1.7.3\",\n    \"cors\": \"^2.8.5\",\n    \"cross-env\": \"^5.2.0\",\n    \"crypto-random-string\": \"^1.0.0\",\n    \"dateformat\": \"^3.0.3\",\n    \"decamelize\": \"^2.0.0\",\n    \"dotenv\": \"^6.2.0\",\n    \"email-regex\": \"^3.0.0\",\n    \"express\": \"^4.16.4\",\n    \"express-graphql\": \"^0.7.1\",\n    \"express-jwt\": \"^5.3.1\",\n    \"fs-extra\": \"^7.0.1\",\n    \"google-spreadsheet\": \"^2.0.7\",\n    \"google-spreadsheet-to-json\": \"^1.0.0\",\n    \"graphql\": \"^14.1.1\",\n    \"graphql-iso-date\": \"^3.6.1\",\n    \"jsonwebtoken\": \"^8.4.0\",\n    \"knex\": \"0.16.3\",\n    \"nodemailer\": \"^5.1.1\",\n    \"nodemailer-html-to-text\": \"^3.0.0\",\n    \"nodemailer-smtp-transport\": \"^2.7.4\",\n    \"objection\": \"^1.5.3\",\n    \"p-queue\": \"^3.0.0\",\n    \"pg\": \"^7.8.0\",\n    \"rimraf\": \"^2.6.3\",\n    \"source-map-loader\": \"^0.2.4\",\n    \"webpack\": \"^4.29.0\",\n    \"webpack-merge\": \"^4.2.1\",\n    \"webpack-node-externals\": \"^1.7.2\",\n    \"typescript\": \"^3.2.4\"\n  },\n  \"devDependencies\": {\n    \"commitizen\": \"^3.0.5\",\n    \"cz-conventional-changelog\": \"^2.1.0\",\n    \"esdoc\": \"^1.1.0\",\n    \"esdoc-ecmascript-proposal-plugin\": \"^1.0.0\",\n    \"esdoc-standard-plugin\": \"^1.0.0\",\n    \"eslint\": \"^5.12.1\",\n    \"eslint-config-prettier\": \"^4.0.0\",\n    \"eslint-config-standard\": \"^12.0.0\",\n    \"eslint-plugin-compat\": \"^2.6.3\",\n    \"eslint-plugin-import\": \"^2.16.0\",\n    \"eslint-plugin-jest\": \"^22.2.1\",\n    \"eslint-plugin-jsdoc\": \"^4.1.0\",\n    \"eslint-plugin-node\": \"^8.0.1\",\n    \"eslint-plugin-promise\": \"^4.0.1\",\n    \"eslint-plugin-standard\": \"^4.0.0\",\n    \"jest\": \"^24.0.0\",\n    \"node-fetch\": \"^2.3.0\",\n    \"nodemon\": \"^1.18.9\",\n    \"nodemon-webpack-plugin\": \"^4.0.7\",\n    \"standard-version\": \"^4.4.0\",\n    \"ts-node\": \"^8.0.2\"\n  },\n  \"eslintConfig\": {\n    \"extends\": [\n      \"standard\",\n      \"prettier\",\n      \"prettier/standard\"\n    ],\n    \"env\": {\n      \"node\": true,\n      \"jest/globals\": true\n    },\n    \"plugins\": [\n      \"jest\",\n      \"jsdoc\"\n    ],\n    \"rules\": {\n      \"jsdoc/check-examples\": 1,\n      \"jsdoc/check-param-names\": 1,\n      \"jsdoc/check-tag-names\": 1,\n      \"jsdoc/check-types\": 1,\n      \"jsdoc/newline-after-description\": 1,\n      \"jsdoc/no-undefined-types\": 1,\n      \"jsdoc/require-description\": 1,\n      \"jsdoc/require-description-complete-sentence\": 1,\n      \"jsdoc/require-example\": 1,\n      \"jsdoc/require-hyphen-before-param-description\": 1,\n      \"jsdoc/require-param\": 1,\n      \"jsdoc/require-param-description\": 1,\n      \"jsdoc/require-param-name\": 1,\n      \"jsdoc/require-param-type\": 1,\n      \"jsdoc/require-returns\": 1,\n      \"jsdoc/require-returns-description\": 1,\n      \"jsdoc/require-returns-type\": 1,\n      \"jsdoc/valid-types\": 1\n    }\n  },\n  \"config\": {\n    \"commitizen\": {\n      \"path\": \"./node_modules/cz-conventional-changelog\"\n    }\n  },\n  \"esdoc\": {\n    \"source\": \"./src\",\n    \"destination\": \"./docs\",\n    \"plugins\": [\n      {\n        \"name\": \"esdoc-standard-plugin\",\n        \"option\": {\n          \"manual\": {\n            \"index\": \"./manual/infos.md\",\n            \"asset\": \"./manual/asset\",\n            \"files\": [\n              \"./manual/docker.md\"\n            ]\n          }\n        }\n      },\n      {\n        \"name\": \"esdoc-ecmascript-proposal-plugin\",\n        \"option\": {\n          \"objectRestSpread\": true,\n          \"classProperties\": true\n        }\n      }\n    ]\n  }\n}\n",
    "longname": "/Volumes/fr-work/Sites/camino-api/package.json",
    "name": "package.json",
    "static": true,
    "access": "public"
  },
  {
    "kind": "manualIndex",
    "content": "# Camino\n\n> le cadastre minier numérique ouvert\n\n[Camino](http://camino.beta.gouv.fr/) est le nouvel outil de gestion du domaine minier de l'administration. Il présente les caractéristiques des titres miniers sur une carte et permet de les suivre à chaque étape de leur vie.\n\n## Usages\n\n- Les **entreprises** gagnent en visibilité sur leur business et cela simplifie leurs démarches.\n- Les **citoyens** accèdent simplement aux informations publiques.\n- Les **agents publics** centralisent leurs contributions et bénéficient d’une vision partagée.\n",
    "longname": "/Volumes/fr-work/Sites/camino-api/manual/infos.md",
    "name": "./manual/infos.md",
    "static": true,
    "access": "public"
  },
  {
    "kind": "manualAsset",
    "longname": "/Volumes/fr-work/Sites/camino-api/manual/asset",
    "name": "./manual/asset",
    "static": true,
    "access": "public"
  },
  {
    "kind": "manual",
    "longname": "/Volumes/fr-work/Sites/camino-api/manual/docker.md",
    "name": "./manual/docker.md",
    "content": "# Manipuler la base de données\n\n## Recréer la base de données dans son conteneur Docker\n\n```sh\n# stopper le conteneur de l'API\ndocker stop camino-api_app_1\n\n# démarrer psql dans le conteneur de la base de données\ndocker exec -it camino-api_postgres_1 psql postgres\n```\n\n```psql\n# supprimer la base de données et la re-créer\nDROP DATABASE camino; CREATE DATABASE camino;\n\n# quitter psql\n\\q\n```\n\n```sh\n# redémarrer le conteneur Docker de l'API\ndocker start camino-api_app_1\n```\n\n## Démarrer un shell dans le conteneur Docker de l'API\n\n```sh\n# start a shell in the camino-api app\ndocker exec -it camino-api_app_1 sh\n```\n\n## Faire un dump de la base de données locale et l'uploader sur le serveur\n\n```bash\npg_dump camino > camino.sql && scp camino.sql <user>@<ip>:/srv/tmp/dumps/camino.sql\n```\n\n## Importer la base de données depuis le répertoire tmp vers le conteneur Docker\n\n```sh\n# se placer dans le dossier /tmp ou se trouve le dump\ncd /srv/tmp/dumps/\n\n# importer la base de données depuis le dump\ncat camino.sql | docker exec -i caminoapi_postgres_1 psql -U postgres -d camino\n```\n",
    "static": true,
    "access": "public"
  }
]